<!DOCTYPE html><html><head><meta charset="utf-8"><meta content="width=device-width, initial-scale=1, viewport-fit=cover" name="viewport"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-XBW7LQY62V"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-XBW7LQY62V');</script><title>Annals of Enavia</title><meta content="A side story of Final Fantasy Tactics. An account of Castle Cusue in the land of Enavia; sections of importance are penned in an ancient script, now indecipherable. The story of three sisters is documented within." name="description"><meta content="Mátyás Mustoha" name="author"><link href="../img/enavia-32.png" rel="icon" sizes="32x32" type="image/png"><link href="../img/enavia-48.png" rel="icon" sizes="48x48" type="image/png"><link href="../img/enavia-256.png" rel="icon" sizes="256x256" type="image/png"><link href="../img/enavia-256.png" rel="apple-touch-icon"><link href="https://mmatyas.github.io/fft/enavia/game" rel="canonical"><meta content="website" property="og:type"><meta content="https://mmatyas.github.io/fft/enavia/game" property="og:url"><meta content="Annals of Enavia" property="og:title"><meta content="A side story of Final Fantasy Tactics. An account of Castle Cusue in the land of Enavia; sections of importance are penned in an ancient script, now indecipherable. The story of three sisters is documented within." property="og:description"><meta content="mmatyas.github.io" property="og:site_name"><meta content="en_US" property="og:locale"><meta content="https://mmatyas.github.io/fft/enavia/img/enavia-320.png" property="og:image"><meta content="320" property="og:image:width"><meta content="320" property="og:image:height"><meta content="A picture of the Annals of Enavia from the game" property="og:image:alt"><meta content="summary" property="twitter:card"><meta content="https://mmatyas.github.io/fft/enavia/game" property="twitter:url"><meta content="Annals of Enavia" property="twitter:title"><meta content="A side story of Final Fantasy Tactics. An account of Castle Cusue in the land of Enavia; sections of importance are penned in an ancient script, now indecipherable. The story of three sisters is documented within." property="twitter:description"><meta content="https://mmatyas.github.io/fft/enavia/img/enavia-320.png" property="twitter:image"><meta content="Mátyás Mustoha" property="twitter:creator"><style>:root{--oc-white:#fff;--oc-white-rgb:255,255,255;--oc-black:#000;--oc-black-rgb:0,0,0;--oc-gray-0:#f8f9fa;--oc-gray-0-rgb:248,249,250;--oc-gray-1:#f1f3f5;--oc-gray-1-rgb:241,243,245;--oc-gray-2:#e9ecef;--oc-gray-2-rgb:233,236,239;--oc-gray-3:#dee2e6;--oc-gray-3-rgb:222,226,230;--oc-gray-4:#ced4da;--oc-gray-4-rgb:206,212,218;--oc-gray-5:#adb5bd;--oc-gray-5-rgb:173,181,189;--oc-gray-6:#868e96;--oc-gray-6-rgb:134,142,150;--oc-gray-7:#495057;--oc-gray-7-rgb:73,80,87;--oc-gray-8:#343a40;--oc-gray-8-rgb:52,58,64;--oc-gray-9:#212529;--oc-gray-9-rgb:33,37,41;--oc-red-0:#fff5f5;--oc-red-0-rgb:255,245,245;--oc-red-1:#ffe3e3;--oc-red-1-rgb:255,227,227;--oc-red-2:#ffc9c9;--oc-red-2-rgb:255,201,201;--oc-red-3:#ffa8a8;--oc-red-3-rgb:255,168,168;--oc-red-4:#ff8787;--oc-red-4-rgb:255,135,135;--oc-red-5:#ff6b6b;--oc-red-5-rgb:255,107,107;--oc-red-6:#fa5252;--oc-red-6-rgb:250,82,82;--oc-red-7:#f03e3e;--oc-red-7-rgb:240,62,62;--oc-red-8:#e03131;--oc-red-8-rgb:224,49,49;--oc-red-9:#c92a2a;--oc-red-9-rgb:201,42,42;--oc-pink-0:#fff0f6;--oc-pink-0-rgb:255,240,246;--oc-pink-1:#ffdeeb;--oc-pink-1-rgb:255,222,235;--oc-pink-2:#fcc2d7;--oc-pink-2-rgb:252,194,215;--oc-pink-3:#faa2c1;--oc-pink-3-rgb:250,162,193;--oc-pink-4:#f783ac;--oc-pink-4-rgb:247,131,172;--oc-pink-5:#f06595;--oc-pink-5-rgb:240,101,149;--oc-pink-6:#e64980;--oc-pink-6-rgb:230,73,128;--oc-pink-7:#d6336c;--oc-pink-7-rgb:214,51,108;--oc-pink-8:#c2255c;--oc-pink-8-rgb:194,37,92;--oc-pink-9:#a61e4d;--oc-pink-9-rgb:166,30,77;--oc-grape-0:#f8f0fc;--oc-grape-0-rgb:248,240,252;--oc-grape-1:#f3d9fa;--oc-grape-1-rgb:243,217,250;--oc-grape-2:#eebefa;--oc-grape-2-rgb:238,190,250;--oc-grape-3:#e599f7;--oc-grape-3-rgb:229,153,247;--oc-grape-4:#da77f2;--oc-grape-4-rgb:218,119,242;--oc-grape-5:#cc5de8;--oc-grape-5-rgb:204,93,232;--oc-grape-6:#be4bdb;--oc-grape-6-rgb:190,75,219;--oc-grape-7:#ae3ec9;--oc-grape-7-rgb:174,62,201;--oc-grape-8:#9c36b5;--oc-grape-8-rgb:156,54,181;--oc-grape-9:#862e9c;--oc-grape-9-rgb:134,46,156;--oc-violet-0:#f3f0ff;--oc-violet-0-rgb:243,240,255;--oc-violet-1:#e5dbff;--oc-violet-1-rgb:229,219,255;--oc-violet-2:#d0bfff;--oc-violet-2-rgb:208,191,255;--oc-violet-3:#b197fc;--oc-violet-3-rgb:177,151,252;--oc-violet-4:#9775fa;--oc-violet-4-rgb:151,117,250;--oc-violet-5:#845ef7;--oc-violet-5-rgb:132,94,247;--oc-violet-6:#7950f2;--oc-violet-6-rgb:121,80,242;--oc-violet-7:#7048e8;--oc-violet-7-rgb:112,72,232;--oc-violet-8:#6741d9;--oc-violet-8-rgb:103,65,217;--oc-violet-9:#5f3dc4;--oc-violet-9-rgb:95,61,196;--oc-indigo-0:#edf2ff;--oc-indigo-0-rgb:237,242,255;--oc-indigo-1:#dbe4ff;--oc-indigo-1-rgb:219,228,255;--oc-indigo-2:#bac8ff;--oc-indigo-2-rgb:186,200,255;--oc-indigo-3:#91a7ff;--oc-indigo-3-rgb:145,167,255;--oc-indigo-4:#748ffc;--oc-indigo-4-rgb:116,143,252;--oc-indigo-5:#5c7cfa;--oc-indigo-5-rgb:92,124,250;--oc-indigo-6:#4c6ef5;--oc-indigo-6-rgb:76,110,245;--oc-indigo-7:#4263eb;--oc-indigo-7-rgb:66,99,235;--oc-indigo-8:#3b5bdb;--oc-indigo-8-rgb:59,91,219;--oc-indigo-9:#364fc7;--oc-indigo-9-rgb:54,79,199;--oc-blue-0:#e7f5ff;--oc-blue-0-rgb:231,245,255;--oc-blue-1:#d0ebff;--oc-blue-1-rgb:208,235,255;--oc-blue-2:#a5d8ff;--oc-blue-2-rgb:165,216,255;--oc-blue-3:#74c0fc;--oc-blue-3-rgb:116,192,252;--oc-blue-4:#4dabf7;--oc-blue-4-rgb:77,171,247;--oc-blue-5:#339af0;--oc-blue-5-rgb:51,154,240;--oc-blue-6:#228be6;--oc-blue-6-rgb:34,139,230;--oc-blue-7:#1c7ed6;--oc-blue-7-rgb:28,126,214;--oc-blue-8:#1971c2;--oc-blue-8-rgb:25,113,194;--oc-blue-9:#1864ab;--oc-blue-9-rgb:24,100,171;--oc-cyan-0:#e3fafc;--oc-cyan-0-rgb:227,250,252;--oc-cyan-1:#c5f6fa;--oc-cyan-1-rgb:197,246,250;--oc-cyan-2:#99e9f2;--oc-cyan-2-rgb:153,233,242;--oc-cyan-3:#66d9e8;--oc-cyan-3-rgb:102,217,232;--oc-cyan-4:#3bc9db;--oc-cyan-4-rgb:59,201,219;--oc-cyan-5:#22b8cf;--oc-cyan-5-rgb:34,184,207;--oc-cyan-6:#15aabf;--oc-cyan-6-rgb:21,170,191;--oc-cyan-7:#1098ad;--oc-cyan-7-rgb:16,152,173;--oc-cyan-8:#0c8599;--oc-cyan-8-rgb:12,133,153;--oc-cyan-9:#0b7285;--oc-cyan-9-rgb:11,114,133;--oc-teal-0:#e6fcf5;--oc-teal-0-rgb:230,252,245;--oc-teal-1:#c3fae8;--oc-teal-1-rgb:195,250,232;--oc-teal-2:#96f2d7;--oc-teal-2-rgb:150,242,215;--oc-teal-3:#63e6be;--oc-teal-3-rgb:99,230,190;--oc-teal-4:#38d9a9;--oc-teal-4-rgb:56,217,169;--oc-teal-5:#20c997;--oc-teal-5-rgb:32,201,151;--oc-teal-6:#12b886;--oc-teal-6-rgb:18,184,134;--oc-teal-7:#0ca678;--oc-teal-7-rgb:12,166,120;--oc-teal-8:#099268;--oc-teal-8-rgb:9,146,104;--oc-teal-9:#087f5b;--oc-teal-9-rgb:8,127,91;--oc-green-0:#ebfbee;--oc-green-0-rgb:235,251,238;--oc-green-1:#d3f9d8;--oc-green-1-rgb:211,249,216;--oc-green-2:#b2f2bb;--oc-green-2-rgb:178,242,187;--oc-green-3:#8ce99a;--oc-green-3-rgb:140,233,154;--oc-green-4:#69db7c;--oc-green-4-rgb:105,219,124;--oc-green-5:#51cf66;--oc-green-5-rgb:81,207,102;--oc-green-6:#40c057;--oc-green-6-rgb:64,192,87;--oc-green-7:#37b24d;--oc-green-7-rgb:55,178,77;--oc-green-8:#2f9e44;--oc-green-8-rgb:47,158,68;--oc-green-9:#2b8a3e;--oc-green-9-rgb:43,138,62;--oc-lime-0:#f4fce3;--oc-lime-0-rgb:244,252,227;--oc-lime-1:#e9fac8;--oc-lime-1-rgb:233,250,200;--oc-lime-2:#d8f5a2;--oc-lime-2-rgb:216,245,162;--oc-lime-3:#c0eb75;--oc-lime-3-rgb:192,235,117;--oc-lime-4:#a9e34b;--oc-lime-4-rgb:169,227,75;--oc-lime-5:#94d82d;--oc-lime-5-rgb:148,216,45;--oc-lime-6:#82c91e;--oc-lime-6-rgb:130,201,30;--oc-lime-7:#74b816;--oc-lime-7-rgb:116,184,22;--oc-lime-8:#66a80f;--oc-lime-8-rgb:102,168,15;--oc-lime-9:#5c940d;--oc-lime-9-rgb:92,148,13;--oc-yellow-0:#fff9db;--oc-yellow-0-rgb:255,249,219;--oc-yellow-1:#fff3bf;--oc-yellow-1-rgb:255,243,191;--oc-yellow-2:#ffec99;--oc-yellow-2-rgb:255,236,153;--oc-yellow-3:#ffe066;--oc-yellow-3-rgb:255,224,102;--oc-yellow-4:#ffd43b;--oc-yellow-4-rgb:255,212,59;--oc-yellow-5:#fcc419;--oc-yellow-5-rgb:252,196,25;--oc-yellow-6:#fab005;--oc-yellow-6-rgb:250,176,5;--oc-yellow-7:#f59f00;--oc-yellow-7-rgb:245,159,0;--oc-yellow-8:#f08c00;--oc-yellow-8-rgb:240,140,0;--oc-yellow-9:#e67700;--oc-yellow-9-rgb:230,119,0;--oc-orange-0:#fff4e6;--oc-orange-0-rgb:255,244,230;--oc-orange-1:#ffe8cc;--oc-orange-1-rgb:255,232,204;--oc-orange-2:#ffd8a8;--oc-orange-2-rgb:255,216,168;--oc-orange-3:#ffc078;--oc-orange-3-rgb:255,192,120;--oc-orange-4:#ffa94d;--oc-orange-4-rgb:255,169,77;--oc-orange-5:#ff922b;--oc-orange-5-rgb:255,146,43;--oc-orange-6:#fd7e14;--oc-orange-6-rgb:253,126,20;--oc-orange-7:#f76707;--oc-orange-7-rgb:247,103,7;--oc-orange-8:#e8590c;--oc-orange-8-rgb:232,89,12;--oc-orange-9:#d9480f;--oc-orange-9-rgb:217,72,15}#backstage{--backstage-ui-padding:8px;--backstage-bg:var(--oc-gray-3);--backstage-fg:#000;--backstage-input-bg:transparent;--backstage-input-fg:var(--backstage-fg);--backstage-input-border:var(--backstage-fg);--backstage-table-border:var(--backstage-fg);--backstage-font-size:12px;--backstage-tab-height:28px}:root{--font-monospaced:"Courier New","Courier",monospace;--font-system:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu Cantarell,"Helvetica Neue",sans-serif}.small-caps{font-size:70%;letter-spacing:.075em;text-transform:uppercase}#backstage .panel h2{margin:0}#backstage .panel h2 button{background:none;border:none;font-size:calc(var(--backstage-font-size) - 1px);font-weight:400;padding:0 var(--backstage-ui-padding);text-align:left;width:100%}#backstage .panel h2 button:before{content:"►";display:inline-block;width:1.25em}#backstage .panel h2 button:hover{color:var(--oc-gray-7)}#backstage .panel.open h2 button:before{content:"▼"}
:root{--oc-white:#fff;--oc-white-rgb:255,255,255;--oc-black:#000;--oc-black-rgb:0,0,0;--oc-gray-0:#f8f9fa;--oc-gray-0-rgb:248,249,250;--oc-gray-1:#f1f3f5;--oc-gray-1-rgb:241,243,245;--oc-gray-2:#e9ecef;--oc-gray-2-rgb:233,236,239;--oc-gray-3:#dee2e6;--oc-gray-3-rgb:222,226,230;--oc-gray-4:#ced4da;--oc-gray-4-rgb:206,212,218;--oc-gray-5:#adb5bd;--oc-gray-5-rgb:173,181,189;--oc-gray-6:#868e96;--oc-gray-6-rgb:134,142,150;--oc-gray-7:#495057;--oc-gray-7-rgb:73,80,87;--oc-gray-8:#343a40;--oc-gray-8-rgb:52,58,64;--oc-gray-9:#212529;--oc-gray-9-rgb:33,37,41;--oc-red-0:#fff5f5;--oc-red-0-rgb:255,245,245;--oc-red-1:#ffe3e3;--oc-red-1-rgb:255,227,227;--oc-red-2:#ffc9c9;--oc-red-2-rgb:255,201,201;--oc-red-3:#ffa8a8;--oc-red-3-rgb:255,168,168;--oc-red-4:#ff8787;--oc-red-4-rgb:255,135,135;--oc-red-5:#ff6b6b;--oc-red-5-rgb:255,107,107;--oc-red-6:#fa5252;--oc-red-6-rgb:250,82,82;--oc-red-7:#f03e3e;--oc-red-7-rgb:240,62,62;--oc-red-8:#e03131;--oc-red-8-rgb:224,49,49;--oc-red-9:#c92a2a;--oc-red-9-rgb:201,42,42;--oc-pink-0:#fff0f6;--oc-pink-0-rgb:255,240,246;--oc-pink-1:#ffdeeb;--oc-pink-1-rgb:255,222,235;--oc-pink-2:#fcc2d7;--oc-pink-2-rgb:252,194,215;--oc-pink-3:#faa2c1;--oc-pink-3-rgb:250,162,193;--oc-pink-4:#f783ac;--oc-pink-4-rgb:247,131,172;--oc-pink-5:#f06595;--oc-pink-5-rgb:240,101,149;--oc-pink-6:#e64980;--oc-pink-6-rgb:230,73,128;--oc-pink-7:#d6336c;--oc-pink-7-rgb:214,51,108;--oc-pink-8:#c2255c;--oc-pink-8-rgb:194,37,92;--oc-pink-9:#a61e4d;--oc-pink-9-rgb:166,30,77;--oc-grape-0:#f8f0fc;--oc-grape-0-rgb:248,240,252;--oc-grape-1:#f3d9fa;--oc-grape-1-rgb:243,217,250;--oc-grape-2:#eebefa;--oc-grape-2-rgb:238,190,250;--oc-grape-3:#e599f7;--oc-grape-3-rgb:229,153,247;--oc-grape-4:#da77f2;--oc-grape-4-rgb:218,119,242;--oc-grape-5:#cc5de8;--oc-grape-5-rgb:204,93,232;--oc-grape-6:#be4bdb;--oc-grape-6-rgb:190,75,219;--oc-grape-7:#ae3ec9;--oc-grape-7-rgb:174,62,201;--oc-grape-8:#9c36b5;--oc-grape-8-rgb:156,54,181;--oc-grape-9:#862e9c;--oc-grape-9-rgb:134,46,156;--oc-violet-0:#f3f0ff;--oc-violet-0-rgb:243,240,255;--oc-violet-1:#e5dbff;--oc-violet-1-rgb:229,219,255;--oc-violet-2:#d0bfff;--oc-violet-2-rgb:208,191,255;--oc-violet-3:#b197fc;--oc-violet-3-rgb:177,151,252;--oc-violet-4:#9775fa;--oc-violet-4-rgb:151,117,250;--oc-violet-5:#845ef7;--oc-violet-5-rgb:132,94,247;--oc-violet-6:#7950f2;--oc-violet-6-rgb:121,80,242;--oc-violet-7:#7048e8;--oc-violet-7-rgb:112,72,232;--oc-violet-8:#6741d9;--oc-violet-8-rgb:103,65,217;--oc-violet-9:#5f3dc4;--oc-violet-9-rgb:95,61,196;--oc-indigo-0:#edf2ff;--oc-indigo-0-rgb:237,242,255;--oc-indigo-1:#dbe4ff;--oc-indigo-1-rgb:219,228,255;--oc-indigo-2:#bac8ff;--oc-indigo-2-rgb:186,200,255;--oc-indigo-3:#91a7ff;--oc-indigo-3-rgb:145,167,255;--oc-indigo-4:#748ffc;--oc-indigo-4-rgb:116,143,252;--oc-indigo-5:#5c7cfa;--oc-indigo-5-rgb:92,124,250;--oc-indigo-6:#4c6ef5;--oc-indigo-6-rgb:76,110,245;--oc-indigo-7:#4263eb;--oc-indigo-7-rgb:66,99,235;--oc-indigo-8:#3b5bdb;--oc-indigo-8-rgb:59,91,219;--oc-indigo-9:#364fc7;--oc-indigo-9-rgb:54,79,199;--oc-blue-0:#e7f5ff;--oc-blue-0-rgb:231,245,255;--oc-blue-1:#d0ebff;--oc-blue-1-rgb:208,235,255;--oc-blue-2:#a5d8ff;--oc-blue-2-rgb:165,216,255;--oc-blue-3:#74c0fc;--oc-blue-3-rgb:116,192,252;--oc-blue-4:#4dabf7;--oc-blue-4-rgb:77,171,247;--oc-blue-5:#339af0;--oc-blue-5-rgb:51,154,240;--oc-blue-6:#228be6;--oc-blue-6-rgb:34,139,230;--oc-blue-7:#1c7ed6;--oc-blue-7-rgb:28,126,214;--oc-blue-8:#1971c2;--oc-blue-8-rgb:25,113,194;--oc-blue-9:#1864ab;--oc-blue-9-rgb:24,100,171;--oc-cyan-0:#e3fafc;--oc-cyan-0-rgb:227,250,252;--oc-cyan-1:#c5f6fa;--oc-cyan-1-rgb:197,246,250;--oc-cyan-2:#99e9f2;--oc-cyan-2-rgb:153,233,242;--oc-cyan-3:#66d9e8;--oc-cyan-3-rgb:102,217,232;--oc-cyan-4:#3bc9db;--oc-cyan-4-rgb:59,201,219;--oc-cyan-5:#22b8cf;--oc-cyan-5-rgb:34,184,207;--oc-cyan-6:#15aabf;--oc-cyan-6-rgb:21,170,191;--oc-cyan-7:#1098ad;--oc-cyan-7-rgb:16,152,173;--oc-cyan-8:#0c8599;--oc-cyan-8-rgb:12,133,153;--oc-cyan-9:#0b7285;--oc-cyan-9-rgb:11,114,133;--oc-teal-0:#e6fcf5;--oc-teal-0-rgb:230,252,245;--oc-teal-1:#c3fae8;--oc-teal-1-rgb:195,250,232;--oc-teal-2:#96f2d7;--oc-teal-2-rgb:150,242,215;--oc-teal-3:#63e6be;--oc-teal-3-rgb:99,230,190;--oc-teal-4:#38d9a9;--oc-teal-4-rgb:56,217,169;--oc-teal-5:#20c997;--oc-teal-5-rgb:32,201,151;--oc-teal-6:#12b886;--oc-teal-6-rgb:18,184,134;--oc-teal-7:#0ca678;--oc-teal-7-rgb:12,166,120;--oc-teal-8:#099268;--oc-teal-8-rgb:9,146,104;--oc-teal-9:#087f5b;--oc-teal-9-rgb:8,127,91;--oc-green-0:#ebfbee;--oc-green-0-rgb:235,251,238;--oc-green-1:#d3f9d8;--oc-green-1-rgb:211,249,216;--oc-green-2:#b2f2bb;--oc-green-2-rgb:178,242,187;--oc-green-3:#8ce99a;--oc-green-3-rgb:140,233,154;--oc-green-4:#69db7c;--oc-green-4-rgb:105,219,124;--oc-green-5:#51cf66;--oc-green-5-rgb:81,207,102;--oc-green-6:#40c057;--oc-green-6-rgb:64,192,87;--oc-green-7:#37b24d;--oc-green-7-rgb:55,178,77;--oc-green-8:#2f9e44;--oc-green-8-rgb:47,158,68;--oc-green-9:#2b8a3e;--oc-green-9-rgb:43,138,62;--oc-lime-0:#f4fce3;--oc-lime-0-rgb:244,252,227;--oc-lime-1:#e9fac8;--oc-lime-1-rgb:233,250,200;--oc-lime-2:#d8f5a2;--oc-lime-2-rgb:216,245,162;--oc-lime-3:#c0eb75;--oc-lime-3-rgb:192,235,117;--oc-lime-4:#a9e34b;--oc-lime-4-rgb:169,227,75;--oc-lime-5:#94d82d;--oc-lime-5-rgb:148,216,45;--oc-lime-6:#82c91e;--oc-lime-6-rgb:130,201,30;--oc-lime-7:#74b816;--oc-lime-7-rgb:116,184,22;--oc-lime-8:#66a80f;--oc-lime-8-rgb:102,168,15;--oc-lime-9:#5c940d;--oc-lime-9-rgb:92,148,13;--oc-yellow-0:#fff9db;--oc-yellow-0-rgb:255,249,219;--oc-yellow-1:#fff3bf;--oc-yellow-1-rgb:255,243,191;--oc-yellow-2:#ffec99;--oc-yellow-2-rgb:255,236,153;--oc-yellow-3:#ffe066;--oc-yellow-3-rgb:255,224,102;--oc-yellow-4:#ffd43b;--oc-yellow-4-rgb:255,212,59;--oc-yellow-5:#fcc419;--oc-yellow-5-rgb:252,196,25;--oc-yellow-6:#fab005;--oc-yellow-6-rgb:250,176,5;--oc-yellow-7:#f59f00;--oc-yellow-7-rgb:245,159,0;--oc-yellow-8:#f08c00;--oc-yellow-8-rgb:240,140,0;--oc-yellow-9:#e67700;--oc-yellow-9-rgb:230,119,0;--oc-orange-0:#fff4e6;--oc-orange-0-rgb:255,244,230;--oc-orange-1:#ffe8cc;--oc-orange-1-rgb:255,232,204;--oc-orange-2:#ffd8a8;--oc-orange-2-rgb:255,216,168;--oc-orange-3:#ffc078;--oc-orange-3-rgb:255,192,120;--oc-orange-4:#ffa94d;--oc-orange-4-rgb:255,169,77;--oc-orange-5:#ff922b;--oc-orange-5-rgb:255,146,43;--oc-orange-6:#fd7e14;--oc-orange-6-rgb:253,126,20;--oc-orange-7:#f76707;--oc-orange-7-rgb:247,103,7;--oc-orange-8:#e8590c;--oc-orange-8-rgb:232,89,12;--oc-orange-9:#d9480f;--oc-orange-9-rgb:217,72,15}#backstage{--backstage-ui-padding:8px;--backstage-bg:var(--oc-gray-3);--backstage-fg:#000;--backstage-input-bg:transparent;--backstage-input-fg:var(--backstage-fg);--backstage-input-border:var(--backstage-fg);--backstage-table-border:var(--backstage-fg);--backstage-font-size:12px;--backstage-tab-height:28px}#backstage table.history td.actions{width:2.5em}#backstage table.history td.go{border-right:1px solid var(--backstage-fg)}
:root{--oc-white:#fff;--oc-white-rgb:255,255,255;--oc-black:#000;--oc-black-rgb:0,0,0;--oc-gray-0:#f8f9fa;--oc-gray-0-rgb:248,249,250;--oc-gray-1:#f1f3f5;--oc-gray-1-rgb:241,243,245;--oc-gray-2:#e9ecef;--oc-gray-2-rgb:233,236,239;--oc-gray-3:#dee2e6;--oc-gray-3-rgb:222,226,230;--oc-gray-4:#ced4da;--oc-gray-4-rgb:206,212,218;--oc-gray-5:#adb5bd;--oc-gray-5-rgb:173,181,189;--oc-gray-6:#868e96;--oc-gray-6-rgb:134,142,150;--oc-gray-7:#495057;--oc-gray-7-rgb:73,80,87;--oc-gray-8:#343a40;--oc-gray-8-rgb:52,58,64;--oc-gray-9:#212529;--oc-gray-9-rgb:33,37,41;--oc-red-0:#fff5f5;--oc-red-0-rgb:255,245,245;--oc-red-1:#ffe3e3;--oc-red-1-rgb:255,227,227;--oc-red-2:#ffc9c9;--oc-red-2-rgb:255,201,201;--oc-red-3:#ffa8a8;--oc-red-3-rgb:255,168,168;--oc-red-4:#ff8787;--oc-red-4-rgb:255,135,135;--oc-red-5:#ff6b6b;--oc-red-5-rgb:255,107,107;--oc-red-6:#fa5252;--oc-red-6-rgb:250,82,82;--oc-red-7:#f03e3e;--oc-red-7-rgb:240,62,62;--oc-red-8:#e03131;--oc-red-8-rgb:224,49,49;--oc-red-9:#c92a2a;--oc-red-9-rgb:201,42,42;--oc-pink-0:#fff0f6;--oc-pink-0-rgb:255,240,246;--oc-pink-1:#ffdeeb;--oc-pink-1-rgb:255,222,235;--oc-pink-2:#fcc2d7;--oc-pink-2-rgb:252,194,215;--oc-pink-3:#faa2c1;--oc-pink-3-rgb:250,162,193;--oc-pink-4:#f783ac;--oc-pink-4-rgb:247,131,172;--oc-pink-5:#f06595;--oc-pink-5-rgb:240,101,149;--oc-pink-6:#e64980;--oc-pink-6-rgb:230,73,128;--oc-pink-7:#d6336c;--oc-pink-7-rgb:214,51,108;--oc-pink-8:#c2255c;--oc-pink-8-rgb:194,37,92;--oc-pink-9:#a61e4d;--oc-pink-9-rgb:166,30,77;--oc-grape-0:#f8f0fc;--oc-grape-0-rgb:248,240,252;--oc-grape-1:#f3d9fa;--oc-grape-1-rgb:243,217,250;--oc-grape-2:#eebefa;--oc-grape-2-rgb:238,190,250;--oc-grape-3:#e599f7;--oc-grape-3-rgb:229,153,247;--oc-grape-4:#da77f2;--oc-grape-4-rgb:218,119,242;--oc-grape-5:#cc5de8;--oc-grape-5-rgb:204,93,232;--oc-grape-6:#be4bdb;--oc-grape-6-rgb:190,75,219;--oc-grape-7:#ae3ec9;--oc-grape-7-rgb:174,62,201;--oc-grape-8:#9c36b5;--oc-grape-8-rgb:156,54,181;--oc-grape-9:#862e9c;--oc-grape-9-rgb:134,46,156;--oc-violet-0:#f3f0ff;--oc-violet-0-rgb:243,240,255;--oc-violet-1:#e5dbff;--oc-violet-1-rgb:229,219,255;--oc-violet-2:#d0bfff;--oc-violet-2-rgb:208,191,255;--oc-violet-3:#b197fc;--oc-violet-3-rgb:177,151,252;--oc-violet-4:#9775fa;--oc-violet-4-rgb:151,117,250;--oc-violet-5:#845ef7;--oc-violet-5-rgb:132,94,247;--oc-violet-6:#7950f2;--oc-violet-6-rgb:121,80,242;--oc-violet-7:#7048e8;--oc-violet-7-rgb:112,72,232;--oc-violet-8:#6741d9;--oc-violet-8-rgb:103,65,217;--oc-violet-9:#5f3dc4;--oc-violet-9-rgb:95,61,196;--oc-indigo-0:#edf2ff;--oc-indigo-0-rgb:237,242,255;--oc-indigo-1:#dbe4ff;--oc-indigo-1-rgb:219,228,255;--oc-indigo-2:#bac8ff;--oc-indigo-2-rgb:186,200,255;--oc-indigo-3:#91a7ff;--oc-indigo-3-rgb:145,167,255;--oc-indigo-4:#748ffc;--oc-indigo-4-rgb:116,143,252;--oc-indigo-5:#5c7cfa;--oc-indigo-5-rgb:92,124,250;--oc-indigo-6:#4c6ef5;--oc-indigo-6-rgb:76,110,245;--oc-indigo-7:#4263eb;--oc-indigo-7-rgb:66,99,235;--oc-indigo-8:#3b5bdb;--oc-indigo-8-rgb:59,91,219;--oc-indigo-9:#364fc7;--oc-indigo-9-rgb:54,79,199;--oc-blue-0:#e7f5ff;--oc-blue-0-rgb:231,245,255;--oc-blue-1:#d0ebff;--oc-blue-1-rgb:208,235,255;--oc-blue-2:#a5d8ff;--oc-blue-2-rgb:165,216,255;--oc-blue-3:#74c0fc;--oc-blue-3-rgb:116,192,252;--oc-blue-4:#4dabf7;--oc-blue-4-rgb:77,171,247;--oc-blue-5:#339af0;--oc-blue-5-rgb:51,154,240;--oc-blue-6:#228be6;--oc-blue-6-rgb:34,139,230;--oc-blue-7:#1c7ed6;--oc-blue-7-rgb:28,126,214;--oc-blue-8:#1971c2;--oc-blue-8-rgb:25,113,194;--oc-blue-9:#1864ab;--oc-blue-9-rgb:24,100,171;--oc-cyan-0:#e3fafc;--oc-cyan-0-rgb:227,250,252;--oc-cyan-1:#c5f6fa;--oc-cyan-1-rgb:197,246,250;--oc-cyan-2:#99e9f2;--oc-cyan-2-rgb:153,233,242;--oc-cyan-3:#66d9e8;--oc-cyan-3-rgb:102,217,232;--oc-cyan-4:#3bc9db;--oc-cyan-4-rgb:59,201,219;--oc-cyan-5:#22b8cf;--oc-cyan-5-rgb:34,184,207;--oc-cyan-6:#15aabf;--oc-cyan-6-rgb:21,170,191;--oc-cyan-7:#1098ad;--oc-cyan-7-rgb:16,152,173;--oc-cyan-8:#0c8599;--oc-cyan-8-rgb:12,133,153;--oc-cyan-9:#0b7285;--oc-cyan-9-rgb:11,114,133;--oc-teal-0:#e6fcf5;--oc-teal-0-rgb:230,252,245;--oc-teal-1:#c3fae8;--oc-teal-1-rgb:195,250,232;--oc-teal-2:#96f2d7;--oc-teal-2-rgb:150,242,215;--oc-teal-3:#63e6be;--oc-teal-3-rgb:99,230,190;--oc-teal-4:#38d9a9;--oc-teal-4-rgb:56,217,169;--oc-teal-5:#20c997;--oc-teal-5-rgb:32,201,151;--oc-teal-6:#12b886;--oc-teal-6-rgb:18,184,134;--oc-teal-7:#0ca678;--oc-teal-7-rgb:12,166,120;--oc-teal-8:#099268;--oc-teal-8-rgb:9,146,104;--oc-teal-9:#087f5b;--oc-teal-9-rgb:8,127,91;--oc-green-0:#ebfbee;--oc-green-0-rgb:235,251,238;--oc-green-1:#d3f9d8;--oc-green-1-rgb:211,249,216;--oc-green-2:#b2f2bb;--oc-green-2-rgb:178,242,187;--oc-green-3:#8ce99a;--oc-green-3-rgb:140,233,154;--oc-green-4:#69db7c;--oc-green-4-rgb:105,219,124;--oc-green-5:#51cf66;--oc-green-5-rgb:81,207,102;--oc-green-6:#40c057;--oc-green-6-rgb:64,192,87;--oc-green-7:#37b24d;--oc-green-7-rgb:55,178,77;--oc-green-8:#2f9e44;--oc-green-8-rgb:47,158,68;--oc-green-9:#2b8a3e;--oc-green-9-rgb:43,138,62;--oc-lime-0:#f4fce3;--oc-lime-0-rgb:244,252,227;--oc-lime-1:#e9fac8;--oc-lime-1-rgb:233,250,200;--oc-lime-2:#d8f5a2;--oc-lime-2-rgb:216,245,162;--oc-lime-3:#c0eb75;--oc-lime-3-rgb:192,235,117;--oc-lime-4:#a9e34b;--oc-lime-4-rgb:169,227,75;--oc-lime-5:#94d82d;--oc-lime-5-rgb:148,216,45;--oc-lime-6:#82c91e;--oc-lime-6-rgb:130,201,30;--oc-lime-7:#74b816;--oc-lime-7-rgb:116,184,22;--oc-lime-8:#66a80f;--oc-lime-8-rgb:102,168,15;--oc-lime-9:#5c940d;--oc-lime-9-rgb:92,148,13;--oc-yellow-0:#fff9db;--oc-yellow-0-rgb:255,249,219;--oc-yellow-1:#fff3bf;--oc-yellow-1-rgb:255,243,191;--oc-yellow-2:#ffec99;--oc-yellow-2-rgb:255,236,153;--oc-yellow-3:#ffe066;--oc-yellow-3-rgb:255,224,102;--oc-yellow-4:#ffd43b;--oc-yellow-4-rgb:255,212,59;--oc-yellow-5:#fcc419;--oc-yellow-5-rgb:252,196,25;--oc-yellow-6:#fab005;--oc-yellow-6-rgb:250,176,5;--oc-yellow-7:#f59f00;--oc-yellow-7-rgb:245,159,0;--oc-yellow-8:#f08c00;--oc-yellow-8-rgb:240,140,0;--oc-yellow-9:#e67700;--oc-yellow-9-rgb:230,119,0;--oc-orange-0:#fff4e6;--oc-orange-0-rgb:255,244,230;--oc-orange-1:#ffe8cc;--oc-orange-1-rgb:255,232,204;--oc-orange-2:#ffd8a8;--oc-orange-2-rgb:255,216,168;--oc-orange-3:#ffc078;--oc-orange-3-rgb:255,192,120;--oc-orange-4:#ffa94d;--oc-orange-4-rgb:255,169,77;--oc-orange-5:#ff922b;--oc-orange-5-rgb:255,146,43;--oc-orange-6:#fd7e14;--oc-orange-6-rgb:253,126,20;--oc-orange-7:#f76707;--oc-orange-7-rgb:247,103,7;--oc-orange-8:#e8590c;--oc-orange-8-rgb:232,89,12;--oc-orange-9:#d9480f;--oc-orange-9-rgb:217,72,15}#backstage{--backstage-ui-padding:8px;--backstage-bg:var(--oc-gray-3);--backstage-fg:#000;--backstage-input-bg:transparent;--backstage-input-fg:var(--backstage-fg);--backstage-input-border:var(--backstage-fg);--backstage-table-border:var(--backstage-fg);--backstage-font-size:12px;--backstage-tab-height:28px}#backstage ul.tabs{border:1px solid var(--backstage-fg);display:flex;font-size:12px;list-style:none;margin:var(--backstage-ui-padding);padding:0}#backstage ul.tabs li{border-right:1px solid var(--backstage-fg);flex-grow:1;text-align:center}#backstage ul.tabs li:last-child{border-right:none}#backstage ul.tabs li button{border:none;border-radius:0;color:var(--backstage-fg);display:block;height:var(--backstage-tab-height);padding:var(--backstage-ui-padding);text-decoration:none;width:100%}#backstage ul.tabs li button.active{background:var(--backstage-fg);color:var(--backstage-bg)}#backstage .tab-content{max-height:calc(100vh - var(--backstage-tab-height));overflow:auto}
:root{--oc-white:#fff;--oc-white-rgb:255,255,255;--oc-black:#000;--oc-black-rgb:0,0,0;--oc-gray-0:#f8f9fa;--oc-gray-0-rgb:248,249,250;--oc-gray-1:#f1f3f5;--oc-gray-1-rgb:241,243,245;--oc-gray-2:#e9ecef;--oc-gray-2-rgb:233,236,239;--oc-gray-3:#dee2e6;--oc-gray-3-rgb:222,226,230;--oc-gray-4:#ced4da;--oc-gray-4-rgb:206,212,218;--oc-gray-5:#adb5bd;--oc-gray-5-rgb:173,181,189;--oc-gray-6:#868e96;--oc-gray-6-rgb:134,142,150;--oc-gray-7:#495057;--oc-gray-7-rgb:73,80,87;--oc-gray-8:#343a40;--oc-gray-8-rgb:52,58,64;--oc-gray-9:#212529;--oc-gray-9-rgb:33,37,41;--oc-red-0:#fff5f5;--oc-red-0-rgb:255,245,245;--oc-red-1:#ffe3e3;--oc-red-1-rgb:255,227,227;--oc-red-2:#ffc9c9;--oc-red-2-rgb:255,201,201;--oc-red-3:#ffa8a8;--oc-red-3-rgb:255,168,168;--oc-red-4:#ff8787;--oc-red-4-rgb:255,135,135;--oc-red-5:#ff6b6b;--oc-red-5-rgb:255,107,107;--oc-red-6:#fa5252;--oc-red-6-rgb:250,82,82;--oc-red-7:#f03e3e;--oc-red-7-rgb:240,62,62;--oc-red-8:#e03131;--oc-red-8-rgb:224,49,49;--oc-red-9:#c92a2a;--oc-red-9-rgb:201,42,42;--oc-pink-0:#fff0f6;--oc-pink-0-rgb:255,240,246;--oc-pink-1:#ffdeeb;--oc-pink-1-rgb:255,222,235;--oc-pink-2:#fcc2d7;--oc-pink-2-rgb:252,194,215;--oc-pink-3:#faa2c1;--oc-pink-3-rgb:250,162,193;--oc-pink-4:#f783ac;--oc-pink-4-rgb:247,131,172;--oc-pink-5:#f06595;--oc-pink-5-rgb:240,101,149;--oc-pink-6:#e64980;--oc-pink-6-rgb:230,73,128;--oc-pink-7:#d6336c;--oc-pink-7-rgb:214,51,108;--oc-pink-8:#c2255c;--oc-pink-8-rgb:194,37,92;--oc-pink-9:#a61e4d;--oc-pink-9-rgb:166,30,77;--oc-grape-0:#f8f0fc;--oc-grape-0-rgb:248,240,252;--oc-grape-1:#f3d9fa;--oc-grape-1-rgb:243,217,250;--oc-grape-2:#eebefa;--oc-grape-2-rgb:238,190,250;--oc-grape-3:#e599f7;--oc-grape-3-rgb:229,153,247;--oc-grape-4:#da77f2;--oc-grape-4-rgb:218,119,242;--oc-grape-5:#cc5de8;--oc-grape-5-rgb:204,93,232;--oc-grape-6:#be4bdb;--oc-grape-6-rgb:190,75,219;--oc-grape-7:#ae3ec9;--oc-grape-7-rgb:174,62,201;--oc-grape-8:#9c36b5;--oc-grape-8-rgb:156,54,181;--oc-grape-9:#862e9c;--oc-grape-9-rgb:134,46,156;--oc-violet-0:#f3f0ff;--oc-violet-0-rgb:243,240,255;--oc-violet-1:#e5dbff;--oc-violet-1-rgb:229,219,255;--oc-violet-2:#d0bfff;--oc-violet-2-rgb:208,191,255;--oc-violet-3:#b197fc;--oc-violet-3-rgb:177,151,252;--oc-violet-4:#9775fa;--oc-violet-4-rgb:151,117,250;--oc-violet-5:#845ef7;--oc-violet-5-rgb:132,94,247;--oc-violet-6:#7950f2;--oc-violet-6-rgb:121,80,242;--oc-violet-7:#7048e8;--oc-violet-7-rgb:112,72,232;--oc-violet-8:#6741d9;--oc-violet-8-rgb:103,65,217;--oc-violet-9:#5f3dc4;--oc-violet-9-rgb:95,61,196;--oc-indigo-0:#edf2ff;--oc-indigo-0-rgb:237,242,255;--oc-indigo-1:#dbe4ff;--oc-indigo-1-rgb:219,228,255;--oc-indigo-2:#bac8ff;--oc-indigo-2-rgb:186,200,255;--oc-indigo-3:#91a7ff;--oc-indigo-3-rgb:145,167,255;--oc-indigo-4:#748ffc;--oc-indigo-4-rgb:116,143,252;--oc-indigo-5:#5c7cfa;--oc-indigo-5-rgb:92,124,250;--oc-indigo-6:#4c6ef5;--oc-indigo-6-rgb:76,110,245;--oc-indigo-7:#4263eb;--oc-indigo-7-rgb:66,99,235;--oc-indigo-8:#3b5bdb;--oc-indigo-8-rgb:59,91,219;--oc-indigo-9:#364fc7;--oc-indigo-9-rgb:54,79,199;--oc-blue-0:#e7f5ff;--oc-blue-0-rgb:231,245,255;--oc-blue-1:#d0ebff;--oc-blue-1-rgb:208,235,255;--oc-blue-2:#a5d8ff;--oc-blue-2-rgb:165,216,255;--oc-blue-3:#74c0fc;--oc-blue-3-rgb:116,192,252;--oc-blue-4:#4dabf7;--oc-blue-4-rgb:77,171,247;--oc-blue-5:#339af0;--oc-blue-5-rgb:51,154,240;--oc-blue-6:#228be6;--oc-blue-6-rgb:34,139,230;--oc-blue-7:#1c7ed6;--oc-blue-7-rgb:28,126,214;--oc-blue-8:#1971c2;--oc-blue-8-rgb:25,113,194;--oc-blue-9:#1864ab;--oc-blue-9-rgb:24,100,171;--oc-cyan-0:#e3fafc;--oc-cyan-0-rgb:227,250,252;--oc-cyan-1:#c5f6fa;--oc-cyan-1-rgb:197,246,250;--oc-cyan-2:#99e9f2;--oc-cyan-2-rgb:153,233,242;--oc-cyan-3:#66d9e8;--oc-cyan-3-rgb:102,217,232;--oc-cyan-4:#3bc9db;--oc-cyan-4-rgb:59,201,219;--oc-cyan-5:#22b8cf;--oc-cyan-5-rgb:34,184,207;--oc-cyan-6:#15aabf;--oc-cyan-6-rgb:21,170,191;--oc-cyan-7:#1098ad;--oc-cyan-7-rgb:16,152,173;--oc-cyan-8:#0c8599;--oc-cyan-8-rgb:12,133,153;--oc-cyan-9:#0b7285;--oc-cyan-9-rgb:11,114,133;--oc-teal-0:#e6fcf5;--oc-teal-0-rgb:230,252,245;--oc-teal-1:#c3fae8;--oc-teal-1-rgb:195,250,232;--oc-teal-2:#96f2d7;--oc-teal-2-rgb:150,242,215;--oc-teal-3:#63e6be;--oc-teal-3-rgb:99,230,190;--oc-teal-4:#38d9a9;--oc-teal-4-rgb:56,217,169;--oc-teal-5:#20c997;--oc-teal-5-rgb:32,201,151;--oc-teal-6:#12b886;--oc-teal-6-rgb:18,184,134;--oc-teal-7:#0ca678;--oc-teal-7-rgb:12,166,120;--oc-teal-8:#099268;--oc-teal-8-rgb:9,146,104;--oc-teal-9:#087f5b;--oc-teal-9-rgb:8,127,91;--oc-green-0:#ebfbee;--oc-green-0-rgb:235,251,238;--oc-green-1:#d3f9d8;--oc-green-1-rgb:211,249,216;--oc-green-2:#b2f2bb;--oc-green-2-rgb:178,242,187;--oc-green-3:#8ce99a;--oc-green-3-rgb:140,233,154;--oc-green-4:#69db7c;--oc-green-4-rgb:105,219,124;--oc-green-5:#51cf66;--oc-green-5-rgb:81,207,102;--oc-green-6:#40c057;--oc-green-6-rgb:64,192,87;--oc-green-7:#37b24d;--oc-green-7-rgb:55,178,77;--oc-green-8:#2f9e44;--oc-green-8-rgb:47,158,68;--oc-green-9:#2b8a3e;--oc-green-9-rgb:43,138,62;--oc-lime-0:#f4fce3;--oc-lime-0-rgb:244,252,227;--oc-lime-1:#e9fac8;--oc-lime-1-rgb:233,250,200;--oc-lime-2:#d8f5a2;--oc-lime-2-rgb:216,245,162;--oc-lime-3:#c0eb75;--oc-lime-3-rgb:192,235,117;--oc-lime-4:#a9e34b;--oc-lime-4-rgb:169,227,75;--oc-lime-5:#94d82d;--oc-lime-5-rgb:148,216,45;--oc-lime-6:#82c91e;--oc-lime-6-rgb:130,201,30;--oc-lime-7:#74b816;--oc-lime-7-rgb:116,184,22;--oc-lime-8:#66a80f;--oc-lime-8-rgb:102,168,15;--oc-lime-9:#5c940d;--oc-lime-9-rgb:92,148,13;--oc-yellow-0:#fff9db;--oc-yellow-0-rgb:255,249,219;--oc-yellow-1:#fff3bf;--oc-yellow-1-rgb:255,243,191;--oc-yellow-2:#ffec99;--oc-yellow-2-rgb:255,236,153;--oc-yellow-3:#ffe066;--oc-yellow-3-rgb:255,224,102;--oc-yellow-4:#ffd43b;--oc-yellow-4-rgb:255,212,59;--oc-yellow-5:#fcc419;--oc-yellow-5-rgb:252,196,25;--oc-yellow-6:#fab005;--oc-yellow-6-rgb:250,176,5;--oc-yellow-7:#f59f00;--oc-yellow-7-rgb:245,159,0;--oc-yellow-8:#f08c00;--oc-yellow-8-rgb:240,140,0;--oc-yellow-9:#e67700;--oc-yellow-9-rgb:230,119,0;--oc-orange-0:#fff4e6;--oc-orange-0-rgb:255,244,230;--oc-orange-1:#ffe8cc;--oc-orange-1-rgb:255,232,204;--oc-orange-2:#ffd8a8;--oc-orange-2-rgb:255,216,168;--oc-orange-3:#ffc078;--oc-orange-3-rgb:255,192,120;--oc-orange-4:#ffa94d;--oc-orange-4-rgb:255,169,77;--oc-orange-5:#ff922b;--oc-orange-5-rgb:255,146,43;--oc-orange-6:#fd7e14;--oc-orange-6-rgb:253,126,20;--oc-orange-7:#f76707;--oc-orange-7-rgb:247,103,7;--oc-orange-8:#e8590c;--oc-orange-8-rgb:232,89,12;--oc-orange-9:#d9480f;--oc-orange-9-rgb:217,72,15;--page-margin:1em;--page-width:40em;--font-monospaced:"Courier New","Courier",monospace;--font-system:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu Cantarell,"Helvetica Neue",sans-serif}.small-caps{font-size:70%;letter-spacing:.075em;text-transform:uppercase}#backstage{--backstage-ui-padding:8px;--backstage-bg:var(--oc-gray-3);--backstage-fg:#000;--backstage-input-bg:transparent;--backstage-input-fg:var(--backstage-fg);--backstage-input-border:var(--backstage-fg);--backstage-table-border:var(--backstage-fg);--backstage-font-size:12px;--backstage-tab-height:28px}body.backstage-visible #backdrop{justify-content:flex-start;max-width:67vw}#backstage{bottom:0;box-shadow:inset 2px 0 3px rgba(0,0,0,.25);color:var(--backstage-fg);font:18px var(--font-system);max-height:100vh;position:fixed;right:0;top:0;transform:translateX(100%);width:33vw}#backstage,#backstage:before{background:var(--backstage-bg)}#backstage:before{content:"";height:50px;position:absolute;right:calc(100% - 4px);top:calc(50% - 25px);width:4px;z-index:2}@media screen and (max-width:425px){#backstage{width:calc(100vw - 25px)}}#backstage.open{transform:none}#backstage .toggle-visibility{background:var(--backstage-bg);border:none;border-bottom-left-radius:25px;border-bottom-right-radius:0;border-top-left-radius:25px;border-top-right-radius:0;box-shadow:inset 2px 0 3px rgba(0,0,0,.25);color:var(--backstage-fg);font-size:18px;height:50px;padding:0;position:absolute;right:100%;top:calc(50% - 25px);width:25px;z-index:1}#backstage button{background:var(--backstage-input-bg);border:1px solid var(--backstage-input-border);border-radius:calc(var(--backstage-ui-padding)*2);color:var(--backstage-input-fg);padding:var(--backstage-ui-padding)}#backstage button:hover{background:var(--oc-gray-2)}#backstage p{padding:0 var(--backstage-ui-padding)}#backstage li,#backstage p,#backstage td{font-size:var(--backstage-font-size)}#backstage input,#backstage select{background:var(--backstage-input-bg);border:1px solid var(--backstage-input-border);color:var(--backstage-input-fg);padding:var(--backstage-ui-padding)}#backstage table{background:var(--backstage-input-bg);border-collapse:collapse;margin:var(--backstage-ui-padding);table-layout:fixed;width:calc(100% - var(--backstage-ui-padding)*2)}#backstage th{text-align:left}#backstage td{border:1px solid var(--backstage-table-border);padding:var(--backstage-ui-padding);position:relative;vertical-align:top}#backstage td:first-child{border-left:none}#backstage td:last-child{border-right:none}#backstage td button,#backstage td input{background:none;border:none;border-radius:0;bottom:0;left:0;padding:var(--backstage-ui-padding);position:absolute;top:0;width:100%}#backstage textarea{background:var(--backstage-input-bg);border:1px solid var(--backstage-input-border);color:var(--backstage-input-fg);height:7.75em;padding:var(--backstage-ui-padding);width:100%}#backstage .block{display:block;margin:var(--backstage-ui-padding);width:calc(100% - var(--backstage-ui-padding)*2)}#backstage .disabled{color:var(--oc-gray-6)}#backstage .indented-input{font-size:12px;margin-left:calc(10em + var(--backstage-ui-padding))}#backstage .input-group{align-items:center;display:flex}#backstage .input-group label:first-child{margin-right:var(--backstage-ui-padding);text-align:right;width:10em}#backstage .input-group input,#backstage .input-group select{flex-grow:1}#backstage .segmented-button{display:flex}#backstage .segmented-button button{border-left:none;border-radius:0;flex-grow:1;margin:0}#backstage .segmented-button button:first-child{border-bottom-left-radius:calc(var(--backstage-ui-padding)*2);border-left:1px solid var(--backstage-input-border);border-top-left-radius:calc(var(--backstage-ui-padding)*2)}#backstage .segmented-button button:last-child{border-bottom-right-radius:calc(var(--backstage-ui-padding)*2);border-top-right-radius:calc(var(--backstage-ui-padding)*2)}#backstage .segmented-button .fixed{flex-grow:0;min-width:24px}#backstage .tab-content{max-height:calc(100vh - var(--backstage-tab-height));overflow:auto}
.fade-in{animation:fade-in 1s ease-out forwards;opacity:0}.fade-out{animation:fade-in 1s ease-out reverse forwards}.skip-animation{animation-delay:0s!important}@keyframes fade-in{0%{opacity:0}to{opacity:1}}
#page .warnings{list-style-type:none;margin-left:0;padding-left:0}
:root{--oc-white:#fff;--oc-white-rgb:255,255,255;--oc-black:#000;--oc-black-rgb:0,0,0;--oc-gray-0:#f8f9fa;--oc-gray-0-rgb:248,249,250;--oc-gray-1:#f1f3f5;--oc-gray-1-rgb:241,243,245;--oc-gray-2:#e9ecef;--oc-gray-2-rgb:233,236,239;--oc-gray-3:#dee2e6;--oc-gray-3-rgb:222,226,230;--oc-gray-4:#ced4da;--oc-gray-4-rgb:206,212,218;--oc-gray-5:#adb5bd;--oc-gray-5-rgb:173,181,189;--oc-gray-6:#868e96;--oc-gray-6-rgb:134,142,150;--oc-gray-7:#495057;--oc-gray-7-rgb:73,80,87;--oc-gray-8:#343a40;--oc-gray-8-rgb:52,58,64;--oc-gray-9:#212529;--oc-gray-9-rgb:33,37,41;--oc-red-0:#fff5f5;--oc-red-0-rgb:255,245,245;--oc-red-1:#ffe3e3;--oc-red-1-rgb:255,227,227;--oc-red-2:#ffc9c9;--oc-red-2-rgb:255,201,201;--oc-red-3:#ffa8a8;--oc-red-3-rgb:255,168,168;--oc-red-4:#ff8787;--oc-red-4-rgb:255,135,135;--oc-red-5:#ff6b6b;--oc-red-5-rgb:255,107,107;--oc-red-6:#fa5252;--oc-red-6-rgb:250,82,82;--oc-red-7:#f03e3e;--oc-red-7-rgb:240,62,62;--oc-red-8:#e03131;--oc-red-8-rgb:224,49,49;--oc-red-9:#c92a2a;--oc-red-9-rgb:201,42,42;--oc-pink-0:#fff0f6;--oc-pink-0-rgb:255,240,246;--oc-pink-1:#ffdeeb;--oc-pink-1-rgb:255,222,235;--oc-pink-2:#fcc2d7;--oc-pink-2-rgb:252,194,215;--oc-pink-3:#faa2c1;--oc-pink-3-rgb:250,162,193;--oc-pink-4:#f783ac;--oc-pink-4-rgb:247,131,172;--oc-pink-5:#f06595;--oc-pink-5-rgb:240,101,149;--oc-pink-6:#e64980;--oc-pink-6-rgb:230,73,128;--oc-pink-7:#d6336c;--oc-pink-7-rgb:214,51,108;--oc-pink-8:#c2255c;--oc-pink-8-rgb:194,37,92;--oc-pink-9:#a61e4d;--oc-pink-9-rgb:166,30,77;--oc-grape-0:#f8f0fc;--oc-grape-0-rgb:248,240,252;--oc-grape-1:#f3d9fa;--oc-grape-1-rgb:243,217,250;--oc-grape-2:#eebefa;--oc-grape-2-rgb:238,190,250;--oc-grape-3:#e599f7;--oc-grape-3-rgb:229,153,247;--oc-grape-4:#da77f2;--oc-grape-4-rgb:218,119,242;--oc-grape-5:#cc5de8;--oc-grape-5-rgb:204,93,232;--oc-grape-6:#be4bdb;--oc-grape-6-rgb:190,75,219;--oc-grape-7:#ae3ec9;--oc-grape-7-rgb:174,62,201;--oc-grape-8:#9c36b5;--oc-grape-8-rgb:156,54,181;--oc-grape-9:#862e9c;--oc-grape-9-rgb:134,46,156;--oc-violet-0:#f3f0ff;--oc-violet-0-rgb:243,240,255;--oc-violet-1:#e5dbff;--oc-violet-1-rgb:229,219,255;--oc-violet-2:#d0bfff;--oc-violet-2-rgb:208,191,255;--oc-violet-3:#b197fc;--oc-violet-3-rgb:177,151,252;--oc-violet-4:#9775fa;--oc-violet-4-rgb:151,117,250;--oc-violet-5:#845ef7;--oc-violet-5-rgb:132,94,247;--oc-violet-6:#7950f2;--oc-violet-6-rgb:121,80,242;--oc-violet-7:#7048e8;--oc-violet-7-rgb:112,72,232;--oc-violet-8:#6741d9;--oc-violet-8-rgb:103,65,217;--oc-violet-9:#5f3dc4;--oc-violet-9-rgb:95,61,196;--oc-indigo-0:#edf2ff;--oc-indigo-0-rgb:237,242,255;--oc-indigo-1:#dbe4ff;--oc-indigo-1-rgb:219,228,255;--oc-indigo-2:#bac8ff;--oc-indigo-2-rgb:186,200,255;--oc-indigo-3:#91a7ff;--oc-indigo-3-rgb:145,167,255;--oc-indigo-4:#748ffc;--oc-indigo-4-rgb:116,143,252;--oc-indigo-5:#5c7cfa;--oc-indigo-5-rgb:92,124,250;--oc-indigo-6:#4c6ef5;--oc-indigo-6-rgb:76,110,245;--oc-indigo-7:#4263eb;--oc-indigo-7-rgb:66,99,235;--oc-indigo-8:#3b5bdb;--oc-indigo-8-rgb:59,91,219;--oc-indigo-9:#364fc7;--oc-indigo-9-rgb:54,79,199;--oc-blue-0:#e7f5ff;--oc-blue-0-rgb:231,245,255;--oc-blue-1:#d0ebff;--oc-blue-1-rgb:208,235,255;--oc-blue-2:#a5d8ff;--oc-blue-2-rgb:165,216,255;--oc-blue-3:#74c0fc;--oc-blue-3-rgb:116,192,252;--oc-blue-4:#4dabf7;--oc-blue-4-rgb:77,171,247;--oc-blue-5:#339af0;--oc-blue-5-rgb:51,154,240;--oc-blue-6:#228be6;--oc-blue-6-rgb:34,139,230;--oc-blue-7:#1c7ed6;--oc-blue-7-rgb:28,126,214;--oc-blue-8:#1971c2;--oc-blue-8-rgb:25,113,194;--oc-blue-9:#1864ab;--oc-blue-9-rgb:24,100,171;--oc-cyan-0:#e3fafc;--oc-cyan-0-rgb:227,250,252;--oc-cyan-1:#c5f6fa;--oc-cyan-1-rgb:197,246,250;--oc-cyan-2:#99e9f2;--oc-cyan-2-rgb:153,233,242;--oc-cyan-3:#66d9e8;--oc-cyan-3-rgb:102,217,232;--oc-cyan-4:#3bc9db;--oc-cyan-4-rgb:59,201,219;--oc-cyan-5:#22b8cf;--oc-cyan-5-rgb:34,184,207;--oc-cyan-6:#15aabf;--oc-cyan-6-rgb:21,170,191;--oc-cyan-7:#1098ad;--oc-cyan-7-rgb:16,152,173;--oc-cyan-8:#0c8599;--oc-cyan-8-rgb:12,133,153;--oc-cyan-9:#0b7285;--oc-cyan-9-rgb:11,114,133;--oc-teal-0:#e6fcf5;--oc-teal-0-rgb:230,252,245;--oc-teal-1:#c3fae8;--oc-teal-1-rgb:195,250,232;--oc-teal-2:#96f2d7;--oc-teal-2-rgb:150,242,215;--oc-teal-3:#63e6be;--oc-teal-3-rgb:99,230,190;--oc-teal-4:#38d9a9;--oc-teal-4-rgb:56,217,169;--oc-teal-5:#20c997;--oc-teal-5-rgb:32,201,151;--oc-teal-6:#12b886;--oc-teal-6-rgb:18,184,134;--oc-teal-7:#0ca678;--oc-teal-7-rgb:12,166,120;--oc-teal-8:#099268;--oc-teal-8-rgb:9,146,104;--oc-teal-9:#087f5b;--oc-teal-9-rgb:8,127,91;--oc-green-0:#ebfbee;--oc-green-0-rgb:235,251,238;--oc-green-1:#d3f9d8;--oc-green-1-rgb:211,249,216;--oc-green-2:#b2f2bb;--oc-green-2-rgb:178,242,187;--oc-green-3:#8ce99a;--oc-green-3-rgb:140,233,154;--oc-green-4:#69db7c;--oc-green-4-rgb:105,219,124;--oc-green-5:#51cf66;--oc-green-5-rgb:81,207,102;--oc-green-6:#40c057;--oc-green-6-rgb:64,192,87;--oc-green-7:#37b24d;--oc-green-7-rgb:55,178,77;--oc-green-8:#2f9e44;--oc-green-8-rgb:47,158,68;--oc-green-9:#2b8a3e;--oc-green-9-rgb:43,138,62;--oc-lime-0:#f4fce3;--oc-lime-0-rgb:244,252,227;--oc-lime-1:#e9fac8;--oc-lime-1-rgb:233,250,200;--oc-lime-2:#d8f5a2;--oc-lime-2-rgb:216,245,162;--oc-lime-3:#c0eb75;--oc-lime-3-rgb:192,235,117;--oc-lime-4:#a9e34b;--oc-lime-4-rgb:169,227,75;--oc-lime-5:#94d82d;--oc-lime-5-rgb:148,216,45;--oc-lime-6:#82c91e;--oc-lime-6-rgb:130,201,30;--oc-lime-7:#74b816;--oc-lime-7-rgb:116,184,22;--oc-lime-8:#66a80f;--oc-lime-8-rgb:102,168,15;--oc-lime-9:#5c940d;--oc-lime-9-rgb:92,148,13;--oc-yellow-0:#fff9db;--oc-yellow-0-rgb:255,249,219;--oc-yellow-1:#fff3bf;--oc-yellow-1-rgb:255,243,191;--oc-yellow-2:#ffec99;--oc-yellow-2-rgb:255,236,153;--oc-yellow-3:#ffe066;--oc-yellow-3-rgb:255,224,102;--oc-yellow-4:#ffd43b;--oc-yellow-4-rgb:255,212,59;--oc-yellow-5:#fcc419;--oc-yellow-5-rgb:252,196,25;--oc-yellow-6:#fab005;--oc-yellow-6-rgb:250,176,5;--oc-yellow-7:#f59f00;--oc-yellow-7-rgb:245,159,0;--oc-yellow-8:#f08c00;--oc-yellow-8-rgb:240,140,0;--oc-yellow-9:#e67700;--oc-yellow-9-rgb:230,119,0;--oc-orange-0:#fff4e6;--oc-orange-0-rgb:255,244,230;--oc-orange-1:#ffe8cc;--oc-orange-1-rgb:255,232,204;--oc-orange-2:#ffd8a8;--oc-orange-2-rgb:255,216,168;--oc-orange-3:#ffc078;--oc-orange-3-rgb:255,192,120;--oc-orange-4:#ffa94d;--oc-orange-4-rgb:255,169,77;--oc-orange-5:#ff922b;--oc-orange-5-rgb:255,146,43;--oc-orange-6:#fd7e14;--oc-orange-6-rgb:253,126,20;--oc-orange-7:#f76707;--oc-orange-7-rgb:247,103,7;--oc-orange-8:#e8590c;--oc-orange-8-rgb:232,89,12;--oc-orange-9:#d9480f;--oc-orange-9-rgb:217,72,15;--page-margin:1em;--page-width:40em;--font-monospaced:"Courier New","Courier",monospace;--font-system:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu Cantarell,"Helvetica Neue",sans-serif}.small-caps{font-size:70%;letter-spacing:.075em;text-transform:uppercase}#backdrop{align-items:center;min-height:100vh}#backdrop,#page{display:flex;justify-content:center}#page{flex-direction:column;line-height:150%;margin:var(--page-margin);max-width:calc(100vw - 2em);min-height:calc(100vh - var(--page-margin)*2);padding:4em 4em 2em;position:relative;width:var(--page-width)}#page article{display:flex;flex-grow:1}#page article>:first-child{margin-top:0;width:100%}#page footer,#page header{display:flex}#page footer>div,#page header>div{flex-grow:1}#page footer p,#page header p{margin:.5em 0 0}#page footer .center,#page header .center{text-align:center}#page footer .right p,#page header .right p{text-align:right}#page header{margin-top:0}#page header.has-content{border-bottom:1px solid #000}#page header.has-content+article>article>div>p:first-child,#page header.has-content+article>div>p:first-child{margin-top:1em}#page footer{margin-bottom:0}#page footer.has-content{border-top:1px solid #000}#page hr{border:none}#page hr:after{content:"*  *  *";display:block;text-align:center}#page .error,#page .warning{background:var(--oc-red-0);border-left:4px solid var(--oc-red-3);color:var(--oc-red-9);margin-bottom:1em;overflow:auto;padding:.5em;position:relative}#page .error :first-child,#page .warning :first-child{margin-top:0}#page .error :last-child,#page .warning :last-child{margin-bottom:0}#page .error a,#page .warning a{color:var(--oc-red-9)}#page .warning{background:var(--oc-yellow-0)}#page .warning,#page .warning a{color:var(--oc-yellow-9)}#page .fork p{display:flex;flex-direction:column;width:100%}#page .fork p a{display:block;flex-grow:1;padding:.5em;text-align:center}@media screen and (max-width:768px){#page{margin:0;max-width:100vw;min-height:100vh;padding:1em;width:100vw}}#spinner{bottom:0;height:auto;opacity:0;pointer-events:none;position:absolute;right:0;transition:opacity .25s ease-in-out;width:50px}#spinner.visible{display:block;opacity:1}
*{box-sizing:border-box}body{margin:0;padding:0}img{height:auto;max-width:100%}input[type=text],select{padding:.25em}pre{white-space:pre-wrap}tw-storydata{display:none}</style></head><body><form id="cb-validation" action="javascript:void(0)"><button id="cb-validation-tester" hidden=""></button><button id="cb-block-enter-key" hidden=""></button><div id="backdrop"><div id="page" aria-live="polite"><header><div class="left"></div><div class="center"></div><div class="right"></div></header><article></article><ul class="warnings"></ul><footer><div class="left"></div><div class="center"></div><div class="right"></div></footer><div id="spinner"><svg xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100">
    <rect x="31" y="14" width="38" height="72" rx="4" fill="white" />
    <circle cx="50" cy="50" r="28" fill="white" />
	<rect x="35" y="18" width="30" height="64" rx="4" fill="white" stroke-width="2px" stroke="black" />
    <circle cx="50" cy="50" r="20" stroke="black" fill="white" stroke-width="2px" />
	<line x1="50" y1="50" x2="50" y2="37" stroke="black" stroke-width="2px" stroke-linecap="round">
        <animateTransform
            attributeName="transform"
            begin="0s"
            dur="20s"
            type="rotate"
            from="0 50 50"
            to="360 50 50"
            repeatCount="indefinite"
        />
	</line>
	<line x1="50" y1="50" x2="42" y2="50" stroke="black" stroke-width="2px" stroke-linecap="round">
        <animateTransform
            attributeName="transform"
            begin="0s"
            dur="120s"
            type="rotate"
            from="0 50 50"
            to="360 50 50"
            repeatCount="indefinite"
        />
	</line>
</svg></div></div></div></form><!-- UUID://E7EFB74F-F519-4ACE-A07B-4FD04996BC4F// --><tw-storydata name="Annals of Enavia" startnode="95" creator="Tweego" creator-version="2.1.1+81d1d71" ifid="E7EFB74F-F519-4ACE-A07B-4FD04996BC4F" zoom="0.6" format="Chapbook" format-version="1.2.3" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">@font-face {
  font-family: 'FtMain';
  src: url(data/font_regular.ttf);
}
@font-face {
  font-family: 'FtMain';
  src: url(data/font_bold.ttf);
  font-weight: bold;
}
@font-face {
  font-family: 'FtMain';
  src: url(data/font_italic.ttf);
  font-style: italic;
}


:root {
  --page-width: 44em;
  text-rendering: optimizeLegibility;
}


tw-story,
#page {
  hyphens: auto;
}

tw-passage {
  width: 36em;
  margin: 0 auto;
}


.anim-tokimeki {
  color: var(--oc-yellow-5);
}

.monologue {
  margin: 2em auto;
  padding: 0 2em;
  border-width: 6px;
  border-color: var(--oc-gray-5);
  border-style: none dotted;
}
.intro-book {
  font-size: 2em;
  margin: 2.5em 0 1.25em 0;
}
.intro-chapter-num {
  font-size: 1.25em;
  margin: 3em 0 0 0;
}
.intro-chapter-title {
  font-size: 1.5em;
  margin: .6em 0 3em 0;
}
.intro-tl {
  font-size: 0.8em;
  margin-top: 3em;
}


.smallcaps {
  hyphens: none;
  font-variant: small-caps;
  white-space: nowrap;
}
.nobreak {
  hyphens: none;
}
.center {
  text-align: center;
}
.bold {
  font-weight: bold;
}
.italic {
  font-style: italic;
}


#page p:not(.monologue, .center) {
  text-indent: 1em;
}
#page p.noindent {
  text-indent: 0;
}


#page a {
  text-decoration: none;
}
#page a:hover {
  outline: .25em solid var(--oc-gray-7);
}
#page .fork a:hover {
  outline: none;
}
</style><script role="script" id="twine-user-script" type="text/twine-javascript">document.documentElement.setAttribute('lang', 'en');

window.update_tokimeki = () => {
  const current = engine.state.get('tokimeki_display') || 0;
  const target = Math.max(0, engine.state.get('tokimeki') || 0);
  if (current == target) {
    engine.state.set('sound.effect.tokimeki.playing', false);
    document.querySelector('footer .left').classList.remove('anim-tokimeki');
    return;
  }
  document.querySelector('footer .left').classList.add('anim-tokimeki');
  engine.state.set('sound.effect.tokimeki.playing', true);
  const delta = Math.max(-10, Math.min(target - current, 10));
  engine.state.set('tokimeki_display', current + delta);
  setTimeout(update_tokimeki, 100);
};


window.ALL_DAYS = [
  {scene: 'Baron', branches: ['A','B','C']},
  {scene: 'Flowers', branches: ['A','B','C']},
  {scene: 'Tree', branches: ['A','B','C']},
  {scene: 'Opera', branches: ['A','B','C']},
  {scene: 'Wind', branches: ['A','B','C']},
];

function remove_at(arr, idx) {
  const val = arr[idx];
  arr.splice(idx, 1);
  return val;
}
function random_idx(arr) {
  return Math.floor(Math.random() * arr.length);
}
function remove_rand(arr) {
  return remove_at(arr, random_idx(arr));
}

function state_get(name, defval) {
  return engine.state.get(name) || defval;
}


window.pick_next_day = () => {
  const lives = state_get('lives', 0);
  const tokimeki = state_get('tokimeki', 200);
  const flag_seen_intro = state_get('flag_seen_intro', false);
  const flag_seen_alone1 = state_get('flag_seen_alone1', false);
  const prev_route = state_get('route', '');

  if (lives <= 0 || tokimeki < 100) {
    return engine.state.set('route', 'EndA');
  }
  if (800 <= tokimeki && tokimeki < 1000) {
    return engine.state.set('route', 'EndB');
  }
  if (1000 <= tokimeki) {
    return engine.state.set('route', 'EndC');
  }
  if (650 < tokimeki) {
    if (!flag_seen_alone1) {
      return engine.state.set('route', 'Alone1');
    }
    if (prev_route !== 'Alone2') {
      return engine.state.set('route', 'Alone2');
    }
  }

  let curr_cycle = state_get('curr_cycle', []);
  let next_cycle = state_get('next_cycle', []);
  if (!curr_cycle.length) {
    curr_cycle = structuredClone(window.ALL_DAYS);
    next_cycle = [];
  }

  const next_day_idx = flag_seen_intro ? random_idx(curr_cycle) : 0;
  const next_day = remove_at(curr_cycle, next_day_idx);
  const next_branch = remove_rand(next_day.branches);
  engine.state.set('route', next_day.scene + next_branch);

  // Note that we don't let similar days follow each other even on cycle change
  if (!curr_cycle.length) {
    curr_cycle = [...next_cycle];
    next_cycle = [];
  }
  if (next_day.branches.length) {
    next_cycle.push(next_day);
  }

  engine.state.set('curr_cycle', curr_cycle);
  engine.state.set('next_cycle', next_cycle);
};
</script><tw-passagedata pid="1" name="AloneABC" tags="" position="100,100" size="100,100">{embed passage: &#39;DayStart&#39;}

&lt;p&gt;…is how it usually goes, but instead of the usual trio, today it is only Lucia all alone. &lt;q&gt;Alicia is in bed with fever, with Maria watching over her. Being out here on my own is a bit lonely, and yet, somehow also makes my heart race… I wonder why?&lt;/q&gt; Alicia was always frail, ever since she was small, and often stayed home sick.&lt;/p&gt;

&lt;p class=&#39;center italic&#39;&gt;(cuckoo sings)&lt;/p&gt;
&lt;p&gt;Deep in her thoughts, Lucia roams the estate. Small birds chirp in a hurry, as if lamenting the short summer so common on the plateaus. The girl continues towards the grove of the white birches, passes the small pond there, the garden of medical herbs on its shore, eventually reaching the edge of the vast, primeval forest.&lt;/p&gt;</tw-passagedata><tw-passagedata pid="2" name="Alone1" tags="" position="225,100" size="100,100">flag_seen_alone1: true
--
{embed passage: &#39;AloneABC&#39;}

&lt;p&gt;&lt;q&gt;Father seemed to have noticed already, so it would be better to not show any more signs of strange thoughts. If I wait for long enough, surely the chance will come where I can make certain of his feelings. Until that time, don&#39;t do anything reckless.&lt;br&gt;Do you understand?&lt;br&gt;That this is about myself?&lt;/q&gt;&lt;/p&gt;

&gt; [[But I can&#39;t hold back my feelings anymore…|Alone1A But I can&#39;t hold back my feelings anymore…]]
&gt; [[Yes, let&#39;s not do anything rash|Alone1B Yes, let&#39;s not do anything rash]]

[note]
&lt;span class=&#39;italic&#39;&gt;Betula platyphylla&lt;/span&gt;</tw-passagedata><tw-passagedata pid="3" name="Alone1A But I can&#39;t hold back my feelings anymore…" tags="" position="350,100" size="100,100">&lt;p&gt;Lucia continues on, and before she knows it, comes to the spot between the Fortune Teller&#39;s Pond and the Lion&#39;s Pool. Close to the waters there&#39;s the place usually called heather&#39;s clearing, with a bench in the middle, covered by roof from above. Eddie&#39;s wooden cabin and tool shed is also nearby, where father and son often drink a cup of tea. Birds are singing in the skies, and a refreshing breeze is swaying the tree branches.&lt;/p&gt;

&gt; [[Let&#39;s take a nap on the bench|Alone1A Let&#39;s take a nap on the bench]]
&gt; [[Let&#39;s read a book on the bench|Alone1A Let&#39;s read a book on the bench]]
&gt; [[Let&#39;s visit Eddie&#39;s cabin|Alone1A Let&#39;s visit Eddie&#39;s cabin]]

[note]
It&#39;s never really explained where this &lt;q&gt;heather&#39;s clearing&lt;/q&gt; got its name from. An earlier scene mentions that the place is full of flowers, so I &lt;span class=&#39;italic&#39;&gt;assume&lt;/span&gt; it&#39;s the heather plant, and not something like a person named Heather.</tw-passagedata><tw-passagedata pid="4" name="Alone1A Let&#39;s take a nap on the bench" tags="" position="475,100" size="100,100">&lt;p&gt;&lt;q&gt;Right, I&#39;m a bit sleepy, now that we had lunch.&lt;/q&gt; Lucia staggered towards the bench, and just like that, lied down.&lt;/p&gt;
&lt;p&gt;Who knows how much time has passed, but when the girl opened her eyes, right beside her she found Kurt. Lucia jumped to her feet in surprise, to which the boy burst into laughter:&lt;/p&gt;

&lt;p&gt;&lt;q&gt;Ahahahaha! You were lying here so defenseless I started to think about kidnapping you, milady!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Alicia turned all red hearing that.&lt;/p&gt;

&gt; [[What an ill-mannered person you are!|Alone1A What an ill-mannered person you are!]]
&gt; [[And where would you take me, exactly?!|Alone1A And where would you take me, exactly?!]]
&gt; [[Kidnap me! Oh, kidnap me!|Alone1A Kidnap me! Oh, kidnap me!]]</tw-passagedata><tw-passagedata pid="5" name="Alone1A What an ill-mannered person you are!" tags="" position="600,100" size="100,100">&lt;p&gt;&lt;q&gt;What an ill-mannered person you are!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;I&#39;m terribly sorry, Miss Lucia, I said something silly without thinking! Let this remain between us, as our secret, please do not tell the milord!&lt;/q&gt;&lt;/p&gt;

&gt; [[Not a chance! Be mindful of your standing!|Alone1A Not a chance! Be mindful of your standing!]]
&gt; [[I could keep it a secret maybe…|Alone1A I could keep it a secret maybe…]]</tw-passagedata><tw-passagedata pid="6" name="Alone1A Not a chance! Be mindful of your standing!" tags="" position="725,100" size="100,100">tokimeki: tokimeki - 133
--

&lt;p&gt;&lt;q&gt;Not a chance! Be mindful of your standing!&lt;/q&gt; In her nervousness, Lucia spoke harshly. Kurt&#39;s figure shrank right after, as he followed by several bows of apology.&lt;/p&gt;
&lt;p&gt;The girl was left speechless and bewildered. Yet at the same time she also struggled to keep her tears from flowing, as the feeling of sinking even deeper in love came to her mind.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="7" name="Alone1A I could keep it a secret maybe…" tags="" position="850,100" size="100,100">&lt;p&gt;&lt;q&gt;I could keep it a secret maybe…&lt;/q&gt; she started to say, but Kurt&#39;s mumbling interrupted:&lt;/p&gt;
&lt;p&gt;&lt;q&gt;I would like to have more secrets with you…&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Lucia was at a loss of words.&lt;/p&gt;

&gt; [[Okay|Alone1A Okay]]
&gt; [[Please keep your distance|Alone1A Please keep your distance]]</tw-passagedata><tw-passagedata pid="8" name="Alone1A Okay" tags="" position="975,100" size="100,100">tokimeki: tokimeki + 233
--

&lt;p&gt;&lt;q&gt;Okay. We could have a few shared secrets,&lt;/q&gt; she squeezed the words out, after which both of them went silent for a while. The familiar sound of birdsong became unusually loud, unusually clear, as if trying to convey thoughts to somewhere far, far away.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="9" name="Alone1A Please keep your distance" tags="" position="1100,100" size="100,100">tokimeki: tokimeki - 123
lives: lives - 1
--

&lt;p&gt;&lt;q&gt;We can&#39;t, Father would surely see through everything, so please keep your distance. Besides, I would rather have you not look at me like that…&lt;/q&gt; Lucia chose her words with as much care as she could.&lt;/p&gt;
&lt;p&gt;The two stood silently, frozen in place, unable to look into the other&#39;s eyes.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="10" name="Alone1A And where would you take me, exactly?!" tags="" position="1225,100" size="100,100">tokimeki: tokimeki + 193
--

&lt;p&gt;&lt;q&gt;And where would you take me, exactly?!&lt;/q&gt; Lucia asks, to which Kurt answers in a low voice:&lt;/p&gt;
&lt;p&gt;&lt;q&gt;To the village of my mother…&lt;/q&gt; he starts, but then the words stick to his throat.&lt;/p&gt;
&lt;p&gt;Lucia too is at a loss of words, holding back her innocent, loving heart with both her hands.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="11" name="Alone1A Kidnap me! Oh, kidnap me!" tags="" position="100,225" size="100,100">tokimeki: tokimeki + 170
--

&lt;p&gt;&lt;q&gt;…………&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;I&#39;m terribly sorry, Miss Lucia, I spoke nonsense!&lt;/q&gt; interrupts Kurt the girl&#39;s moment of hesitation.&lt;/p&gt;
&lt;p&gt;Lucia tries her best to force a smile upon her face. The eyes of the two meet, and they search for the right words, but then Kurt turns his back and runs away.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="12" name="Alone1A Let&#39;s read a book on the bench" tags="" position="225,225" size="100,100">&lt;p&gt;&lt;q&gt;I&#39;ll read a bit ahead for the afternoon lessons.&lt;/q&gt; Lucia sits down on the bench and opens a book.&lt;/p&gt;
&lt;p&gt;Not long after, Kurt happens to pass by the pond&#39;s shore. Their eyes meet for a moment, but Lucia  quickly takes her glance away, only following him from the corner of her eyes. For a while she buries herself in the book, and when she raises her face again, to the girl&#39;s surprise Kurt stands before her.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Miss Lucia likes flowers, so I made this…&lt;/q&gt; Kurt hands her a necklace made of entwined flowers. White and pink blooms follow each other in a lovely, alternating pattern.&lt;/p&gt;

&lt;p&gt;&lt;q&gt;Thank you.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Hearing her words of gratitude, Kurt gets down to one knee and deeply bows his head. Lucia gently extends her right hand, which the boy takes to give a kiss on it. This however instantly makes the girl turn all red, and she turns away covering her face.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Excuse me milady for my insolence!&lt;/q&gt;&lt;/p&gt;

&lt;p&gt;&lt;q&gt;I also got carried away…&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;No, it&#39;s only me at fault here, I&#39;m terribly sorry.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Lucia desperately tries to control her racing heart, while they both take turns apologizing to the other. Kurt is the first to start laughing, making Lucia laugh too. Their eyes meet… and an instant later separate, as both of them take it away at the same time.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="13" name="Alone1A Let&#39;s visit Eddie&#39;s cabin" tags="" position="350,225" size="100,100">&lt;p&gt;&lt;q&gt;Right, I wonder what Eddie might be up to… just kidding! It&#39;s Kurt I&#39;m interested in, actually.&lt;/q&gt; Lucia then heads towards the cabin, where she runs into Eddie.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;You took an awfully long road to get here, milady. What&#39;s more, all alone, if I see it right?&lt;/q&gt;&lt;/p&gt;

&lt;p&gt;&lt;q&gt;Yes, my sister fell ill… And you, Eddie?&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Ah, the fever again, I see… As for me, I was about to check on Kurt, sleeping inside.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;How is that Kurt still sleeping?&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;It&#39;s the boy&#39;s task to arrange the heather&#39;s clearing, and he does it at first light. He can get pretty tired by this hour.&lt;/q&gt;&lt;/p&gt;

&gt; [[Continue|Alone1A Let&#39;s visit Eddie&#39;s cabin P2]]</tw-passagedata><tw-passagedata pid="14" name="Alone1A Let&#39;s visit Eddie&#39;s cabin P2" tags="" position="475,225" size="100,100">&lt;p&gt;Lucia was just about to head back to the castle, but her steps suddenly stopped, and she turned to Eddie:&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Um, actually I&#39;d gladly join for a cup of tea…&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Eddie did raise his eyebrows, but still he invited the girl in. Inside, Kurt was sleeping on a couch. &lt;q&gt;If possible, Miss Lucia, please do not tell the milord that you&#39;re having a tea with his gardeners. Let this stay between us.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;After that, Eddie returned to his tasks, leaving the two of them behind. Lucia sit there alone, deep in thought, resting her eyes on the tip of her shoe, with which she was poking the ground.&lt;/p&gt;

&gt; [[Continue|Alone1A Let&#39;s visit Eddie&#39;s cabin P3]]</tw-passagedata><tw-passagedata pid="15" name="Alone1A Let&#39;s visit Eddie&#39;s cabin P3" tags="" position="600,225" size="100,100">&lt;p&gt;&lt;q&gt;Ah, milady… To find you here… Let me clean up a bit…&lt;/q&gt; waked up Kurt finally.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Don&#39;t worry about that, my dress will get dirty anyway after tonight&#39;s banquet. I&#39;d rather stay here too, honestly…&lt;/q&gt;&lt;/p&gt;

&lt;p&gt;&lt;q&gt;Would you mind if I make some tea?&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Lucia gave him a small nod; she felt like she is in a dream. Kurt then sit to the opposite end of the table, and an unsteady conversation began between the two.&lt;/p&gt;

&gt; [[Continue|Alone1A Let&#39;s visit Eddie&#39;s cabin P4]]</tw-passagedata><tw-passagedata pid="16" name="Alone1A Let&#39;s visit Eddie&#39;s cabin P4" tags="" position="725,225" size="100,100">&lt;p&gt;&lt;q&gt;So, what sort of things people discuss on such dinners in the castle?&lt;/q&gt;&lt;/p&gt;

&lt;p&gt;&lt;q&gt;Well I actually don&#39;t speak that much. My sister Alicia alone talks more than enough.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Is there a banquet, like, every night?&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;I&#39;d have escaped by now if that were the case. They can be entertaining, but also very tiring. Even among all that people, you can be lonely.&lt;/q&gt;&lt;/p&gt;

&lt;p&gt;&lt;q&gt;What a strange world the nobles have… Ah, sorry! I didn&#39;t mean to say such things!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Hehe, it&#39;s fine. I will quit being a noble.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Quit?! Can you even &lt;q&gt;quit&lt;/q&gt; something like that?&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Lucia didn&#39;t know what to say, and made a sulky expression. She felt a sense of frustration.&lt;/p&gt;

&gt; [[Continue|Alone1A Let&#39;s visit Eddie&#39;s cabin P5]]</tw-passagedata><tw-passagedata pid="17" name="Alone1A Let&#39;s visit Eddie&#39;s cabin P5" tags="" position="850,225" size="100,100">&lt;p&gt;She brought the cup to her lips, and raised her eyes to Kurt from behind it.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;You see, I like the smell of the ground…&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Milady, you… you have the sweet scent of flowers…&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Saying that, he raised from the chair, put his hands on the table, and leaned close to the girl&#39;s face. He couldn&#39;t say a word more, and Lucia too went silent.&lt;/p&gt;

&gt; [[Continue|Alone1A Let&#39;s visit Eddie&#39;s cabin P6]]</tw-passagedata><tw-passagedata pid="18" name="Alone1A Let&#39;s visit Eddie&#39;s cabin P6" tags="" position="975,225" size="100,100">tokimeki: tokimeki + 300
--

&lt;p&gt;But the anxiety over their future outside the castle walls eventually erased the hope for a kiss.&lt;/p&gt;
&lt;p&gt;Kurt sank back to his chair, and took hold of his teacup with both hands. A mixed feeling of love and anxiety welled up in their hearts, both of them feeling its weight on the other.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="19" name="Alone1B Yes, let&#39;s not do anything rash" tags="" position="1100,225" size="100,100">&lt;p&gt;&lt;q&gt;I almost forgot about my garden!&lt;/q&gt;&lt;/p&gt;
&lt;p class=&#39;center italic&#39;&gt;(birds chirping)&lt;/p&gt;
&lt;p&gt;Lucia heads towards the small planter box, where she planted a few flowers. Yet even from afar she notices the various blooms in red and blue hues, growing vigorously. Then, as usual, she addresses the plants:&lt;/p&gt;
&lt;p&gt;&lt;q&gt;My little flowers, you all look so lively!&lt;/q&gt;&lt;/p&gt;

&lt;p&gt;Then Eddie&#39;s voice roars from behind. &lt;q&gt;Look what you did, boy! Now explain it to the young lady! You being a seedling of a man is no excuse!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Lucia turns around, and notices Kurt, being pushed forward. Eddie then stands behind him with arms crossed.&lt;/p&gt;

&lt;p&gt;To the puzzled Lucia, Kurt answers: &lt;q&gt;Um, you see, it was I who looked after the flowers, Miss Lucia. I&#39;ve checked their ground, gave them water, I tried to take care everything…&lt;/q&gt;&lt;/p&gt;

&gt; [[I&#39;m somewhat disappointed|Alone1B I&#39;m somewhat disappointed]]
&gt; [[Kurt took care of them!|Alone1B Kurt took care of them!]]
&gt; [[It&#39;s none of your concern, Eddie!|Alone1B It&#39;s none of your concern, Eddie!]]</tw-passagedata><tw-passagedata pid="20" name="Alone1B I&#39;m somewhat disappointed" tags="" position="1225,225" size="100,100">tokimeki: tokimeki + 72
lives: lives - 1
--

&lt;p&gt;&lt;q&gt;But why would you do that? I was planning to raise them by myself, so I&#39;m somewhat disappointed…&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Terribly sorry for the inconvenience, and for troubling the young lady. The boy just went ahead with whatever weird ideas he had…&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;I beg your pardon, milady. I thought it would delight you…&lt;/q&gt;&lt;/p&gt;

&lt;p&gt;&lt;q&gt;Thank you, Kurt…&lt;/q&gt; she said in a low voice, but with mixed feelings still lingering on her mind. She felt as if her self-confidence, that she is able to do everything she wants, all that now crumbled down.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="21" name="Alone1B Kurt took care of them!" tags="" position="100,350" size="100,100">tokimeki: tokimeki + 220
--

&lt;p&gt;&lt;q&gt;Is that really true?!&lt;/q&gt; Lucia jumped up with joy. But looking at Kurt&#39;s face, she once again had trouble coming up with the right words. &lt;q&gt;Thank you, Kurt! I&#39;m so happy!&lt;/q&gt;&lt;/p&gt;

&lt;p&gt;This made Kurt too a bit flustered. Eddie grabbed his ear, pulling him to the nearby bushes, and one could hear his voice of lecturing even from afar. Lucia meanwhile felt like she was dreaming.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="22" name="Alone1B It&#39;s none of your concern, Eddie!" tags="" position="225,350" size="100,100">tokimeki: tokimeki - 130
--

&lt;p&gt;&lt;q&gt;It&#39;s none of your concern, Eddie!&lt;/q&gt; Lucia was pushing Eddie&#39;s back with both hands, keeping him away from the small garden.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Ah, milady, I didn&#39;t do anything, no, it&#39;s the boy&#39;s fault alone…&lt;/q&gt; But Lucia continued to push him, tears welling up in her eyes. Seeing that, Kurt apologized too:&lt;/p&gt;

&lt;p&gt;&lt;q&gt;I beg your forgiveness milady, it was my fault! If we have offended you, neither me nor my father has a stay in the castle any longer!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Lucia gave Eddie a last, big push. &lt;q&gt;I&#39;m not angry, but leave me be now!&lt;/q&gt; she shouted, tears starting to roll down on her face.&lt;/p&gt;

&lt;p&gt;Seeing that, Eddie and Kurt once again were about to start a quarrel, but in the end Eddie left, and Kurt stepped closer to the girl. He then gently inquired about various things, while Lucia, covering her face with both hands, answered with but nods.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="23" name="Alone2" tags="" position="350,350" size="100,100">{embed passage: &#39;AloneABC&#39;}

&lt;p&gt;Wandering around, she somehow once again returns to the herb garden.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;The young lady is from the castle, Baron, don&#39;t you go barking on her now!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;However, the one following the dog was not Kurt this time.&lt;/p&gt;

&lt;p&gt;&lt;q&gt;A pleasure to meet you, sir.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;The honor is all mine, milady. My name is Ramons, and I am tasked with keeping this corner of the estate in order. It is usually also me who takes care of Baron while Kurt has work around the castle.&lt;/q&gt;&lt;/p&gt;

&lt;p&gt;&lt;q&gt;Oh Baron, you&#39;re such a fluffy white furball as always!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Ah, milady, you will soil your dress…&lt;/q&gt;&lt;/p&gt;

&gt; [[Let&#39;s play with Baron|Alone2 Let&#39;s play with Baron]]
&gt; [[Let&#39;s take a rest|Alone2 Let&#39;s take a rest]]
&gt; [[No time for this, let&#39;s turn back|Alone2 No time for this, let&#39;s turn back]]</tw-passagedata><tw-passagedata pid="24" name="Alone2 Let&#39;s play with Baron" tags="" position="475,350" size="100,100">tokimeki: tokimeki + 19
--

&lt;p&gt;&lt;q&gt;Baron! Come!&lt;/q&gt; she calls the dog, and Baron follows her, wagging his tail. The dog runs around, rolls in the grass, and when Lucia picks him up, licks her face.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Stop, Baron! I will scold you if you get so dirty!&lt;/q&gt; But Baron doesn&#39;t particularly seem to care. &lt;q&gt;Oh Baron, you&#39;re so naughty! Could it be that your owner is so unruly as well? Oh, how I wish my Father to hold me tightly like this too, and let me leave the castle, dismiss me like any common maid!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Shouting all these loudly did made Lucia feel somewhat better.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="25" name="Alone2 Let&#39;s take a rest" tags="" position="600,350" size="100,100">tokimeki: tokimeki + 58
--

&lt;p&gt;&lt;q&gt;There we go,&lt;/q&gt; sits down Lucia just like that to the ground.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;But milady, your dress will get dirty!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;It&#39;s all right, don&#39;t worry about that, Ramons.&lt;/q&gt; Lucia then called Baron into her arms. &lt;q&gt;I love you, Baron! I love you so much! Stay by my side, will you? Don&#39;t ever leave me!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;While holding Baron tightly, a determination strengthened in her heart. She will never forget the boy, not even for a moment. And so, to forget the worries about where this love will take her, she held Baron even closer to her heart.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="26" name="Alone2 No time for this, let&#39;s turn back" tags="" position="725,350" size="100,100">tokimeki: tokimeki + 1
--

&lt;p&gt;&lt;q&gt;So Eddie and Kurt are working around the castle at the moment?&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Most likely, yes.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Well, let&#39;s pay them a visit, shall we? Come, Baron!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Lucia started running a little ahead, but Baron didn&#39;t follow her. &lt;q&gt;Ah, he knows that Alicia will mistreat him if he goes near the castle!&lt;/q&gt; she looked to Ramons, to which he replied with a forced smile. Lucia had a feeling that her sister isn&#39;t particularly well-liked around the castle, but of course Ramons wouldn&#39;t dare to say anything ill about her.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="27" name="BaronABC" tags="" position="850,350" size="100,100">[if !flag_seen_intro]
{embed passage: &#39;BaronABC Intro&#39;}
[else]
{embed passage: &#39;BaronABC Generic&#39;}</tw-passagedata><tw-passagedata pid="28" name="BaronABC Generic" tags="" position="700,725" size="100,100">{embed passage: &#39;DayStart&#39;}

&lt;p&gt;&lt;q&gt;I&#39;ve been once again asked to perform a play of harp at the ball. I can&#39;t wait!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;My, how far ahead you are, dear sister! Meanwhile I, your simple sibling, am only good at climbing trees!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;The two girls start chuckling together. Only Lucia alone raises her gaze to the clouds above.&lt;/p&gt;

&lt;p class=&#39;center italic&#39;&gt;(dog barking)&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Hey, wait! Baron! I see you&#39;ve grown quite big, ever since you&#39;re not wandering the streets!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;The dog Kurt took in now rushes onto the lawn.&lt;/p&gt;</tw-passagedata><tw-passagedata pid="29" name="BaronABC Intro" tags="" position="575,725" size="100,100">flag_seen_intro: true
--</tw-passagedata><tw-passagedata pid="30" name="BaronA" tags="" position="1225,350" size="100,100">{embed passage: &#39;BaronABC&#39;}

&lt;p&gt;&lt;q&gt;How horrible! Bringing such a filthy hound into the gardens!&lt;/q&gt; Alicia, as usual, gets irritated at everything, and it&#39;s always Maria who eventually calms her down.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Aren&#39;t you going too far, Alicia? Would you truly mind a courtyard where birds and dogs both can play around?&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Lucia truly admired her sister&#39;s gentle heart.&lt;/p&gt;


&lt;div class=&#39;monologue&#39;&gt;
&lt;p&gt;My, how can you say such unkind words, Alicia! Calling Baron a filthy hound, awful!&lt;br&gt;…&lt;br&gt;I am so fed up with this. I would rather spend the time with Kurt, raising flowers. Oh, how beautiful that would be!&lt;/p&gt;

&lt;p&gt;I can&#39;t just say something like that out loud, though… Father already chose my fiancé, what would he think of me?&lt;/p&gt;
&lt;/div&gt;

&gt; [[Scold Alicia|BaronA Scold Alicia]]
&gt; [[Let&#39;s think this through|BaronA Let&#39;s think this through]]</tw-passagedata><tw-passagedata pid="31" name="BaronA Scold Alicia" tags="" position="100,475" size="100,100">&lt;p&gt;Lucia is about to open her mouth, but Alicia cuts into her a moment before: &lt;q&gt;All you ever do is to parrot back our sister&#39;s opinion, as it is! Even looking at you gives me embarrassment!&lt;/q&gt;&lt;/p&gt;

&gt; [[Turn to Maria for help|BaronA Turn to Maria for help]]
&gt; [[Talk back|BaronA Talk back]]</tw-passagedata><tw-passagedata pid="32" name="BaronA Turn to Maria for help" tags="" position="225,475" size="100,100">&lt;p&gt;&lt;q&gt;See! You&#39;re looking at her, again! Stop seeking her aid all the time!&lt;/q&gt;&lt;/p&gt;

&gt; [[I wasn&#39;t looking!|BaronA I wasn&#39;t looking!]]
&gt; [[You are so mean!|BaronA You are so mean!]]
&gt; [[Slap her|BaronA Slap her]]</tw-passagedata><tw-passagedata pid="33" name="BaronA I wasn&#39;t looking!" tags="" position="350,475" size="100,100">&lt;p&gt;&lt;q&gt;I wasn&#39;t looking!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Liar! Liar!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;I&#39;m not lying!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;A big liar, you are!&lt;/q&gt;&lt;/p&gt;

&gt; [[I might have looked, actually|BaronA I might have looked, actually]]
&gt; [[I merely pretended to look at her|BaronA I merely pretended to look at her]]</tw-passagedata><tw-passagedata pid="34" name="BaronA I might have looked, actually" tags="" position="475,475" size="100,100">tokimeki: tokimeki - 9
--

&lt;p&gt;Lucia couldn&#39;t come up with any more retorts.&lt;/p&gt;
&lt;p&gt;The girl was unable to honestly express her own feelings, and in that regard she might have actually resembled Alicia.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="35" name="BaronA I merely pretended to look at her" tags="" position="600,475" size="100,100">tokimeki: tokimeki - 15
--

&lt;p&gt;Trying to seek her approval, Lucia raised her eyes to Maria, but alas, her gentle and loving sister returned that with a cold glance. Alicia was about to make some remark, but she too was silenced by Maria, and thus the quarrel came to an end.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="36" name="BaronA You are so mean!" tags="" position="725,475" size="100,100">tokimeki: tokimeki + 2
--

&lt;p&gt;&lt;q&gt;You are so mean!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Stop wasting time with this meaningless quarrel, you two.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Two? Well, one is certainly Alicia, but who might be the other? As I see, she is the only one quarreling here.&lt;/q&gt;&lt;/p&gt;
&lt;p class=&#39;monologue&#39;&gt;Alicia, of course, always finds some comeback!&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="37" name="BaronA Slap her" tags="" position="850,475" size="100,100">tokimeki: tokimeki + 13
--

&lt;p class=&#39;noindent&#39;&gt;&lt;q&gt;!!!!&lt;br&gt;!!!!!!!&lt;br&gt;!!!!!!!!!!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Lucia stands up, her face red, her clenched fists trembling. Yet in the end, she cannot bring herself to do to anything, and only her feeling of frustration keeps welling up.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="38" name="BaronA Talk back" tags="" position="975,475" size="100,100">tokimeki: tokimeki + 8
--

&lt;p&gt;&lt;q&gt;That&#39;s not even true! Stop with this false accusation!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;See! You&#39;re just imitating our sister, again! You always obediently do as our Father says, as our Mother says, then you copy your sister and act like you&#39;re above all!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Lucia could say nothing — she had never won against her in a clash of words.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="39" name="BaronA Let&#39;s think this through" tags="" position="1100,475" size="100,100">&lt;p class=&#39;monologue&#39;&gt;We both have born from the same parent, studied under the same tutors, yet why are we still so different…? Unless… There is a secret concealed, about one of ours birth…&lt;/p&gt;

&gt; [[Alicia is adopted…|BaronA Alicia is adopted…]]
&gt; [[I am adopted…|BaronA I am adopted…]]</tw-passagedata><tw-passagedata pid="40" name="BaronA Alicia is adopted…" tags="" position="1225,475" size="100,100">tokimeki: tokimeki + 1
--

&lt;p class=&#39;monologue&#39;&gt;…As if.&lt;br&gt;That can&#39;t be right… And yet I can&#39;t think of anything else…&lt;/p&gt;

{embed passage: &#39;DayEnd Sunshine&#39;}</tw-passagedata><tw-passagedata pid="41" name="BaronA I am adopted…" tags="" position="100,600" size="100,100">tokimeki: tokimeki + 53
--
&lt;div class=&#39;monologue&#39;&gt;

&lt;p&gt;Ah, so it turns out I&#39;m not born of nobility or anything. I am but a town girl, and my true parents will one day appear suddenly among the castle walls.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Words cannot express our gratitude for raising our daughter, milord. Lucia… no, let me still call you young lady. The wealthy life you have led so far comes to an end, and a completely different begins, a life of many hardships. Would you still want to follow such parents?&lt;/q&gt;&lt;/p&gt;

&lt;p&gt;&lt;q&gt;Oh dear mother, it is truly the guidance of our Lord above. Besides, I too was just dreaming about the simple life of a town girl as well.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;…Something like that. Hardly seems possible, right?&lt;/p&gt;
&lt;/div&gt;

{embed passage: &#39;DayEnd Sunshine&#39;}</tw-passagedata><tw-passagedata pid="42" name="BaronB" tags="" position="225,600" size="100,100">{embed passage: &#39;BaronABC&#39;}

&lt;p&gt;&lt;q&gt;What is it, Lucia?&lt;/q&gt; asks Maria, always looking our for her sisters.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Probably wants to play with the dog. Fine, I can call them here for you,&lt;/q&gt; follows Alicia with an overbearing note, as usual.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Ah, no, it&#39;s not like that!&lt;/q&gt;&lt;/p&gt;
&lt;div class=&#39;monologue&#39;&gt;

&lt;p&gt;Enough of this, Kurt is but a servant of the house. If Father hears about this, that will mean trouble for them too.&lt;/p&gt;

&lt;p&gt;If I would reveal my feeling to him though, we could leave together to a faraway village…&lt;/p&gt;
&lt;/div&gt;

&gt; [[Confess our feelings|BaronB Confess our feelings]]
&gt; [[Ask for advice|BaronB Ask for advice]]
&gt; [[Let&#39;s not be so hasty|BaronB Let&#39;s not be so hasty]]</tw-passagedata><tw-passagedata pid="43" name="BaronB Confess our feelings" tags="" position="350,600" size="100,100">tokimeki: tokimeki + 38
--

&lt;p&gt;&lt;q&gt;Say, Kurt…&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;What would it be, Miss Lucia?&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Oh, always this &lt;q&gt;miss&lt;/q&gt;…&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;If there are any issues related to our work, please do let us know.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Ah, no! It&#39;s not related to work…&lt;/q&gt;&lt;/p&gt;

{embed passage: &#39;BaronB End&#39;}</tw-passagedata><tw-passagedata pid="44" name="BaronB Ask for advice" tags="" position="475,600" size="100,100">&lt;p class=&#39;monologue&#39;&gt;It might be wise to ask my sisters for advice. They have always been there for me, after all.&lt;/p&gt;

&gt; [[Ask Maria|BaronB Ask Maria]]
&gt; [[Ask Alicia|BaronB Ask Alicia]]
&gt; [[Let&#39;s give it up|BaronB Let&#39;s give it up]]</tw-passagedata><tw-passagedata pid="45" name="BaronB Ask Maria" tags="" position="600,600" size="100,100">tokimeki: tokimeki - 20
--

&lt;p&gt;&lt;q&gt;Maria, my dear sister; you see…&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;What is it, Lucia? Is there something troubling you?&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;I… (sighs). No, never mind.&lt;/q&gt;&lt;/p&gt;

{embed passage: &#39;BaronB End&#39;}</tw-passagedata><tw-passagedata pid="46" name="BaronB Ask Alicia" tags="" position="725,600" size="100,100">tokimeki: tokimeki - 30
--

&lt;p&gt;&lt;q&gt;Alicia, my dear sister; you see…&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;You only call me &quot;dear sister&quot; when you need something. So you do want to play with the dog after all?&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;I… (sighs). No, never mind!&lt;/q&gt;&lt;/p&gt;

{embed passage: &#39;BaronB End&#39;}</tw-passagedata><tw-passagedata pid="47" name="BaronB End" tags="" position="850,600" size="100,100">&lt;p class=&#39;monologue&#39;&gt;…Haah… I feel so dumb now. But perhaps it&#39;s better to not go further. My Father already chose the fiancé for me. Just being able to see you will be enough, my dear Kurt.&lt;/p&gt;

{embed passage: &#39;DayEnd Sunshine&#39;}</tw-passagedata><tw-passagedata pid="48" name="BaronB Let&#39;s give it up" tags="" position="975,600" size="100,100">tokimeki: tokimeki - 40
lives: lives - 1
--

&lt;p class=&#39;monologue&#39;&gt;…It might be better to leave things like they are, as a one-sided dream of mine. If Father hears about this, I&#39;ll get a good scolding for sure. For now, only seeing you from afar will be enough, my dear Kurt.&lt;/p&gt;

{embed passage: &#39;DayEnd Sunshine&#39;}</tw-passagedata><tw-passagedata pid="49" name="BaronB Let&#39;s not be so hasty" tags="" position="1100,600" size="100,100">tokimeki: tokimeki - 4
lives: lives - 1
--
&lt;div class=&#39;monologue&#39;&gt;

&lt;p&gt;That&#39;s right, let&#39;s not be so hasty; I have a fiancé after all. And while Kurt did move my heart, when it comes to his own feelings… I would still need to confirm them…&lt;br&gt;……&lt;br&gt;Every time I think about Kurt, I end up downhearted… It might be indeed better to give this up, before I truly lose my mind.&lt;/p&gt;
&lt;/div&gt;

{embed passage: &#39;DayEnd Sunshine&#39;}</tw-passagedata><tw-passagedata pid="50" name="BaronC" tags="" position="1225,600" size="100,100">{embed passage: &#39;BaronABC&#39;}

&lt;p&gt;&lt;q&gt;That kid let the dog into the garden, again! This time I &lt;span class=&#39;italic&#39;&gt;will&lt;/span&gt; report this matter to Father!&lt;/q&gt; Alicia is irritable today as well.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;My dear sister, why are you so certain? It could have slipped in on its own as well, wouldn&#39;t it?&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;That&#39;s right! You always go overboard, Alicia!&lt;/q&gt;&lt;/p&gt;

&lt;p class=&#39;monologue&#39;&gt;This must be the part of the courtyard where Kurt works! If only Alicia would leave us alone… But will he even understand me? Or will he believe I&#39;m just like Alicia…? What will I do then…&lt;/p&gt;

&gt; [[Let&#39;s stand for up Kurt|BaronC Let&#39;s stand for up Kurt]]
&gt; [[Tell our feelings to Maria|BaronC Tell our feelings to Maria]]
&gt; [[I&#39;m only longing for his warm embrace…|BaronC I&#39;m only longing for his warm embrace…]]</tw-passagedata><tw-passagedata pid="51" name="BaronC Let&#39;s stand for up Kurt" tags="" position="100,725" size="100,100">&lt;p class=&#39;monologue&#39;&gt;Ah, I want to stand up for him, but what should I say in his defense?&lt;/p&gt;

&gt; [[Kurt did nothing wrong!|BaronC Kurt did nothing wrong!]]
&gt; [[I am thankful for Kurt|BaronC I am thankful for Kurt]]
&gt; [[Don&#39;t you dare to mock my Kurt!|BaronC Don&#39;t you dare to mock my Kurt!]]</tw-passagedata><tw-passagedata pid="52" name="BaronC Kurt did nothing wrong!" tags="" position="225,725" size="100,100">tokimeki: tokimeki + 40
--
{embed passage: &#39;BaronC End A&#39;}</tw-passagedata><tw-passagedata pid="53" name="BaronC I am thankful for Kurt" tags="" position="350,725" size="100,100">tokimeki: tokimeki + 46
--
{embed passage: &#39;BaronC End A&#39;}</tw-passagedata><tw-passagedata pid="54" name="BaronC Don&#39;t you dare to mock my Kurt!" tags="" position="475,725" size="100,100">tokimeki: tokimeki + 53
--
{embed passage: &#39;BaronC End A&#39;}</tw-passagedata><tw-passagedata pid="55" name="BaronC Tell our feelings to Maria" tags="" position="600,725" size="100,100">&lt;p&gt;&lt;q&gt;Maria, my dear…&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;My, what could this mysterious expression mean?&lt;/q&gt;&lt;/p&gt;

&gt; [[I might have fallen in love|BaronC I might have fallen in love]]
&gt; [[There&#39;s someone I can&#39;t help thinking about|BaronC There&#39;s someone I can&#39;t help thinking about]]</tw-passagedata><tw-passagedata pid="56" name="BaronC I might have fallen in love" tags="" position="725,725" size="100,100">tokimeki: tokimeki + 34
--
{embed passage: &#39;BaronC End B&#39;}</tw-passagedata><tw-passagedata pid="57" name="BaronC There&#39;s someone I can&#39;t help thinking about" tags="" position="850,725" size="100,100">tokimeki: tokimeki + 34
--
{embed passage: &#39;BaronC End B&#39;}</tw-passagedata><tw-passagedata pid="58" name="BaronC I&#39;m only longing for his warm embrace…" tags="" position="975,725" size="100,100">tokimeki: tokimeki + 63
--
{embed passage: &#39;BaronC End A&#39;}</tw-passagedata><tw-passagedata pid="59" name="BaronC End A" tags="" position="1100,725" size="100,100">&lt;p class=&#39;monologue&#39;&gt;Oh dear, how could I even say something like that out loud! There&#39;s just no way!&lt;/p&gt;

{embed passage: &#39;DayEnd Sunshine&#39;}</tw-passagedata><tw-passagedata pid="60" name="BaronC End B" tags="" position="1225,725" size="100,100">&lt;p&gt;&lt;q&gt;Um… I was wondering if you could show me later how to play the harp…&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Oh my! So you&#39;ve finally decided to overcome the hurdles standing before you! I would be delighted to see you in my room after todays&#39;s lessons!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Lucia then keeps evading the topic, until eventually she loses sight of her original intention.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="61" name="EndA" tags="" position="100,850" size="100,100">[JavaScript]
update_tokimeki();
[continue]

&lt;p class=&#39;monologue center&#39;&gt;But let&#39;s end it all with this day. I don&#39;t want to get you into trouble, nor can I betray my sisters, my Father, my Mother, the precious family I have.&lt;/p&gt;

&lt;p class=&#39;monologue center&#39;&gt;So I will stop here.&lt;br&gt;Goodbye, my dear Kurt.&lt;br&gt;Goodbye…&lt;/p&gt;
{embed passage: &#39;EndFin&#39;}</tw-passagedata><tw-passagedata pid="62" name="EndB" tags="" position="225,850" size="100,100">{no ambient sound}

&lt;p&gt;&lt;q&gt;Good morning, Lucia. Did you sleep well?&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Usually it was the duty of Hanna the maid to wake up Lucia and Alicia. On this morning however, Lord Alberto in person stood next to her bed. Lucia loved her father, yet somehow had an uneasy feeling about this visit.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Good morning, Father. Did something happen, perhaps…?&lt;/q&gt;&lt;/p&gt;

&lt;p&gt;&lt;q&gt;Lucia, I&#39;ve told Alicia already, but both of you continue your studies at the Academy of Lhasa.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Lhasa…? You don&#39;t mean…&lt;/q&gt;&lt;/p&gt;
&lt;p class=&#39;monologue&#39;&gt;Lhasa is a town that&#39;s several days away, even with carriage. If I go there, I may never see Kurt again, ever…&lt;/p&gt;

&lt;p&gt;&lt;q&gt;No! I don&#39;t want to! This came so suddenly!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Certainly, whether you wish to go, or to stay, you alone will decide that. However, it is my duty to lead both of you into the society, on a way that is worthy to the daughters of a noble lord. I&#39;ve already discussed this matter with your mother, as well as with Sebastian. Be it the maids Leilah and Eva, or among the servants, Kurt… I have to look after their fate as well. You understand, I hope?&lt;/q&gt;&lt;/p&gt;

&lt;p class=&#39;monologue&#39;&gt;Could it be that Father found me out? That he knows the one who captured my heart is Kurt?&lt;/p&gt;
&lt;p&gt;Lucia buried her face in her hands without thinking.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;I will hear of your choice at the dinner the day after tomorrow. Make sure you think it through.&lt;/q&gt; With that, he left the room, closing the door behind.&lt;/p&gt;
&lt;br&gt;

&lt;p class=&#39;center&#39;&gt;The thirteen years old Lucia&lt;br&gt;holding tight the feelings of a tender love&lt;br&gt;sit in her bed, with tears unending.&lt;/p&gt;
{embed passage: &#39;EndFin&#39;}</tw-passagedata><tw-passagedata pid="63" name="EndC" tags="" position="350,850" size="100,100">{no ambient sound}

&lt;p&gt;On that day I woke up to the sound of rain tapping on my windows. It was still dark outside, only but a few birds could be heard at such hour. The feelings I was holding when I woke up, how should I even describe them? For a while I gazed at the drizzle beyond the glass, then stepped to my closet.&lt;/p&gt;

&lt;p&gt;I will grab my belongings, and go with Kurt, away somewhere far, anywhere… To the countryside, helping out on a farm, perhaps… If we enter their service, with a roof over our head, at least starvation won&#39;t be the end of us.&lt;/p&gt;

&gt; [[I can&#39;t do this, after all|EndC I can&#39;t do this, after all]]
&gt; [[I go, even if it costs me my life|EndC I go, even if it costs me my life]]</tw-passagedata><tw-passagedata pid="64" name="EndC I can&#39;t do this, after all" tags="" position="475,850" size="100,100">tokimeki: tokimeki - 30
--

&lt;p&gt;No, I can&#39;t do this, after all. If something does go wrong, they will surely hold Kurt responsible…&lt;/p&gt;
&lt;p&gt;I thought long and hard last night to come to this point, yet in the end, with closing the closet&#39;s doors, I locked the resolve inside there as well.&lt;/p&gt;
&lt;p&gt;I returned to the bed once more, and fell into a deep slumber.&lt;/p&gt;

&gt; [[Continue|EndC I can&#39;t do this, after all 2]]</tw-passagedata><tw-passagedata pid="65" name="EndC I can&#39;t do this, after all 2" tags="" position="600,850" size="100,100">{embed passage: &#39;DayStart&#39;}

&lt;p&gt;&lt;q&gt;Alicia, you too know well that you have a frail constitution. Please refrain from dangerous activities.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;But Alicia was a 16 years old girl, who just loved climbing trees. &lt;q&gt;You&#39;re worrying too much, my dear sister. Look, I can pull myself up on that branch to get even higher.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;My, oh dear, you&#39;re going to fall off, Alicia! I can&#39;t even look!&lt;/q&gt;&lt;/p&gt;
&lt;br&gt;

&lt;p class=&#39;center&#39;&gt;The days continue their endless cycle,&lt;br&gt;but in the peaceful castle of Cusue&lt;br&gt;a summer affair reaches its end.&lt;/p&gt;
{embed passage: &#39;EndFin&#39;}</tw-passagedata><tw-passagedata pid="66" name="EndC I go, even if it costs me my life" tags="" position="725,850" size="100,100">{ambient sound: &#39;trueend&#39;}

&lt;p&gt;Lucia holds a small bag to her chest with both hands, as if trying to calm down her racing heart. Closing the door behind her, she trots the lone corridors, heading towards the entry hall. As its heavy doors open, the cold air fills the girl&#39;s throat, and her figure slips into the mist of the morning breeze.&lt;/p&gt;

&lt;p&gt;She runs forward, holding the bag above her head. Kurt is the one waking up the earliest, and he should be arranging the heather&#39;s clearing at this hour. Lucia had no idea yet about what will she say to Kurt, but her heart was already full of the genuine love she felt.&lt;/p&gt;
&lt;p&gt;Soon the clearing comes to her view. As expected, Kurt is there already. Lucia, already breathing hard, runs to the boy.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Milady, what happened?!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;With the momentum of running, Lucia jumps straight into Kurt&#39;s arms. &lt;q&gt;I don&#39;t want to marry the man Father chose!&lt;/q&gt;&lt;/p&gt;

&lt;p&gt;Before they know it, the gently falling rain embraces the two in a cloak of snow-white fog. Inside of that, Kurt stands bewildered by the sobbing Lucia in his arms, and the girl is unable to form the words of her feelings under the endless tears.&lt;/p&gt;

&lt;p&gt;The white fog conceals two figures, and there&#39;s only but a short time until the maids start looking for Lucia.&lt;/p&gt;

&lt;p&gt;Finally the thirteen years old Lucia recollects herself just a little bit, and puts her feelings into words…&lt;/p&gt;

&gt; [[Continue|EndC I go, even if it costs me my life 2]]</tw-passagedata><tw-passagedata pid="67" name="EndC I go, even if it costs me my life 2" tags="" position="850,850" size="100,100">&lt;p&gt;With that, I close this story. What was Kurt&#39;s answer, or what happened to the two right after, no records preserved that.&lt;/p&gt;

&lt;p&gt;On these last pages I wanted to close their tale not with dramatic images, but with this, the most beautiful scene.&lt;/p&gt;

&lt;p&gt;The numerous hardships that lie ahead of them, a country leaning towards revolution, the illness of Alicia… let them all stay away from these pages.&lt;/p&gt;
{embed passage: &#39;EndFin&#39;}

&gt; [[Continue|EndC I go, even if it costs me my life 3]]</tw-passagedata><tw-passagedata pid="68" name="EndC I go, even if it costs me my life 3" tags="" position="975,850" size="100,100">{ambient sound: &#39;night&#39;}

&lt;p class=&#39;noindent&#39;&gt;Finally, let a list of our characters stand here:
&lt;br&gt;Lucia Seanne, the main character, and yours truly
&lt;br&gt;Kurt Grohl, her interest of love
&lt;br&gt;Maria Seanne, the kind older sister
&lt;br&gt;Alicia Seanne, the mean older sister
&lt;br&gt;Alberto Seanne, the strict father
&lt;br&gt;Eddie Grohl, gardener and father to Kurt
&lt;br&gt;Ramons Martin, who only played a small part
&lt;br&gt;And finally…
&lt;br&gt;Baron, the ever fluffy white furball&lt;/p&gt;

&lt;p&gt;But this is only the beginning… Now I will have to stop being a crybaby, I don&#39;t want to be a bother to Kurt.&lt;/p&gt;

&gt; [[Don&#39;t worry, everything will be fine|EndC Don&#39;t worry, everything will be fine]]
&gt; [[I feel uncertain about the future of you two|EndC I feel uncertain about the future of you two]]</tw-passagedata><tw-passagedata pid="69" name="EndC Don&#39;t worry, everything will be fine" tags="" position="1100,850" size="100,100">tokimeki: tokimeki + 100
--
{embed passage: &#39;EndD&#39;}</tw-passagedata><tw-passagedata pid="70" name="EndC I feel uncertain about the future of you two" tags="" position="1225,850" size="100,100">tokimeki: tokimeki - 100
--
{embed passage: &#39;EndD&#39;}</tw-passagedata><tw-passagedata pid="71" name="EndD" tags="" position="100,975" size="100,100">[JavaScript]
update_tokimeki();
[continue]
&lt;p class=&#39;center italic&#39;&gt;FIN&lt;/p&gt;</tw-passagedata><tw-passagedata pid="72" name="EndFin" tags="" position="225,975" size="100,100">[JavaScript]
update_tokimeki()
[continue]

&lt;br&gt;
&lt;p class=&#39;center italic&#39;&gt;And so their story ends here.&lt;/p&gt;
&lt;br&gt;</tw-passagedata><tw-passagedata pid="73" name="FlowersABC" tags="" position="350,975" size="100,100">{embed passage: &#39;DayStart&#39;}

&lt;p&gt;&lt;q&gt;Where could have Lucia gone, all alone? Don&#39;t you think that girl acts strange lately?&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;She says she started raising flowers recently. An unusual occupation, certainly.&lt;/q&gt;&lt;/p&gt;

***

&lt;p class=&#39;center italic&#39;&gt;(birds chirping)&lt;/p&gt;
&lt;p&gt;At that time, Lucia was just in a remote corner of the garden, looking after a small planter box. &lt;q&gt;It starts to look like an actual flower bed, at last. Phew! What will Kurt say when he sees it, I wonder?&lt;/q&gt;&lt;/p&gt;</tw-passagedata><tw-passagedata pid="74" name="FlowersA" tags="" position="475,975" size="100,100">{embed passage: &#39;FlowersABC&#39;}

&lt;p&gt;Lucia continues tending the flowers, without any care of the world, when she hears Alicia&#39;s voice from afar:&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Lucia! What in the world are you doing?! You will be late for the afternoon lessons!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Alri—ght! I&#39;ll be right the—re!&lt;br&gt;Well, my dear flowers, let&#39;s meet again.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;She stands up and turns around, but then, a little farther away, notices Kurt. Her heartbeat rises in an instant, and she can no longer take even a step forward. Kurt isn&#39;t really paying attention to her direction though, he continues heading for their small cabin nearby.&lt;/p&gt;
&lt;p&gt;Eventually he disappears from the eyes of the girl.&lt;/p&gt;

&lt;p class=&#39;monologue&#39;&gt;Aaah, what should I do?! My little flowers, you&#39;ve grown to the point where I can show you to Kurt without embarrassment, right? Oh, but wouldn&#39;t it be strange to just ask him to take a look? My, but that&#39;s exactly why I&#39;ve raised you all!&lt;/p&gt;

&gt; [[Call after him|FlowersA Call after him]]
&gt; [[Keep it to ourselves|FlowersA Keep it to ourselves]]
&gt; [[Let&#39;s check the flowers one more time|FlowersA Let&#39;s check the flowers one more time]]</tw-passagedata><tw-passagedata pid="75" name="FlowersA Call after him" tags="" position="600,975" size="100,100">tokimeki: tokimeki + 130
--

&lt;p&gt;&lt;q&gt;…………………………&lt;br&gt;…hah, hah, hah…&lt;br&gt;I can&#39;t even start talking to him!&lt;/q&gt;&lt;/p&gt;

&lt;p class=&#39;monologue&#39;&gt;Deep breath, Lucia! Calm down a bit, and let&#39;s try again. So don&#39;t go anywhere, Kurt. Until I open my eyes again, stay where you are… my dear Kurt.&lt;/p&gt;

{embed passage: &#39;DayEnd Sunshine&#39;}</tw-passagedata><tw-passagedata pid="76" name="FlowersA Keep it to ourselves" tags="" position="725,975" size="100,100">tokimeki: tokimeki + 22
--

&lt;div class=&#39;monologue&#39;&gt;
&lt;p&gt;…Right, let&#39;s forget about this. After all, my little flowers are still far from the beautiful blossom I&#39;d want to show anyone.&lt;/p&gt;
&lt;p&gt;…But one day, when they reach their full bloom, and I would once again desire to show them… will I be able to call after him…?&lt;/p&gt;
&lt;/div&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="77" name="FlowersA Let&#39;s check the flowers one more time" tags="" position="850,975" size="100,100">tokimeki: tokimeki + 42
--

&lt;p class=&#39;monologue&#39;&gt;Oh, little flowers, give me strength! If I show you all to Kurt, what will come to his mind? Will he praise your beauty? Or will he glance at you with discontent? Oh, my little flowers, tell me please!&lt;/p&gt;

{embed passage: &#39;DayEnd Sunshine&#39;}</tw-passagedata><tw-passagedata pid="78" name="FlowersB" tags="" position="975,975" size="100,100">{embed passage: &#39;FlowersABC&#39;}

&lt;p&gt;&lt;q&gt;Oh? Would that be you, Miss Lucia?&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Ah, Eddie, good day to you.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;I&#39;m sorry, I didn&#39;t mean to startle you, milady. …oh? And what might we have here?&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;These are, ahem, my personally raised flowers, ehehe…&lt;/q&gt;&lt;/p&gt;

&lt;p&gt;Eddie was at loss of words for a moment, with a perplexed expression on his face. &lt;q&gt;&lt;span class=&#39;italic&#39;&gt;You&lt;/span&gt; planted these, Miss Lucia?&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Yes, that&#39;s right. What do you think? About my flowers…&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Eddie stood in silence once again, as if he was pondering on the words, then carefully inspected the flowers and the soil. &lt;q&gt;These are charming little flowers, milady, but there&#39;s no need to dirty your hands with such work. Please leave the gardening to me and my son.&lt;/q&gt;&lt;/p&gt;

&gt; [[I wanted to try raising flowers|FlowersB I wanted to try raising flowers]]
&gt; [[For Kurt, I&#39;m ready for this|FlowersB For Kurt, I&#39;m ready for this]]
&gt; [[Did I do such a poor work, after all?|FlowersB Did I do such a poor work, after all?]]</tw-passagedata><tw-passagedata pid="79" name="FlowersB I wanted to try raising flowers" tags="" position="1100,975" size="100,100">&lt;p&gt;&lt;q&gt;No, no, it was me who wanted to try raising flowers, you see.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Eddie fixed his gaze on the handful of soil in his palm. &lt;q&gt;If it is by your own will, I have no word in the matter, milady. Apologies for the ill-mannered question, but may I ask it once again? Did you really raise these flowers all by yourself, Miss Lucia?&lt;/q&gt;&lt;/p&gt;

&gt; [[Is there some problem with them?|FlowersB Is there some problem with them?]]
&gt; [[Should I have not done it?|FlowersB Should I have not done it?]]</tw-passagedata><tw-passagedata pid="80" name="FlowersB Is there some problem with them?" tags="" position="1225,975" size="100,100">tokimeki: tokimeki + 23
--

&lt;p&gt;&lt;q&gt;Is there some problem with them, after all…?&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;I&#39;m merely surprised how skillful you are with your hands, milady.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Hearing this greatly pleased Lucia, and she spent the time until the afternoon lessons asking various questions regarding flowers and planting.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="81" name="FlowersB Should I have not done it?" tags="" position="100,1100" size="100,100">tokimeki: tokimeki - 9
--

&lt;p&gt;&lt;q&gt;Should I have not grown them here?&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Eddie shook his head in a hurry: &lt;q&gt;No, no, it&#39;s not like that. I chose my words poorly, excuse me. I was merely surprised by how skillful you are, Miss Lucia.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Hearing this made Lucia somewhat delighted, and she spent the time until the afternoon lessons with working around the planter box.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="82" name="FlowersB For Kurt, I&#39;m ready for this" tags="" position="225,1100" size="100,100">tokimeki: tokimeki + 45
--

&lt;p&gt;&lt;q&gt;You see, when it comes to that, I…&lt;/q&gt; But when she was to say Kurt&#39;s name, the girl choked on the words.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;No, no, it&#39;s alright. Even seeing that Miss Lucia plants flowers, that alone makes me feel really proud as a gardener.&lt;/q&gt; Noticing the pained expression on the girl&#39;s face however, Eddie quickly retracted his words. Out of consideration, he shifted the topic instead to planting and raising flowers.&lt;/p&gt;
&lt;p&gt;Eddie was reprimanded later for leaving the gardening tools in the middle of the courtyard. Of course, he didn&#39;t know that at the time, and Lucia spent a pleasant afternoon in his company.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="83" name="FlowersB Did I do such a poor work, after all?" tags="" position="350,1100" size="100,100">tokimeki: tokimeki - 40
--

&lt;p&gt;&lt;q&gt;Did I do such a poor work, after all?&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;After hearing such words, even the usually stubborn Eddie was flustered. &lt;q&gt;What are you saying, milady?! These flowers are wonderful! Beautiful blooms raised by someone who put her whole heart into them, such flowers have no equal around the world!&lt;/q&gt;&lt;/p&gt;

&lt;p&gt;Eddie then dutifully talked about various topics regarding planting and raising flowers. Yet in the end, Lucia couldn&#39;t help but feel a little lonely.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="84" name="FlowersC" tags="" position="475,1100" size="100,100">{embed passage: &#39;FlowersABC&#39;}

***

&lt;p&gt;&lt;q&gt;It&#39;s as if she is deliberately avoiding us. I wonder if something happened.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Oh, that girl was like so even when she was little.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Alicia doesn&#39;t particularly seem to care, but Maria still feels anxious about Lucia. &lt;q&gt;No, it&#39;s different. Perhaps I&#39;m just thinking too much into it, but she…&lt;/q&gt;&lt;/p&gt;

***

&lt;p&gt;&lt;q&gt;Oh, how happy I would be too, had I&#39;ve been born as a gardener&#39;s daughter, instead of to nobility…!&lt;br&gt;…………&lt;br&gt;Of course! I have a great idea!&lt;/q&gt;&lt;/p&gt;

&lt;p class=&#39;monologue&#39;&gt;I&#39;m running away! Then, pretending to be a girl from the village I return, looking for employment as a gardener&#39;s assistant!&lt;/p&gt;

&gt; [[I can surely do it!|FlowersC I can surely do it!]]
&gt; [[Sounds like a fairy tale…|FlowersC Sounds like a fairy tale…]]
&gt; [[Let&#39;s get to it right away!|FlowersC Let&#39;s get to it right away!]]</tw-passagedata><tw-passagedata pid="85" name="FlowersC I can surely do it!" tags="" position="600,1100" size="100,100">tokimeki: tokimeki + 71
--

&lt;p class=&#39;monologue&#39;&gt;There&#39;s always some freshly baked bread in the castle&#39;s kitchen; that should be enough for a while. Naturally, I cannot ask Hanna to prepare a change of clothes… I&#39;ll stuff some of them myself into a suitcase during the night…&lt;br&gt;……Hm?&lt;br&gt;Ah, where will I get a suitcase…?&lt;br&gt;……&lt;br&gt;Doesn&#39;t matter! I can still carry about four dresses in my arms! But first, let&#39;s start with taking some bread. This way!&lt;/p&gt;

{embed passage: &#39;DayEnd Sunshine&#39;}</tw-passagedata><tw-passagedata pid="86" name="FlowersC Sounds like a fairy tale…" tags="" position="725,1100" size="100,100">tokimeki: tokimeki + 66
--

&lt;p class=&#39;monologue&#39;&gt;Yes, that&#39;s right. I&#39;ve never been actually able to follow through something like this… It&#39;s so cruel, that we are being torn apart just because of out different social standing…&lt;br&gt;But, in two years, Alicia too will leave the castle, after that we could talk a little bit more. I know I won&#39;t stay here forever either… even though I like this place… And you, Kurt…&lt;/p&gt;

{embed passage: &#39;DayEnd Sunshine&#39;}</tw-passagedata><tw-passagedata pid="87" name="FlowersC Let&#39;s get to it right away!" tags="" position="850,1100" size="100,100">&lt;p&gt;Lucia quickly jumped to her feet, but then from the corner of her eyes she catches sight of a small human silhouette.&lt;/p&gt;

&gt; [[Is someone there?|FlowersC Is someone there?]]
&gt; [[Slowly turn that way|FlowersC Slowly turn that way]]
&gt; [[Don&#39;t care about it|FlowersC Don&#39;t care about it]]</tw-passagedata><tw-passagedata pid="88" name="FlowersC Is someone there?" tags="" position="975,1100" size="100,100">tokimeki: tokimeki + 147
--

&lt;p&gt;&lt;q&gt;Is someone there?&lt;/q&gt; she asks with a small, barely audible voice.&lt;/p&gt;
&lt;p&gt;Not long after, from the farther thickets Kurt&#39;s face peeks out. &lt;q&gt;I&#39;m terribly sorry, Miss Lucia, I just happened pass by around here, you see…&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;In the girl&#39;s heart, angels start ringing their bells.&lt;/p&gt;

&lt;p&gt;&lt;q&gt;Wait…&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;The word came to her lips unconsciously, and Kurt, who was about to clear off as soon as he can, turned back once again hearing that. With her timid nature taking hold of her once again, the girl cast her eyes to the ground, but then built up the courage to ask:&lt;/p&gt;
&lt;p&gt;&lt;q&gt;For the flowers… how much water should I give them a day?&lt;/q&gt;&lt;/p&gt;

&lt;p&gt;&lt;q&gt;The same as until now… The amount you gave them so far, Miss Lucia, is perfectly fine. There&#39;s no need to worry.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;With that, Kurt made a small bow towards her, then took his leave. Lucia just stood there in a daze, unable to even follow the boy with her eyes.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="89" name="FlowersC Slowly turn that way" tags="" position="1100,1100" size="100,100">tokimeki: tokimeki + 85
--

&lt;p&gt;Turning that way, Lucia noticed Kurt, shovel in hand, heading for the opposite direction. In but a moment, all the plans Lucia previously had in her mind got completely blanked. The girl felt as if she was above the clouds.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="90" name="FlowersC Don&#39;t care about it" tags="" position="1225,1100" size="100,100">tokimeki: tokimeki - 20
--

&lt;p&gt;Lucia made up her mind, and just like that, headed towards the rear gate of the castle.&lt;/p&gt;
&lt;p&gt;Perhaps it was the moment when her eyes met with the guard&#39;s, but it didn&#39;t take long to persuade herself with the numerous excuses she came up with. And so, she concluded the journey by just turning back.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="91" name="Intro" tags="" position="100,1225" size="100,100">[JavaScript]
pick_next_day();
[continue]
{ambient sound: &#39;walking&#39;}

&lt;p class=&#39;noindent&#39;&gt;After their private tutor ends the morning lessons, Lord Alberto&#39;s three daughters take a walk in the courtyards, at the estate of Castle Cusue.&lt;/p&gt;

&lt;p&gt;The eldest of them is the 17 years old Maria. &lt;q&gt;I have been asked to perform a play of harp at the ball. This will be my first time on stage, so I&#39;m somewhat nervous.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;The second daughter is Alicia, 16 years old, yet her manner of speech is still somewhat rough. &lt;q&gt;Surely it will be fine, my dear sister; you&#39;re quite diligent when it comes to teaching it, after all.&lt;/q&gt;&lt;/p&gt;

&lt;p&gt;Finally, the youngest of the three, Lucia, who is but 13 years old. &lt;q&gt;Yet when I think the number of people in the audience, my, that alone makes me nervous!&lt;/q&gt;&lt;/p&gt;

&gt; [[Continue|Intro Kurt]]</tw-passagedata><tw-passagedata pid="92" name="Intro Kurt" tags="" position="225,1225" size="100,100">&lt;p&gt;Then appears the person around whom her thoughts revolve the most:&lt;/p&gt;
&lt;p class=&#39;center italic&#39;&gt;(dog barking)&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Wait, Baron! You can&#39;t play on the lawn! It will be me who gets a scolding for it from the milord!&lt;/q&gt;&lt;/p&gt;

&lt;p&gt;&lt;q&gt;If we get expelled, you&#39;re gonna end up on the roadside, boy!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;The gardener Eddie, and his son and assistant, the 14 years old Kurt Grohl. A vast gap lies between them and the social standing of Lucia… and yet, when the boy comes to her mind, the girl&#39;s heart keeps beating faster.&lt;/p&gt;

&gt; [[Continue|Intro Tokimeki 1]]

[note]
Kurt&#39;s name comes from the members of the rock band &lt;span class=&#39;italic&#39;&gt;Nirvana&lt;/span&gt; (source: Japanese Wiki).</tw-passagedata><tw-passagedata pid="93" name="Intro Tokimeki 1" tags="" position="350,1225" size="100,100">&lt;p class=&#39;monologue&#39;&gt;Oh, this sensation, this feeling in my chest I can&#39;t tell anyone about! How shall I even describe it? Right, if I compare it to the first time I danced with Riph at the ball, when Father introduced him… If I&#39;d say my heartbeat was 100 at that night, yes, then what I feel now…&lt;/p&gt;

&gt; [[Continue|Intro Tokimeki 2]]</tw-passagedata><tw-passagedata pid="94" name="Intro Tokimeki 2" tags="" position="475,1225" size="100,100">[JavaScript]
update_tokimeki();
[continue]

&lt;p class=&#39;monologue&#39;&gt;That would be around 200, I think? Ah, my Kurt, why do you pain my heart so much? If my feelings ever reach 500, or even 1000, tell me, what shall I do then? Oh Kurt, why were you born as a gardener&#39;s son? Why was I born to nobility?&lt;/p&gt;

[if route === &#39;BaronA&#39;]
&gt; [[Continue|BaronA]]
[if route === &#39;BaronB&#39;]
&gt; [[Continue|BaronB]]
[if route === &#39;BaronC&#39;]
&gt; [[Continue|BaronC]]</tw-passagedata><tw-passagedata pid="95" name="Start" tags="" position="500,100" size="100,100">config.footer.right: &#39;{restart link}&#39;
config.footer.left: &#39;{tokimeki_display}&#39;
config.style.page.style: &#39;none&#39;
config.body.transition.name: &#39;fadeInOut&#39;

config.style.backdrop: &#39;gray-8&#39;
config.style.page.font: &#39;FtMain/serif 20&#39;
config.style.page.color: &#39;white on gray-9&#39;
config.style.page.link.font: &#39;&#39;
config.style.page.link.color: &#39;red-8&#39;
config.style.page.link.lineColor: &#39;red-8&#39;
config.style.page.link.active.color: &#39;red-8 on gray-7&#39;
config.style.page.header.font: &#39;18&#39;
config.style.page.header.link.font: &#39;small caps&#39;
config.style.page.footer.font: &#39;18&#39;
config.style.page.footer.link.font: &#39;small caps&#39;

sound.ambient.walking.url: &#39;data/mus_walk.mp3&#39;
sound.ambient.walking.description: &#39;Walk in the courtyard&#39;

sound.ambient.night.url: &#39;data/mus_night.mp3&#39;
sound.ambient.night.description: &#39;Thinking at night&#39;

sound.ambient.trueend.url: &#39;data/mus_endd.mp3&#39;
sound.ambient.trueend.description: &#39;A new dawn rises&#39;

sound.effect.tokimeki.url: &#39;data/sfx_roll.mp3&#39;
sound.effect.tokimeki.description: &#39;Numbers roll&#39;

tokimeki: 200
tokimeki_display: &#39;&#39;
lives: 2
lives_prev: lives
route: &#39;&#39;
curr_cycle: structuredClone(window.ALL_DAYS)
next_cycle: []
flag_seen_intro: false
flag_seen_night350: false
flag_seen_alberto: false
flag_seen_alone1: false
--

&lt;p class=&#39;center nobreak italic&#39;&gt;From the records of Castle Cusue, in the land of Enavia&lt;/p&gt;

&lt;p class=&#39;center nobreak smallcaps bold intro-book&#39;&gt;Book VIII&lt;/p&gt;
&lt;p class=&#39;center nobreak&#39;&gt;&lt;span class=&#39;smallcaps&#39;&gt;Portrait.&lt;/span&gt; Alberto Seanne, the seventh Lord of Cusue,&lt;br&gt;among his family.&lt;/p&gt;

&lt;p class=&#39;center nobreak smallcaps intro-chapter-num&#39;&gt;Chapter 7&lt;/p&gt;
&lt;p class=&#39;center nobreak bold intro-chapter-title&#39;&gt;Lucia, the youngest daughter&lt;/p&gt;

&gt; [[Continue|Intro]]

&lt;p class=&#39;center nobreak intro-tl&#39;&gt;English translation by &lt;span lang=&#39;hu&#39;&gt;Mátyás Mustoha&lt;/span&gt;&lt;/p&gt;

[note]
The name of the castle is written phonetically, as /kɯsɨ/, ie. &quot;küs&quot; or &quot;küsü&quot;. Different games used different spelling, like Khus or Kuth, but considering the game&#39;s world, and that in English the leading hard &#39;K&#39; is far less common than &#39;C&#39;, I&#39;ve opted for the softer spelling of &#39;Cusue&#39;.
Western tradition for collection works, like annals, tends to use &#39;book&#39; and &#39;chapter&#39; for heading, even when this doesn&#39;t really match the work&#39;s physical form. The original text uses &lt;span lang=&#39;ja&#39;&gt;章&lt;/span&gt; and &lt;span lang=&#39;ja&#39;&gt;節&lt;/span&gt;, respectively.</tw-passagedata><tw-passagedata pid="96" name="Debug Menu" tags="" position="500,225" size="100,100">&gt; [[Jump to Baron A|BaronA]]
&gt; [[Jump to Baron B|BaronB]]
&gt; [[Jump to Baron C|BaronC]]
&gt; [[Jump to Flowers A|FlowersA]]
&gt; [[Jump to Flowers B|FlowersB]]
&gt; [[Jump to Flowers C|FlowersC]]
&gt; [[Jump to Tree climbing A|TreeA]]
&gt; [[Jump to Tree climbing B|TreeB]]
&gt; [[Jump to Tree climbing C|TreeC]]
&gt; [[Jump to Opera A|OperaA]]
&gt; [[Jump to Opera B|OperaB]]
&gt; [[Jump to Opera C|OperaC]]
&gt; [[Jump to Wind A|WindA]]
&gt; [[Jump to Wind B|WindB]]
&gt; [[Jump to Wind C|WindC]]
&gt; [[Jump to Alone 1|Alone1]]
&gt; [[Jump to Alone 2|Alone2]]
&gt; [[Jump to End A|EndA]]
&gt; [[Jump to End B|EndB]]
&gt; [[Jump to End C|EndC]]
&gt; [[Back|Start]]</tw-passagedata><tw-passagedata pid="97" name="DayStart" tags="" position="300,600" size="100,100">{ambient sound: &#39;walking&#39;}

&lt;p class=&#39;noindent&#39;&gt;The usual courtyard — and like every day, the three sisters Maria, Alicia, and Lucia take a walk in its gardens.&lt;/p&gt;</tw-passagedata><tw-passagedata pid="98" name="Unused" tags="" position="375,225" size="100,100">&lt;p&gt;[Note: This text doesn&#39;t seem to be used anywhere]&lt;/p&gt;
&lt;p class=&#39;noindent&#39;&gt;5th Pisces&lt;br&gt;The hour when the bell strikes 15 times&lt;/p&gt;
&lt;p&gt;After their private tutor ends the morning lessons, Lord Alberto&#39;s three daughters take a walk in the courtyards, at the estate of Castle Cusue.&lt;/p&gt;</tw-passagedata><tw-passagedata pid="99" name="DayEnd Sunshine" tags="" position="1100,1225" size="100,100">&lt;br&gt;

&lt;p class=&#39;center&#39;&gt;
The thirteen years old Lucia&lt;br&gt;
enjoys the tender embrace of the sunlight,&lt;br&gt;
until this summer afternoon too&lt;br&gt;
eventually wanes.
&lt;/p&gt;

&gt; [[Continue|Night]]</tw-passagedata><tw-passagedata pid="100" name="DayEnd Bud" tags="" position="1225,1225" size="100,100">&lt;br&gt;

&lt;p class=&#39;center&#39;&gt;
The thirteen years old Lucia&lt;br&gt;
in body and soul still like a flower&#39;s bud,&lt;br&gt;
her petals closed tightly…&lt;br&gt;
And so this summer day too passes quickly.
&lt;/p&gt;

&gt; [[Continue|Night]]</tw-passagedata><tw-passagedata pid="101" name="Night" tags="" position="100,1350" size="100,100">[JavaScript]
pick_next_day();
[continue]
{ambient sound: &#39;night&#39;}

&lt;p class=&#39;monologue center&#39;&gt;So many things happened today… Oh, my dear Kurt… tell me, what should I do? I want to run to your side, but you are so, so far away… My heart feels like it&#39;s about to break…&lt;/p&gt;

[if route === &#39;EndA&#39;]
&gt; [[Continue|EndA]]
[else]
&gt; [[Continue|Night Dynamic]]</tw-passagedata><tw-passagedata pid="102" name="Night Dynamic" tags="" position="225,1350" size="100,100">_alberto: !flag_seen_alberto &amp;&amp; (random.d6 === 1 || 600 &lt; tokimeki)
_lost_life: lives != lives_prev
--
[JavaScript]
update_tokimeki();
[continue]

[if _lost_life]
{embed passage: &#39;Night Cooldown&#39;}

[if !_lost_life &amp;&amp; _alberto]
{embed passage: &#39;Night Alberto&#39;}

[if !_lost_life &amp;&amp; !_alberto]
{embed passage: &#39;Night Regular&#39;}</tw-passagedata><tw-passagedata pid="103" name="Night Alberto" tags="" position="350,1350" size="100,100">tokimeki: tokimeki - 20
flag_seen_alberto: true
--

&lt;p class=&#39;center italic&#39;&gt;(someone knocks on the door)&lt;/p&gt;
&lt;p&gt;The knocking is followed by Lord Alberto&#39;s voice:&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Are you still up? Go to bed already, will you. I hear you tend to be late for your afternoon classes; surely you&#39;re not thinking play time is more important, right?&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Right, I&#39;m going to bed now!&lt;/q&gt;&lt;/p&gt;

&gt; [[Continue|Night Alberto 2]]</tw-passagedata><tw-passagedata pid="104" name="Night Alberto 2" tags="" position="475,1350" size="100,100">[JavaScript]
update_tokimeki();
[continue]

&lt;p class=&#39;monologue center&#39;&gt;………&lt;br&gt;Could it be that Father found it out…?&lt;br&gt;He would never forgive me…&lt;/p&gt;

{embed passage: &#39;Night NextDay&#39;}</tw-passagedata><tw-passagedata pid="105" name="Night Regular" tags="" position="600,1350" size="100,100">&lt;p class=&#39;monologue center&#39;&gt;The day fades, then dawns again, yet you remain ever so distant in the meadows… Oh, how long will I need to pray to our cruel God? What shall I do?&lt;/p&gt;

[if 350 &lt; tokimeki &amp;&amp; !flag_seen_night350]
{embed passage: &#39;Night 350&#39;}
[continue]

{embed passage: &#39;Night NextDay&#39;}</tw-passagedata><tw-passagedata pid="106" name="Night 350" tags="" position="725,1350" size="100,100">flag_seen_night350: true
--

&lt;p class=&#39;monologue center&#39;&gt;Oh Kurt… Is it strange to feel so restless? If my Father finds it out before my feelings would reach 1000… If, say, around 800 he realizes, and then separates us, what will I do then? I wish we could talk more, or if I could at least hold your hands in mine… If I had the confidence… Oh, I&#39;m about to cry…&lt;/p&gt;</tw-passagedata><tw-passagedata pid="107" name="Night Cooldown" tags="" position="850,1350" size="100,100">lives_prev: lives
--

&lt;p class=&#39;monologue center&#39;&gt;But it&#39;s okay; I feel like I&#39;ve come to see myself clearly. If I close my eyes, by the time I open them again, I believe I could now forget about you. So just for a little longer, let me keep loving you…&lt;/p&gt;

{embed passage: &#39;Night NextDay&#39;}</tw-passagedata><tw-passagedata pid="108" name="Night NextDay" tags="" position="975,1350" size="100,100">[if route === &#39;BaronA&#39;]
&gt; [[Continue|BaronA]]
[if route === &#39;BaronB&#39;]
&gt; [[Continue|BaronB]]
[if route === &#39;BaronC&#39;]
&gt; [[Continue|BaronC]]

[if route === &#39;FlowersA&#39;]
&gt; [[Continue|FlowersA]]
[if route === &#39;FlowersB&#39;]
&gt; [[Continue|FlowersB]]
[if route === &#39;FlowersC&#39;]
&gt; [[Continue|FlowersC]]

[if route === &#39;TreeA&#39;]
&gt; [[Continue|TreeA]]
[if route === &#39;TreeB&#39;]
&gt; [[Continue|TreeB]]
[if route === &#39;TreeC&#39;]
&gt; [[Continue|TreeC]]

[if route === &#39;OperaA&#39;]
&gt; [[Continue|OperaA]]
[if route === &#39;OperaB&#39;]
&gt; [[Continue|OperaB]]
[if route === &#39;OperaC&#39;]
&gt; [[Continue|OperaC]]

[if route === &#39;WindA&#39;]
&gt; [[Continue|WindA]]
[if route === &#39;WindB&#39;]
&gt; [[Continue|WindB]]
[if route === &#39;WindC&#39;]
&gt; [[Continue|WindC]]

[if route === &#39;Alone1&#39;]
&gt; [[Continue|Alone1]]
[if route === &#39;Alone2&#39;]
&gt; [[Continue|Alone2]]

[if route === &#39;EndA&#39;]
&gt; [[Continue|EndA]]
[if route === &#39;EndB&#39;]
&gt; [[Continue|EndB]]
[if route === &#39;EndC&#39;]
&gt; [[Continue|EndC]]</tw-passagedata><tw-passagedata pid="109" name="OperaABC" tags="" position="1100,1350" size="100,100">{embed passage: &#39;DayStart&#39;}

&lt;p&gt;Alicia has a surprisingly sulky look today.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Quite unusual to see such an expression on you, dear sister.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;It&#39;s nothing to do with you! Leave me be!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Maria and Lucia both are at a loss of words; looks like Alicia is in a really bad mood.&lt;/p&gt;

&lt;p&gt;&lt;q&gt;It&#39;s Father, you know. He promised to take me to the opera, but then just told me he won&#39;t be able to keep his word tonight either!&lt;/q&gt; she tells plainly.&lt;/p&gt;
&lt;p&gt;Lucia never even managed to get such a promise.&lt;/p&gt;</tw-passagedata><tw-passagedata pid="110" name="OperaA" tags="" position="1225,1350" size="100,100">{embed passage: &#39;OperaABC&#39;}

&lt;p&gt;&lt;q&gt;!!&lt;/q&gt; Alicia stumbles on something; it seems to be the shovel Kurt usually carries. &lt;q&gt;That useless brat! He just leaves the gardening tools lying around like this! Oh, I&#39;ll give you a lecture, just you wait!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Maria takes the same astonished expression as always, but Lucia can&#39;t follow her example this time.&lt;/p&gt;

&lt;p&gt;&lt;q&gt;I&#39;m giving him a piece of my mind!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Ah, aaah! Wait, Alicia!&lt;/q&gt;&lt;/p&gt;

&gt; [[Go with her|OperaA Go with her]]
&gt; [[Start panicking|OperaA Start panicking]]</tw-passagedata><tw-passagedata pid="111" name="OperaA Go with her" tags="" position="100,1475" size="100,100">&lt;p&gt;&lt;q&gt;Why in the world are you coming too?!&lt;/q&gt; she snaps at Lucia.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Because what you usually say to people tends to be on the harsh side, Alicia!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Oh, so you mean to keep an eye on me! Despite being the youngest of us? Such impudence! Oh, I hope this Kurt gets sent off to a mine or something!&lt;/q&gt;&lt;/p&gt;

&lt;p&gt;With such quarrel along the way, the two eventually reach the wooden cabin.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Well then, we are here. What now?&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Wait but a moment, Alicia…&lt;/q&gt;&lt;/p&gt;

&gt; [[Try to dissuade her|OperaA Try to dissuade her]]
&gt; [[Let&#39;s just stand back and watch|OperaA Let&#39;s just stand back and watch]]
&gt; [[What do you mean by sending him off to a mine?!|OperaA What do you mean by sending him off to a mine?!]]</tw-passagedata><tw-passagedata pid="112" name="OperaA Try to dissuade her" tags="" position="225,1475" size="100,100">tokimeki: tokimeki + 2
--

&lt;p&gt;&lt;q&gt;Let&#39;s stop here and go back. We can talk to Sebastian, but taking things into our own hands won&#39;t end well.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Alicia got all the way here, but now was a bit lost about what to do. &lt;q&gt;Oh well, fine! But you&#39;re the one who&#39;s going to tell him! Don&#39;t you forget!&lt;/q&gt; Then she just casually threw the shovel to the ground and turned back.&lt;/p&gt;
&lt;p&gt;Lucia looked back and forth between Eddie&#39;s cabin and her sister&#39;s back. &lt;q&gt;Aaah, what am I supposed to do?! Oh Lucia, you big fool! Ah, Alicia! Don&#39;t just leave me here—!&lt;/q&gt;&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="113" name="OperaA Alicia goes back" tags="" position="1150,3375" size="100,100">&lt;p&gt;&lt;q&gt;Aaah! Wait, hey! Don&#39;t just leave me here—!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Lucia runs after her sister, heading back, but still her feelings keep lingering in front of the small cabin.&lt;/p&gt;</tw-passagedata><tw-passagedata pid="114" name="OperaA Let&#39;s just stand back and watch" tags="" position="475,1475" size="100,100">tokimeki: tokimeki + 23
--

&lt;p&gt;&lt;q&gt;I think I&#39;ll just wait outside.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Alicia&#39;s face carried a little disappointment hearing that.&lt;/p&gt;
&lt;p&gt;Although Lucia chose to stay back, it turned out nobody was at the cabin, so Alicia threw the shovel to the ground and headed back.&lt;/p&gt;

{embed passage: &#39;OperaA Alicia goes back&#39;}
{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="115" name="OperaA What do you mean by sending him off to a mine?!" tags="" position="600,1475" size="100,100">tokimeki: tokimeki + 68
--

&lt;p&gt;&lt;q&gt;What do you mean by sending him off to a mine?!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Oh, you can be so annoying! Why don&#39;t you go together, then? Your head could use some cooling down there too!&lt;/q&gt; Alicia is going hysterical once again. &lt;q&gt;I don&#39;t even care anymore! You two can go find a mine or whatever!&lt;/q&gt;&lt;/p&gt;

{embed passage: &#39;OperaA Alicia goes back&#39;}
{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="116" name="OperaA Start panicking" tags="" position="725,1475" size="100,100">tokimeki: tokimeki - 20
--

&lt;p&gt;While Lucia was fiddling restlessly, Alicia went ahead alone.&lt;/p&gt;
&lt;p class=&#39;monologue&#39;&gt;Oh dear, she&#39;s going to make a scene again…&lt;/p&gt;
&lt;p&gt;Lucia knew very well that if she wants to make her voice heard, she has to be less reserved, but that wasn&#39;t something she could change overnight.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="117" name="OperaB" tags="" position="850,1475" size="100,100">{embed passage: &#39;OperaABC&#39;}

&lt;p&gt;&lt;q&gt;May I be of service to the ladies?&lt;/q&gt; From behind the girls, Eddie&#39;s voice approaches.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Good day to you. A lovely weather we&#39;re having, isn&#39;t it?&lt;/q&gt; Maria greets him first, followed by the two younger sisters. They then tell Eddie about the reason for Alicia&#39;s ill mood.&lt;/p&gt;

&lt;p&gt;&lt;q&gt;It is truly unfortunate,&lt;/q&gt; comments Eddie, but Maria adds:&lt;/p&gt;
&lt;p&gt;&lt;q&gt;My sister is but spoiled, especially in contrast with, say, Kurt…&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Oh no, no, don&#39;t be absurd, milady. We couldn&#39;t be even compared!&lt;/q&gt;&lt;/p&gt;

&lt;p&gt;Eddie then turns to Lucia, and with lonely-looking eyes asks: &lt;q&gt;Are such worries weight upon Miss Lucia as well?&lt;/q&gt;&lt;/p&gt;

&gt; [[I can&#39;t complain|OperaB I can&#39;t complain]]
&gt; [[There&#39;s someone I&#39;d like to confess to|OperaB There&#39;s someone I&#39;d like to confess to]]
&gt; [[It is Kurt I feel sorry for|OperaB It is Kurt I feel sorry for]]</tw-passagedata><tw-passagedata pid="118" name="OperaB I can&#39;t complain" tags="" position="975,1475" size="100,100">tokimeki: tokimeki - 311
--

&lt;p&gt;&lt;q&gt;Our Father provides us everything, so I really have no reason to complain.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Hearing that, Eddie&#39;s face brightened up. &lt;q&gt;Oh, we gardeners feel the same way! The milord generously takes care all we might need, so that we are not inconvenienced either.&lt;/q&gt;&lt;/p&gt;

&lt;p&gt;Alicia looked as if she was just about to add a snarky comment, but Maria restrained her. Lucia, on the other hand, deeply engraved in her heart the happiness of being loved by her father.&lt;/p&gt;
&lt;p class=&#39;monologue&#39;&gt;That&#39;s right, I&#39;m still just a child. If Father wouldn&#39;t be there for me, I couldn&#39;t do anything.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="119" name="OperaB There&#39;s someone I&#39;d like to confess to" tags="" position="1100,1475" size="100,100">tokimeki: tokimeki + 105
--

&lt;p&gt;&lt;q&gt;There&#39;s someone I&#39;d like to confess to…&lt;/q&gt; The words just slipped out, and Alicia&#39;s face instantly turned all red.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;What sort of thing this is to say by a young lady?! Have you no shame?&lt;/q&gt; imitated Alicia her younger sister&#39;s manner of speech.&lt;/p&gt;

&lt;p&gt;&lt;q&gt;People are the happiest when their heart is wrapped in love,&lt;/q&gt; said Eddie, then with a smile returned to his work. Lucia kept pondering over the meaning of these words for a long time.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="120" name="OperaB It is Kurt I feel sorry for" tags="" position="1225,1475" size="100,100">tokimeki: tokimeki + 77
--

&lt;p&gt;&lt;q&gt;It is Kurt I feel sorry for…&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Don&#39;t be, milady, no need for that at all! It&#39;s still early for such seedling of a man to have big dreams,&lt;/q&gt; said Eddie, vigorously shaking his head in denial.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;When she says &lt;q&gt;I feel sorry&lt;/q&gt;, she actually means &lt;q&gt;I love him&lt;/q&gt;,&lt;/q&gt; Alicia adds with mischievous eyes.&lt;/p&gt;

&lt;p&gt;Lucia, who had been spacing out for a moment, hearing that instantly turned all red. &lt;q&gt;It&#39;s not like that! Not like that at all!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Seeing that the conversation returned to a brighter tone, Eddie quietly left the scene.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;I&#39;m telling you, it&#39;s really nothing like that, seriously…&lt;/q&gt;&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="121" name="OperaC" tags="" position="100,1600" size="100,100">{embed passage: &#39;OperaABC&#39;}

&lt;p&gt;&lt;q&gt;I understand how you feel, but you see…&lt;/q&gt; Maria then continued to explain all the obligations of the House, but that didn&#39;t really satisfy Alicia.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;They always say that we should keep our promises, but all Father does is breaking them!&lt;/q&gt;&lt;/p&gt;

&lt;p&gt;Alicia&#39;s selfishness touched a nerve in Lucia, and she couldn&#39;t help but interject: &lt;q&gt;I haven&#39;t even got such promise, you know…&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;And why would he even give you any promise? It&#39;s not like anyone cares about what you might want!&lt;/q&gt; Alicia ruthlessly takes advantage of her somewhat downcast sister to vent her anger.&lt;/p&gt;

&lt;p&gt;In Lucia&#39;s eyes, tears are welling up.&lt;/p&gt;

&gt; [[Then I want to go to the opera too|OperaC Then I want to go to the opera too]]
&gt; [[I&#39;m not so selfish|OperaC I&#39;m not so selfish]]
&gt; [[How about together with Kurt…|OperaC How about together with Kurt…]]

[note]
Alicia makes a really vague remark here; I chose the translation that made the most sense to me here.</tw-passagedata><tw-passagedata pid="122" name="OperaC Then I want to go to the opera too" tags="" position="225,1600" size="100,100">tokimeki: tokimeki + 7
--

&lt;p&gt;&lt;q&gt;Then I want to go to the opera too…&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Together? No way! Don&#39;t come the same day as me!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Alicia continues mercilessly, until between the two Maria finally gets tired of the fight. &lt;q&gt;If both of you want to see the play so much, I will ask Father if you could come with me or Sebastian.&lt;/q&gt;&lt;/p&gt;

&lt;p&gt;&lt;q&gt;Then I don&#39;t even want to go anymore!&lt;/q&gt; says Alicia, then she runs off.&lt;/p&gt;
&lt;p&gt;Lucia felt as if she said something wrong, and looked up to her sister&#39;s face, but Maria kept her gaze averted.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="123" name="OperaC I&#39;m not so selfish" tags="" position="350,1600" size="100,100">tokimeki: tokimeki - 39
lives: lives - 1
--

&lt;p&gt;&lt;q&gt;I&#39;m not as selfish as you—!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Alicia&#39;s palm snapped on Lucia&#39;s cheeks. &lt;q&gt;You are the most self-centered among all of us, and you don&#39;t even see it! Don&#39;t you dare to say that to me!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Tears started rolling in large drops from Lucia&#39;s eyes. Alicia swallowed any remaining words, turned and ran away.&lt;/p&gt;

&lt;p&gt;Maria tried to console her little sister, but the tears just kept falling, even as Lucia tried to wipe them off with both her hands.&lt;/p&gt;
&lt;p class=&#39;monologue&#39;&gt;I don&#39;t even usually say selfish things… Is that really how others see me?&lt;/p&gt;
&lt;p&gt;Lucia had no idea what made Alicia so angry.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="124" name="OperaC How about together with Kurt…" tags="" position="475,1600" size="100,100">tokimeki: tokimeki + 63
lives: lives - 1
--

&lt;p&gt;&lt;q&gt;Then how about together with Kurt…&lt;/q&gt; She didn&#39;t plan to say it out loud, but the words slipped out.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;If you wish to play with Kurt, you can, Lucia; you two are close in age, after all…&lt;/q&gt; Maria carefully chose her words. &lt;q&gt;Between the limits of your studies, of course. As long as you keep your responsibilities in mind, yes, well… I could suggest him to Father as a companion for, like, horseback riding or picking berries…&lt;/q&gt; Maria continued with a hint of hesitation, but hearing that much was enough already to make Lucia red all over her face.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;No need, thank you! It&#39;s not what I meant!&lt;/q&gt;&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="125" name="TreeABC" tags="" position="600,1600" size="100,100">{embed passage: &#39;DayStart&#39;}

&lt;p&gt;&lt;q&gt;Alicia, you too know well that you have a frail constitution. Please refrain from dangerous activities.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;But Alicia was 16 years old, and just loved climbing trees. &lt;q&gt;You&#39;re worrying too much, my dear sister. Look, I can pull myself up on that branch to get even higher.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;My, oh dear, you&#39;re going to fall off, Alicia! I can&#39;t even look!&lt;/q&gt; Lucia feared two things: ghosts and tall places. But what she was actually concerned about the most…&lt;/p&gt;
&lt;p&gt;&lt;q&gt;It&#39;s dangerous to go so high, Miss Alicia! Please come down! I will end up getting scolded for it!&lt;/q&gt; Son and assistant to the gardener Eddie, the 14 years old Kurt Grohl.&lt;/p&gt;</tw-passagedata><tw-passagedata pid="126" name="TreeA" tags="" position="725,1600" size="100,100">{embed passage: &#39;TreeABC&#39;}

&lt;p&gt;&lt;q&gt;Silence, Kurt Grohl! How dare you to tell me what to do?!&lt;/q&gt; answers the ever prideful Alicia.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Alicia, I &lt;span class=&#39;italic&#39;&gt;will&lt;/span&gt; have to report this to our Father.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;That&#39;s right! He will find out that you are climbing the trees all the time!&lt;/q&gt; imitates Lucia her older sister, as like all the time.&lt;/p&gt;

&lt;div class=&#39;monologue&#39;&gt;
&lt;p&gt;Alicia hates Kurt; she always tells how dirty he is, and just orders him around. But if she manages to fire Kurt from the castle… Like, if she one day truly requests this from our Father… Oh, what should I do then…&lt;/p&gt;

&lt;p&gt;Oh, my dear Kurt, if that day comes, I too will follow you. I won&#39;t let you leave alone.&lt;/p&gt;
&lt;/div&gt;

&gt; [[Try to speak openly with Kurt|TreeA Try to speak openly with Kurt]]
&gt; [[Grab Kurt&#39;s hands|TreeA Grab Kurt&#39;s hands]]
&gt; [[Throw ourselves into Kurt&#39;s arms|TreeA Throw ourselves into Kurt&#39;s arms]]</tw-passagedata><tw-passagedata pid="127" name="TreeA Try to speak openly with Kurt" tags="" position="850,1600" size="100,100">tokimeki: tokimeki + 93
--

&lt;div class=&#39;monologue&#39;&gt;
&lt;p&gt;That&#39;s right! I will speak to him openly! There&#39;s no other way! …But talk about what, exactly? Raising flowers together?&lt;/p&gt;

&lt;p&gt;No, no, no, no!&lt;/p&gt;
&lt;p&gt;More like, the love between two people… of different social standing… and how that tears up… all their lives… Isn&#39;t it like how that famous song goes too?&lt;/p&gt;
&lt;/div&gt;

{embed passage: &#39;DayEnd Sunshine&#39;}</tw-passagedata><tw-passagedata pid="128" name="TreeA Grab Kurt&#39;s hands" tags="" position="975,1600" size="100,100">tokimeki: tokimeki + 117
--

&lt;p class=&#39;monologue&#39;&gt;I&#39;ll just grab Kurt&#39;s hand, and run away with him, away from here… That&#39;s right, perhaps I never even return. But I will have no regrets… Because you too…&lt;/p&gt;

{embed passage: &#39;BaronB End&#39;}</tw-passagedata><tw-passagedata pid="129" name="TreeA Throw ourselves into Kurt&#39;s arms" tags="" position="1100,1600" size="100,100">tokimeki: tokimeki + 101
--

&lt;p class=&#39;monologue&#39;&gt;Oh, my dear Kurt! I don&#39;t want to be a noble lady anymore! While I&#39;m choking between the castle walls, you may live here outside, this the vast open world! All the flowers, birds and animals, whose names I wouldn&#39;t even know, all must be old friends to you!&lt;/p&gt;
&lt;p&gt;While Lucia got carried away in her own little world, Kurt left for Eddie, and so the unrevealed secret love continues still.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="130" name="TreeB" tags="" position="1225,1600" size="100,100">{embed passage: &#39;TreeABC&#39;}

&lt;p&gt;&lt;q&gt;Kurt Grohl! Make yourself useful and hold my bottoms from below!&lt;/q&gt; says Alicia without any reservation.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;What shameless conduct took hold of you, Alicia?!&lt;/q&gt; follows Maria, the ever refined noble lady.&lt;/p&gt;
&lt;p&gt;Then comes Lucia, always swaying between the two.&lt;/p&gt;

&lt;p class=&#39;monologue&#39;&gt;Huh?! What did she just say? Hold her bottoms?! My dear Kurt, don&#39;t even listen to such an order! Oh, what should I do… If Father finds out we indulge in such things in our free time…&lt;/p&gt;

&gt; [[Yell at Alicia|TreeB Yell at Alicia]]
&gt; [[Push her up ourselves|TreeB Push her up ourselves]]
&gt; [[Start panicking…|TreeB Start panicking]]</tw-passagedata><tw-passagedata pid="131" name="TreeB Yell at Alicia" tags="" position="100,1725" size="100,100">&lt;p&gt;&lt;q&gt;Enough of this, Alicia!&lt;/q&gt; shouts Lucia at her sister.&lt;/p&gt;

&gt; [[Don&#39;t cause trouble for Kurt!|TreeB Don&#39;t cause trouble for Kurt!]]
&gt; [[What sort of request is that!|TreeB What sort of request is that!]]
&gt; [[You dummy!|TreeB You dummy!]]</tw-passagedata><tw-passagedata pid="132" name="TreeB Don&#39;t cause trouble for Kurt!" tags="" position="225,1725" size="100,100">tokimeki: tokimeki + 36
--

&lt;p&gt;&lt;q&gt;………&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;But Lucia&#39;s feelings weren&#39;t sorted out enough to say Kurt&#39;s name, and she ended up swallowing the words.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="133" name="TreeB What sort of request is that!" tags="" position="350,1725" size="100,100">tokimeki: tokimeki + 46
--

&lt;p&gt;&lt;q&gt;What sort of thing this is to say to a gentleman?! Have you no shame?&lt;/q&gt; yelled Lucia, covering her face with both hands, then she suddenly turned and ran off towards the castle.&lt;/p&gt;

&lt;p&gt;&lt;q&gt;Looks like someone&#39;s a little hot-headed today,&lt;/q&gt; mumbled Alicia under her nose, thinking highly of herself.&lt;/p&gt;
&lt;p&gt;Meanwhile Maria just followed the retreating Lucia with her eyes, with an uneasy expression on her face.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="134" name="TreeB You dummy!" tags="" position="475,1725" size="100,100">tokimeki: tokimeki + 19
--

&lt;p&gt;&lt;q&gt;Alicia, you dummy!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Lucia then ran off towards the castle, while the two sisters she had left behind looked at each other in confusion.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="135" name="TreeB Push her up ourselves" tags="" position="600,1725" size="100,100">tokimeki: tokimeki + 30
--

&lt;p&gt;&lt;q&gt;&lt;span class=&#39;italic&#39;&gt;I&lt;/span&gt; will help you out!&lt;/q&gt; says Lucia, and she cuts between the two.&lt;/p&gt;
&lt;p&gt;Noticing the opportunity, Kurt retreats behind Lucia, then quickly takes his leave. Then, from the ground below Maria&#39;s faint voice resounds:&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Stop this dangerous game, both of you! Don&#39;t make me tell about it to Father!&lt;/q&gt;&lt;/p&gt;

&lt;p class=&#39;monologue&#39;&gt;Gaaah! Me too?! I didn&#39;t even want to climb up!&lt;/p&gt;
&lt;p&gt;She timidly turns towards Maria, but her sister&#39;s eyes are firmly following Alicia. Looking at her face, Lucia wonders whether she should look for excuses, or would it be better to just apologize.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="136" name="TreeB Start panicking" tags="" position="725,1725" size="100,100">tokimeki: tokimeki + 76
--

&lt;p&gt;&lt;q&gt;Oh my, oh my, oh dear…&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;After much yelling, Kurt eventually helps her up to the tree, with Lucia just standing there still, covering her face. &lt;q&gt;What a scolding will we get from Father!&lt;/q&gt; she told herself, repeating the line like a chanting.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="137" name="TreeC" tags="" position="850,1725" size="100,100">{embed passage: &#39;TreeABC&#39;}

&lt;p&gt;&lt;q&gt;Kurt! You&#39;re coming up here with me! Else I might just happen to get injured, you know!&lt;/q&gt; states the always high-handed Alicia.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Stop this, Alicia. That&#39;s enough already,&lt;/q&gt; follows Maria, tasked with keeping an eye on her younger sisters as the oldest.&lt;/p&gt;
&lt;p&gt;Lucia meanwhile stood there, speechless.&lt;/p&gt;

&lt;p class=&#39;monologue&#39;&gt;Why, why, why, why…?! Why do you happen to need Kurt up there?! And whatever words they exchange at the top, will be drown out by the wind rustling the leaves… We will not hear a thing here below…!&lt;br&gt;Oh, my dear Kurt, you cannot go up with her!&lt;/p&gt;

&gt; [[Stop Kurt|TreeC Stop Kurt]]
&gt; [[Yell at Alicia|TreeC Yell at Alicia]]
&gt; [[Let&#39;s climb up too|TreeC Let&#39;s climb up too]]</tw-passagedata><tw-passagedata pid="138" name="TreeC Stop Kurt" tags="" position="975,1725" size="100,100">tokimeki: tokimeki + 35
--

&lt;p class=&#39;monologue&#39;&gt;Yes, I will stop you!&lt;/p&gt;
&lt;p&gt;And while the intention was there, under the weight of feelings piled up on her heart, she gets unable to say anything.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Kurt, leave us be, please.&lt;/q&gt; Maria&#39;s voice resounds, to which Kurt bows a number of times, then returns to his work. Alicia sits sulking on the tree.&lt;/p&gt;
&lt;p&gt;Even after that, Lucia keeps thinking about Kurt, her thought revolving around the boy for a long while.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="139" name="TreeC Yell at Alicia" tags="" position="1100,1725" size="100,100">&lt;p&gt;&lt;q&gt;That&#39;s enough, Alicia!&lt;/q&gt;&lt;/p&gt;

&gt; [[Do not trouble Kurt!|TreeC Do not trouble Kurt!]]
&gt; [[Stop being so reckless!|TreeC Stop being so reckless!]]
&gt; [[Let&#39;s run away|TreeC Let&#39;s run away]]</tw-passagedata><tw-passagedata pid="140" name="TreeC Do not trouble Kurt!" tags="" position="1225,1725" size="100,100">tokimeki: tokimeki + 36
--

&lt;p&gt;&lt;q&gt;………&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;But Lucia&#39;s feelings weren&#39;t sorted out enough to say Kurt&#39;s name, and she ended up swallowing the words.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="141" name="TreeC Stop being so reckless!" tags="" position="100,1850" size="100,100">tokimeki: tokimeki + 3
--

&lt;p&gt;&lt;q&gt;Stop being so reckless!&lt;/q&gt; she says with a small, barely audible voice, but Maria takes the matter into her hands:&lt;/p&gt;
&lt;p&gt;&lt;q&gt;If you wish to climb the tree, you may do so on your own.&lt;/q&gt; Then she takes Lucia&#39;s hands, and starts walking back to the castle. Along the way, Lucia shed a few tears.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="142" name="TreeC Let&#39;s run away" tags="" position="225,1850" size="100,100">tokimeki: tokimeki + 17
--

&lt;p&gt;&lt;q&gt;Alicia, you dummy!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Lucia then run off towards the castle, while the two sisters she left behind looked at each other in confusion.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="143" name="TreeC Let&#39;s climb up too" tags="" position="350,1850" size="100,100">&lt;p class=&#39;monologue&#39;&gt;Let&#39;s see… If I climb up here, and Alicia forces Kurt to climb up too, then if I sit on the branch near the trunk, then Kurt will have to sit next to me there…&lt;/p&gt;
&lt;p&gt;The gears were turning in the girl&#39;s head, when Maria asked in a low voice: &lt;q&gt;Do you want to be together with Kurt that much?&lt;/q&gt;&lt;/p&gt;

&gt; [[That would be great|TreeC That would be great]]
&gt; [[It&#39;s nothing like that|TreeC It&#39;s nothing like that]]
&gt; [[…|TreeC dotdotdot]]</tw-passagedata><tw-passagedata pid="144" name="TreeC Let&#39;s climb up too End" tags="" position="3400,2425" size="100,100">&lt;p&gt;&lt;q&gt;Um… That…&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;While Lucia struggled with the answer, Alicia finally got down from the tree. Then, without even giving a glance to Maria, she stepped directly to Kurt: &lt;q&gt;If you continue to do what I say, obediently and without any complains, I might talk with Father to assign you some indoor work. Then you can at least get rid of those dirty clothes!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;She then turned away, throwing a cold glance to Maria, and headed back to the castle. An indescribable, fuzzy feeling gripped the pouting Lucia, as she was poking the soft ground with the tip of her shoe.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="145" name="TreeC That would be great" tags="" position="3200,2550" size="100,100">tokimeki: tokimeki + 3
lives: lives - 1
--
{embed passage: &quot;TreeC Let&#39;s climb up too End&quot;}</tw-passagedata><tw-passagedata pid="146" name="TreeC It&#39;s nothing like that" tags="" position="3325,2550" size="100,100">tokimeki: tokimeki - 16
lives: lives - 1
--
{embed passage: &quot;TreeC Let&#39;s climb up too End&quot;}</tw-passagedata><tw-passagedata pid="147" name="TreeC dotdotdot" tags="" position="3450,2550" size="100,100">tokimeki: tokimeki - 6
lives: lives - 1
--
{embed passage: &quot;TreeC Let&#39;s climb up too End&quot;}</tw-passagedata><tw-passagedata pid="148" name="WindABC" tags="" position="975,1850" size="100,100">{embed passage: &#39;DayStart&#39;}

&lt;p&gt;&lt;q&gt;What a beautiful day today is as well. Hard to believe there was fog at the morning, it cleared up as if it was never here.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;My, such an early bird you are, dear sister. I wouldn&#39;t even know about it if you don&#39;t tell me!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;There was a fog? I should get up early more often too! … Ah—!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Suddenly a strong breeze blows across, and carries away Lucia&#39;s hat. Riding the wind, it flies among the birch trees of the grove, until its shape is no longer even seen.&lt;/p&gt;</tw-passagedata><tw-passagedata pid="149" name="WindA" tags="" position="1100,1850" size="100,100">{embed passage: &#39;WindABC&#39;}

&lt;p&gt;&lt;q&gt;Oh no! It flew towards the pond!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;My, it might have even fell into the water. But who else would be so unlucky, if not Lucia.&lt;/q&gt; Alicia always has a nasty comment at hand.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Sigh… Alright, let&#39;s walk to the pond together, and try to get along, you two.&lt;/q&gt;&lt;/p&gt;
&lt;p class=&#39;center italic&#39;&gt;(cuckoo sings)&lt;/p&gt;

&lt;p&gt;As they reached the spot where they could see the entire pond, Alicia suddenly bursts into laughter.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;What is it, Alicia?&lt;/q&gt;&lt;/p&gt;

&lt;p&gt;&lt;q&gt;Lucia, look!&lt;/q&gt; and indeed, where she was pointing ahead, a hat was floating on the water. &lt;q&gt;Just as I said! Oh Lucia, you&#39;re so unlucky!&lt;/q&gt;&lt;/p&gt;

&gt; [[I&#39;m going to fetch it|WindA I&#39;m going to fetch it]]
&gt; [[There&#39;s nothing we can do|WindA There&#39;s nothing we can do]]
&gt; [[Let&#39;s call someone|WindA Let&#39;s call someone]]</tw-passagedata><tw-passagedata pid="150" name="WindA I&#39;m going to fetch it" tags="" position="1225,1850" size="100,100">tokimeki: tokimeki + 2
--

&lt;p&gt;&lt;q&gt;I won&#39;t give up! I&#39;m going to fetch it!&lt;/q&gt; She then pulled up the hem of her dress, and with one foot stepped into the water.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;That&#39;s enough! Do you truly think such conduct is appropriate for a young lady?&lt;/q&gt; stops Maria her younger sister, but Lucia still gives a resolute glance towards the lake. &lt;q&gt;Look, I will give you my that, it&#39;s just like that one.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Lucia reluctantly nods, but the thought that she now owes her sister a favor somewhat bothers her.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="151" name="WindA There&#39;s nothing we can do" tags="" position="100,1975" size="100,100">tokimeki: tokimeki + 33
--

&lt;p&gt;&lt;q&gt;There&#39;s nothing we can do… And it was my favorite!&lt;/q&gt; While saying that, he toyed with the thought that Kurt jumps into the water, retrieves the hat, then hands it back to her… &lt;q&gt;Sigh, it&#39;s no use… I must have truly lost my mind…&lt;/q&gt;&lt;/p&gt;

&lt;p&gt;&lt;q&gt;That hat was getting small anyway. It was about time to ask for a new one.&lt;/q&gt; Maria tries to console her, but the words don&#39;t register with Lucia. Her absent-minded gaze rests at the water surface, her heart filled with thoughts of Kurt only.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="152" name="WindA Let&#39;s call someone" tags="" position="225,1975" size="100,100">tokimeki: tokimeki + 51
--

&lt;p&gt;&lt;q&gt;Let&#39;s call someone to fetch it out!&lt;/q&gt; To Lucia&#39;s mind floats a scene where they direct Kurt to step into the water for the hat.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Lucia, is that truly the reason you want to call someone?&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;The girl&#39;s heart skips a beat; looks like Maria saw right through her. &lt;q&gt;Ah no, it was just a fleeting thought. Doesn&#39;t matter!&lt;/q&gt; she shook her head, taking back the words.&lt;/p&gt;
&lt;p&gt;Alicia crossed her arms with a slightly annoyed expression. &lt;q&gt;Oh, how silly of me to believe you were serious for a moment!&lt;/q&gt; she grumbled, facing the pond.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="153" name="WindB" tags="" position="350,1975" size="100,100">{embed passage: &#39;WindABC&#39;}

&lt;p&gt;&lt;q&gt;Gosh, you can be such an oaf, Lucia!&lt;/q&gt; Without a moment&#39;s delay, Alicia is running after the airborne hat.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Alicia, stop running around! You&#39;re going to get sick again!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Alicia stopped and turned to Lucia. &lt;q&gt;It flew towards the heather&#39;s clearing. Want to come with me?&lt;/q&gt;&lt;/p&gt;

&gt; [[Yes, but let&#39;s walk there|WindB Yes, but let&#39;s walk there]]
&gt; [[I will look for it, you just stay here|WindB I will look for it, you just stay here]]
&gt; [[Let&#39;s ask Eddie to find the hat|WindB Let&#39;s ask Eddie to find the hat]]</tw-passagedata><tw-passagedata pid="154" name="WindB Yes, but let&#39;s walk there" tags="" position="475,1975" size="100,100">tokimeki: tokimeki + 71
--

&lt;p&gt;&lt;q&gt;Yes, yes, I&#39;m going already, you don&#39;t have to keep telling me!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;With the usual quarrel along the way, they eventually reach the clearing, and Alicia runs ahead.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;I love this place. Look, that&#39;s larkspur, and there&#39;s gazania, lily leek in yellow, and in pink too…&lt;/q&gt;&lt;/p&gt;

&lt;p&gt;Alicia seemed more interested in the flowers than actually looking for the hat, and Lucia too just took a seat on the bench. The two chatted like that for a while until they notice the boy heading towards them, with the slipped away hat in his hands. Lucia&#39;s heartbeat quickened like a galloping horse: the one approaching was Kurt.&lt;/p&gt;

&lt;p&gt;Lucia&#39;s heart was racing so fast she was afraid they might even hear it. She just stood there with lowered gaze, only raising it some time after Alicia accepted the hat. Confirming that Kurt has left, a sense of relief washed over her, but she also felt somewhat miserable.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}

[note]
The flowers mentioned are &lt;span class=&#39;italic&#39;&gt;Calluna vulgaris&lt;/span&gt;, &lt;span class=&#39;italic&#39;&gt;Consolida ajacis&lt;/span&gt;, &lt;span class=&#39;italic&#39;&gt;Gazania rigens&lt;/span&gt;, &lt;span class=&#39;italic&#39;&gt;Allium moly&lt;/span&gt;, and &lt;span class=&#39;italic&#39;&gt;Allium oreophilum&lt;/span&gt;.</tw-passagedata><tw-passagedata pid="155" name="WindB I will look for it, you just stay here" tags="" position="600,1975" size="100,100">tokimeki: tokimeki - 5
--

&lt;p&gt;&lt;q&gt;I will look for it, you just stay here,&lt;/q&gt; she said, but then Alicia started shouting frantically:&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Don&#39;t tell me what to do! &lt;span class=&#39;italic&#39;&gt;I&lt;/span&gt; am going to look for it, and &lt;span class=&#39;italic&#39;&gt;you&lt;/span&gt; stay here! Fine, I won&#39;t run around, so don&#39;t stand in my way!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;With that said, Alicia disappeared among the shade of trees. Lucia raised her eyes to Maria, but her sister was covering her face with both her hands. &lt;q&gt;What&#39;s wrong, Maria…?&lt;/q&gt; But she just shook her head, without saying a word. Lucia was starting to get really tired of the constant quarrels.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="156" name="WindB Let&#39;s ask Eddie to find the hat" tags="" position="725,1975" size="100,100">tokimeki: tokimeki + 60
--

&lt;p&gt;&lt;q&gt;We could try asking Eddie to find the hat.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Right, I&#39;ll go and ask him,&lt;/q&gt; she said, and disappeared among the shade of trees.&lt;/p&gt;

&lt;p&gt;Lucia quietly followed her, and found her sister on the clearing. She was not alone: next to her, with the slipped away hat in his hands, Kurt appeared, just handing it back to Alicia.&lt;/p&gt;
&lt;p&gt;Lucia watched them from the distance, trembling and unable to take even a step.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="157" name="WindC" tags="" position="850,1975" size="100,100">{embed passage: &#39;WindABC&#39;}

&lt;p&gt;&lt;q&gt;Oh no—! My hat—!&lt;/q&gt; Lucia tries to run after it, but stumbles on a tree root and almost falls to the ground. Behind her Alicia bursts out laughing.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;You&#39;re such an oaf, Lucia, even the hat got tired of sitting on your head!&lt;/q&gt;&lt;/p&gt;

&lt;p&gt;Lucia looks back over her shoulders:&lt;/p&gt;

&gt; [[I&#39;m not an oaf!|WindC I&#39;m not an oaf!]]
&gt; [[It&#39;s the wind&#39;s fault!|WindC It&#39;s the wind&#39;s fault!]]
&gt; [[So what if I am!|WindC So what if I am!]]</tw-passagedata><tw-passagedata pid="158" name="WindC I&#39;m not an oaf!" tags="" position="975,1975" size="100,100">tokimeki: tokimeki + 1
--

&lt;p&gt;&lt;q&gt;I&#39;m not an oaf! Ah, aaah, yikes!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;In the end, she does lose her balance and tumbles to the ground. Her two sisters run up to her.&lt;/p&gt;

&lt;p&gt;&lt;q&gt;Ouch, ouch…&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;See, that&#39;s what happens when you don&#39;t pay attention. We will ask Eddie to look for the hat. Come, let&#39;s go.&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;The clumsy and slowpoke Lucia did actually hit herself, but hearing Alicia&#39;s giggling, she chose to not say a word of complaint.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="159" name="WindC It&#39;s the wind&#39;s fault!" tags="" position="1100,1975" size="100,100">&lt;p&gt;&lt;q&gt;It&#39;s the wind&#39;s fault! It&#39;s not like I&#39;m the oaf!&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;As Lucia chased after the hat, a familiar voice caught her ears.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Did something happen, Miss Lucia? If there&#39;s anything I can do, please let me know.&lt;/q&gt;&lt;/p&gt;

&lt;p&gt;From the corner of her eyes she notices the owner of the voice: it&#39;s Kurt.&lt;/p&gt;

&gt; [[Act like you didn&#39;t hear it|WindC Act like you didn&#39;t hear it]]
&gt; [[Let&#39;s stop|WindC Let&#39;s stop]]</tw-passagedata><tw-passagedata pid="160" name="WindC Act like you didn&#39;t hear it" tags="" position="1225,1975" size="100,100">tokimeki: tokimeki + 230
--

&lt;p&gt;Lucia continued onward as if she didn&#39;t hear the boy. However her heart raced, her mind wandered, and she couldn&#39;t stop thinking about Kurt.&lt;/p&gt;
&lt;p&gt;For a while, she pretended to look for the hat, until from behind her suddenly someone put an item on top of her head. As she turned around, Kurt standed before her.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;I&#39;ve found Miss Lucia&#39;s hat… Though it might have got some bits of stain…&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;Lucia froze at her place in nervousness, and Kurt too fixed her gaze on the girl&#39;s face, without saying a word.&lt;/p&gt;

&lt;p&gt;&lt;q&gt;Thank you. It is really precious to me.&lt;/q&gt; The girl barely finished the words, but before she knew it, she was running away.&lt;/p&gt;
&lt;p&gt;Her heart was light like feather, and an old song came to her mind; she tried humming it, but ended up with repeating the same, most romantic lines.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata><tw-passagedata pid="161" name="WindC Let&#39;s stop" tags="" position="100,2100" size="100,100">tokimeki: tokimeki + 220
--

&lt;p&gt;Lucia stops, and so the boy, still behind her, asks:&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Are you looking for something, Miss Lucia?&lt;/q&gt;&lt;/p&gt;
&lt;p&gt;&lt;q&gt;…erm, my hat…&lt;/q&gt; she replies, but by the time she turns around, Kurt&#39;s figure is already getting smaller in the distance.&lt;/p&gt;

&lt;p&gt;Pondering about what will she say when Kurt returns with the hat, the girl eventually comes out at the heather&#39;s clearing. She sits atop the railing of the small bridge, and deep in thoughts follows with her eyes the family of wild ducks, floating atop the pond&#39;s surface.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}

[note]
&lt;span class=&#39;italic&#39;&gt;Mergellus albellus&lt;/span&gt;</tw-passagedata><tw-passagedata pid="162" name="WindC So what if I am!" tags="" position="225,2100" size="100,100">tokimeki: tokimeki - 43
--

&lt;p&gt;&lt;q&gt;So what if I am!&lt;/q&gt; then, without waiting for a reply, she runs away. For a while, she wanders around the estate, looking for the hat, but without any luck. Sweating and letdown, she eventually hears the voice of her sisters.&lt;/p&gt;
&lt;p&gt;&lt;q&gt;Lucia—! We found it—!&lt;/q&gt;&lt;/p&gt;

&lt;p&gt;They tell that it was actually Kurt who brought it back. Upon hearing that, Lucia felt even more crestfallen. With the stroke of bad luck, nothing worked out as she wished for today.&lt;/p&gt;

{embed passage: &#39;DayEnd Bud&#39;}</tw-passagedata></tw-storydata><script>!function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}var n="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}var i=r,a=o;function s(e){if(i===setTimeout)return setTimeout(e,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}"function"==typeof n.setTimeout&&(i=setTimeout),"function"==typeof n.clearTimeout&&(a=clearTimeout);var c,l=[],u=!1,f=-1;function p(){u&&c&&(u=!1,c.length?l=c.concat(l):f=-1,l.length&&d())}function d(){if(!u){var e=s(p);u=!0;for(var t=l.length;t;){for(c=l,l=[];++f<t;)c&&c[f].run();f=-1,t=l.length}c=null,u=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===o||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}h.prototype.run=function(){this.fun.apply(null,this.array)};function g(){}var m=g,b=g,v=g,y=g,w=g,k=g,x=g;var S=n.performance||{},_=S.now||S.mozNow||S.msNow||S.oNow||S.webkitNow||function(){return(new Date).getTime()};var E=new Date;var C={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new h(e,t)),1!==l.length||u||s(d)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:m,addListener:b,once:v,off:y,removeListener:w,removeAllListeners:k,emit:x,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*_.call(S),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-E)/1e3}};function A(e){return null!=e&&(!!e._isBuffer||O(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&O(e.slice(0,0))}(e))}function O(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}void 0===n.TYPED_ARRAY_SUPPORT||n.TYPED_ARRAY_SUPPORT;var T="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};function j(e,t){var n={seen:[],stylize:L};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),D(t)?n.showHidden=t:t&&J(n,t),R(n.showHidden)&&(n.showHidden=!1),R(n.depth)&&(n.depth=2),R(n.colors)&&(n.colors=!1),R(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=z),N(n,e,n.depth)}function z(e,t){var n=j.styles[t];return n?"["+j.colors[n][0]+"m"+e+"["+j.colors[n][1]+"m":e}function L(e,t){return e}function N(e,t,n){if(e.customInspect&&t&&H(t.inspect)&&t.inspect!==j&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(n,e);return q(r)||(r=N(e,r,n)),r}var o=function(e,t){if(R(t))return e.stylize("undefined","undefined");if(q(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(r=t,"number"==typeof r)return e.stylize(""+t,"number");var r;if(D(t))return e.stylize(""+t,"boolean");if(P(t))return e.stylize("null","null")}(e,t);if(o)return o;var i=Object.keys(t),a=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(t)),U(t)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return $(t);if(0===i.length){if(H(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(M(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(B(t))return e.stylize(Date.prototype.toString.call(t),"date");if(U(t))return $(t)}var c,l,u="",f=!1,p=["{","}"];(c=t,Array.isArray(c)&&(f=!0,p=["[","]"]),H(t))&&(u=" [Function"+(t.name?": "+t.name:"")+"]");return M(t)&&(u=" "+RegExp.prototype.toString.call(t)),B(t)&&(u=" "+Date.prototype.toUTCString.call(t)),U(t)&&(u=" "+$(t)),0!==i.length||f&&0!=t.length?n<0?M(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),l=f?function(e,t,n,r,o){for(var i=[],a=0,s=t.length;a<s;++a)G(t,String(a))?i.push(I(e,t,n,r,String(a),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(I(e,t,n,r,o,!0))})),i}(e,t,n,a,i):i.map((function(r){return I(e,t,n,a,r,f)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(l,u,p)):p[0]+u+p[1]}function $(e){return"["+Error.prototype.toString.call(e)+"]"}function I(e,t,n,r,o,i){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),G(r,o)||(a="["+o+"]"),s||(e.seen.indexOf(c.value)<0?(s=P(n)?N(e,c.value,null):N(e,c.value,n-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),R(a)){if(i&&o.match(/^\d+$/))return s;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function D(e){return"boolean"==typeof e}function P(e){return null===e}function q(e){return"string"==typeof e}function R(e){return void 0===e}function M(e){return F(e)&&"[object RegExp]"===W(e)}function F(e){return"object"==typeof e&&null!==e}function B(e){return F(e)&&"[object Date]"===W(e)}function U(e){return F(e)&&("[object Error]"===W(e)||e instanceof Error)}function H(e){return"function"==typeof e}function Z(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function W(e){return Object.prototype.toString.call(e)}function J(e,t){if(!t||!F(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}function G(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function V(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0}j.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},j.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var Y,X=Object.prototype.hasOwnProperty,K=Object.keys||function(e){var t=[];for(var n in e)X.call(e,n)&&t.push(n);return t},Q=Array.prototype.slice;function ee(){return void 0!==Y?Y:Y="foo"===function(){}.name}function te(e){return Object.prototype.toString.call(e)}function ne(e){return!A(e)&&("function"==typeof n.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function re(e,t){e||le(e,!0,t,"==",ue)}var oe=/\s*function\s+([^\(\s]*)\s*/;function ie(e){if(H(e)){if(ee())return e.name;var t=e.toString().match(oe);return t&&t[1]}}function ae(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return se(ce(e.actual),128)+" "+e.operator+" "+se(ce(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||le;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,o=ie(t),i=r.indexOf("\n"+o);if(i>=0){var a=r.indexOf("\n",i+1);r=r.substring(a+1)}this.stack=r}}}function se(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function ce(e){if(ee()||!H(e))return j(e);var t=ie(e);return"[Function"+(t?": "+t:"")+"]"}function le(e,t,n,r,o){throw new ae({message:n,actual:e,expected:t,operator:r,stackStartFunction:o})}function ue(e,t){e||le(e,!0,t,"==",ue)}function fe(e,t,n){e!=t&&le(e,t,n,"==",fe)}function pe(e,t,n){e==t&&le(e,t,n,"!=",pe)}function de(e,t,n){ge(e,t,!1)||le(e,t,n,"deepEqual",de)}function he(e,t,n){ge(e,t,!0)||le(e,t,n,"deepStrictEqual",he)}function ge(e,t,n,r){if(e===t)return!0;if(A(e)&&A(t))return 0===V(e,t);if(B(e)&&B(t))return e.getTime()===t.getTime();if(M(e)&&M(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(ne(e)&&ne(t)&&te(e)===te(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===V(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(A(e)!==A(t))return!1;var o=(r=r||{actual:[],expected:[]}).actual.indexOf(e);return-1!==o&&o===r.expected.indexOf(t)||(r.actual.push(e),r.expected.push(t),function(e,t,n,r){if(null==e||null==t)return!1;if(Z(e)||Z(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var o=me(e),i=me(t);if(o&&!i||!o&&i)return!1;if(o)return ge(e=Q.call(e),t=Q.call(t),n);var a,s,c=K(e),l=K(t);if(c.length!==l.length)return!1;for(c.sort(),l.sort(),s=c.length-1;s>=0;s--)if(c[s]!==l[s])return!1;for(s=c.length-1;s>=0;s--)if(!ge(e[a=c[s]],t[a],n,r))return!1;return!0}(e,t,n,r))}return n?e===t:e==t}function me(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function be(e,t,n){ge(e,t,!1)&&le(e,t,n,"notDeepEqual",be)}function ve(e,t,n){ge(e,t,!0)&&le(e,t,n,"notDeepStrictEqual",ve)}function ye(e,t,n){e!==t&&le(e,t,n,"===",ye)}function we(e,t,n){e===t&&le(e,t,n,"!==",we)}function ke(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function xe(e,t,n,r){var o;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),o=function(e){var t;try{e()}catch(e){t=e}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!o&&le(o,n,"Missing expected exception"+r);var i="string"==typeof r,a=!e&&o&&!n;if((!e&&U(o)&&i&&ke(o,n)||a)&&le(o,n,"Got unwanted exception"+r),e&&o&&n&&!ke(o,n)||!e&&o)throw o}function Se(e,t,n){xe(!0,e,t,n)}function _e(e,t,n){xe(!1,e,t,n)}function Ee(e){if(e)throw e}re.AssertionError=ae,T(ae,Error),re.fail=le,re.ok=ue,re.equal=fe,re.notEqual=pe,re.deepEqual=de,re.deepStrictEqual=he,re.notDeepEqual=be,re.notDeepStrictEqual=ve,re.strictEqual=ye,re.notStrictEqual=we,re.throws=Se,re.doesNotThrow=_e,re.ifError=Ee;var Ce=t(Object.freeze({__proto__:null,default:re,AssertionError:ae,fail:le,ok:ue,assert:ue,equal:fe,notEqual:pe,deepEqual:de,deepStrictEqual:he,notDeepEqual:be,notDeepStrictEqual:ve,strictEqual:ye,notStrictEqual:we,throws:Se,doesNotThrow:_e,ifError:Ee})),Ae=Ce,Oe="undefined"!=typeof window;function Te(e){this.hasWindow=e,this.hasIdle=this.hasWindow&&window.requestIdleCallback,this.method=this.hasIdle?window.requestIdleCallback.bind(window):this.setTimeout,this.scheduled=!1,this.queue=[]}Te.prototype.push=function(e){Ae.equal(typeof e,"function","nanoscheduler.push: cb should be type function"),this.queue.push(e),this.schedule()},Te.prototype.schedule=function(){if(!this.scheduled){this.scheduled=!0;var e=this;this.method((function(t){for(;e.queue.length&&t.timeRemaining()>0;)e.queue.shift()(t);e.scheduled=!1,e.queue.length&&e.schedule()}))}},Te.prototype.setTimeout=function(e){setTimeout(e,0,{timeRemaining:function(){return 1}})};var je,ze=function(){var e;return Oe?(window._nanoScheduler||(window._nanoScheduler=new Te(!0)),e=window._nanoScheduler):e=new Te,e},Le=ze(),Ne=Ce;Ie.disabled=!0;try{je=window.performance,Ie.disabled="true"===window.localStorage.DISABLE_NANOTIMING||!je.mark}catch(e){}var $e=Ie;function Ie(e){if(Ne.equal(typeof e,"string","nanotiming: name should be type string"),Ie.disabled)return De;var t=(1e4*je.now()).toFixed()%Number.MAX_SAFE_INTEGER,n="start-"+t+"-"+e;function r(r){var o="end-"+t+"-"+e;je.mark(o),Le.push((function(){var i=null;try{var a=e+" ["+t+"]";je.measure(a,n,o),je.clearMarks(n),je.clearMarks(o)}catch(e){i=e}r&&r(i,e)}))}return je.mark(n),r.uuid=t,r}function De(e){e&&Le.push((function(){e(new Error("nanotiming: performance API unavailable"))}))}var Pe,qe=Ce;Re.disabled=!0;try{Pe=require("perf_hooks").performance,Re.disabled=C.env.DISABLE_NANOTIMING||!Pe.mark}catch(e){}function Re(e){if("undefined"!=typeof window)return $e(e);if(qe.equal(typeof e,"string","nanotiming: name should be type string"),Re.disabled)return Me;var t=(1e4*Pe.now()).toFixed()%Number.MAX_SAFE_INTEGER,n="start-"+t+"-"+e;function r(r){var o="end-"+t+"-"+e;Pe.mark(o);var i=null;try{var a=e+" ["+t+"]";Pe.measure(a,n,o),Pe.clearMarks(n),Pe.clearMarks(o)}catch(e){i=e}r&&r(i,e)}return Pe.mark(n),r.uuid=t,r}function Me(e){e&&e(new Error("nanotiming: performance API unavailable"))}var Fe=function(e,t,n){var r,o=e.length;if(!(t>=o||0===n)){var i=o-(n=t+n>o?o-t:n);for(r=t;r<i;++r)e[r]=e[r+n];e.length=i}},Be=Re,Ue=Ce,He=Ze;function Ze(e){if(!(this instanceof Ze))return new Ze(e);this._name=e||"nanobus",this._starListeners=[],this._listeners={}}Ze.prototype.emit=function(e){Ue.ok("string"==typeof e||"symbol"==typeof e,"nanobus.emit: eventName should be type string or symbol");for(var t=[],n=1,r=arguments.length;n<r;n++)t.push(arguments[n]);var o=Be(this._name+"('"+e.toString()+"')"),i=this._listeners[e];return i&&i.length>0&&this._emit(this._listeners[e],t),this._starListeners.length>0&&this._emit(this._starListeners,e,t,o.uuid),o(),this},Ze.prototype.on=Ze.prototype.addListener=function(e,t){return Ue.ok("string"==typeof e||"symbol"==typeof e,"nanobus.on: eventName should be type string or symbol"),Ue.equal(typeof t,"function","nanobus.on: listener should be type function"),"*"===e?this._starListeners.push(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)),this},Ze.prototype.prependListener=function(e,t){return Ue.ok("string"==typeof e||"symbol"==typeof e,"nanobus.prependListener: eventName should be type string or symbol"),Ue.equal(typeof t,"function","nanobus.prependListener: listener should be type function"),"*"===e?this._starListeners.unshift(t):(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].unshift(t)),this},Ze.prototype.once=function(e,t){Ue.ok("string"==typeof e||"symbol"==typeof e,"nanobus.once: eventName should be type string or symbol"),Ue.equal(typeof t,"function","nanobus.once: listener should be type function");var n=this;return this.on(e,(function r(){t.apply(n,arguments),n.removeListener(e,r)})),this},Ze.prototype.prependOnceListener=function(e,t){Ue.ok("string"==typeof e||"symbol"==typeof e,"nanobus.prependOnceListener: eventName should be type string or symbol"),Ue.equal(typeof t,"function","nanobus.prependOnceListener: listener should be type function");var n=this;return this.prependListener(e,(function r(){t.apply(n,arguments),n.removeListener(e,r)})),this},Ze.prototype.removeListener=function(e,t){return Ue.ok("string"==typeof e||"symbol"==typeof e,"nanobus.removeListener: eventName should be type string or symbol"),Ue.equal(typeof t,"function","nanobus.removeListener: listener should be type function"),"*"===e?(this._starListeners=this._starListeners.slice(),n(this._starListeners,t)):(void 0!==this._listeners[e]&&(this._listeners[e]=this._listeners[e].slice()),n(this._listeners[e],t));function n(e,t){if(e){var n=e.indexOf(t);return-1!==n?(Fe(e,n,1),!0):void 0}}},Ze.prototype.removeAllListeners=function(e){return e?"*"===e?this._starListeners=[]:this._listeners[e]=[]:(this._starListeners=[],this._listeners={}),this},Ze.prototype.listeners=function(e){var t="*"!==e?this._listeners[e]:this._starListeners,n=[];if(t)for(var r=t.length,o=0;o<r;o++)n.push(t[o]);return n},Ze.prototype._emit=function(e,t,n,r){if(void 0!==e&&0!==e.length){void 0===n&&(n=t,t=null),t&&(n=void 0!==r?[t].concat(n,r):[t].concat(n));for(var o=e.length,i=0;i<o;i++){var a=e[i];a.apply(a,n)}}};var We=He();function Je(e){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(e)}function Ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ye(e,t,n){return t&&Ve(e.prototype,t),n&&Ve(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qe(e,t)}function Ke(e){return Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ke(e)}function Qe(e,t){return Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Qe(e,t)}function et(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ke(e);if(t){var o=Ke(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return et(this,n)}}function nt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(e,t)||ot(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(e){return function(e){if(Array.isArray(e))return it(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ot(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(e,t){if(e){if("string"==typeof e)return it(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?it(e,t):void 0}}function it(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function at(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ot(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}
/*!
	 * isobject <https://github.com/jonschlinkert/isobject>
	 *
	 * Copyright (c) 2014-2017, Jon Schlinkert.
	 * Released under the MIT License.
	 */var st=function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)};
/*!
	 * get-value <https://github.com/jonschlinkert/get-value>
	 *
	 * Copyright (c) 2014-2018, Jon Schlinkert.
	 * Released under the MIT License.
	 */const ct=st;var lt=function(e,t,n){if(ct(n)||(n={default:n}),!pt(e))return void 0!==n.default?n.default:e;"number"==typeof t&&(t=String(t));const r=Array.isArray(t),o="string"==typeof t,i=n.separator||".",a=n.joinChar||("string"==typeof i?i:".");if(!o&&!r)return e;if(o&&t in e)return ft(t,e,n)?e[t]:n.default;let s=r?t:function(e,t,n){if("function"==typeof n.split)return n.split(e);return e.split(t)}(t,i,n),c=s.length,l=0;do{let t=s[l];for("number"==typeof t&&(t=String(t));t&&"\\"===t.slice(-1);)t=ut([t.slice(0,-1),s[++l]||""],a,n);if(t in e){if(!ft(t,e,n))return n.default;e=e[t]}else{let r=!1,o=l+1;for(;o<c;)if(t=ut([t,s[o++]],a,n),r=t in e){if(!ft(t,e,n))return n.default;e=e[t],l=o-1;break}if(!r)return n.default}}while(++l<c&&pt(e));return l===c?e:n.default};function ut(e,t,n){return"function"==typeof n.join?n.join(e):e[0]+t+e[1]}function ft(e,t,n){return"function"!=typeof n.isValid||n.isValid(e,t)}function pt(e){return ct(e)||Array.isArray(e)||"function"==typeof e}
/*!
	 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
	 *
	 * Copyright (c) 2014-2017, Jon Schlinkert.
	 * Released under the MIT License.
	 */var dt=st;function ht(e){return!0===dt(e)&&"[object Object]"===Object.prototype.toString.call(e)}
/*!
	 * set-value <https://github.com/jonschlinkert/set-value>
	 *
	 * Copyright (c) 2014-2018, Jon Schlinkert.
	 * Released under the MIT License.
	 */
const gt=function(e){var t,n;return!1!==ht(e)&&("function"==typeof(t=e.constructor)&&(!1!==ht(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))};function mt(e,t,n,r){if(!yt(e))return e;let o=r||{};const i=Array.isArray(t);if(!i&&"string"!=typeof t)return e;let a=o.merge;a&&"function"!=typeof a&&(a=Object.assign);const s=(i?t:function(e,t){const n=function(e,t){let n=e;if(void 0===t)return n+"";const r=Object.keys(t);for(let e=0;e<r.length;e++){const o=r[e];n+=";"+o+"="+String(t[o])}return n}(e,t);if(mt.memo[n])return mt.memo[n];const r=t&&t.separator?t.separator:".";let o=[],i=[];o=t&&"function"==typeof t.split?t.split(e):e.split(r);for(let e=0;e<o.length;e++){let t=o[e];for(;t&&"\\"===t.slice(-1)&&o[e+1];)t=t.slice(0,-1)+r+o[++e];i.push(t)}return mt.memo[n]=i,i}(t,o)).filter(vt),c=s.length,l=e;if(!r&&1===s.length)return bt(e,s[0],n,a),e;for(let t=0;t<c;t++){let r=s[t];if(yt(e[r])||(e[r]={}),t===c-1){bt(e,r,n,a);break}e=e[r]}return l}function bt(e,t,n,r){r&&gt(e[t])&&gt(n)?e[t]=r({},e[t],n):e[t]=n}function vt(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e}function yt(e){return null!==e&&("object"==typeof e||"function"==typeof e)}mt.memo={};var wt=mt,kt={}.toString,xt=Array.isArray||function(e){return"[object Array]"==kt.call(e)};function St(e){return e?Array.isArray(e)?e.join("."):e:""}
/*!
	 * has-value <https://github.com/jonschlinkert/has-value>
	 *
	 * Copyright (c) 2014-2016, Jon Schlinkert.
	 * Licensed under the MIT License.
	 */var _t=function(e){return null!=e&&"object"==typeof e&&!1===xt(e)},Et=function(e,t){if(null==e)return!1;if("boolean"==typeof e)return!0;if("number"==typeof e)return 0!==e||!0!==t;if(void 0!==e.length)return 0!==e.length;for(var n in e)if(e.hasOwnProperty(n))return!0;return!1},Ct=function(e,t,n,r,o){if(null===(i=e)||"object"!=typeof i&&"function"!=typeof i||!t)return e;var i;if(t=St(t),n&&(t+="."+St(n)),r&&(t+="."+St(r)),o&&(t+="."+St(o)),t in e)return e[t];for(var a=t.split("."),s=a.length,c=-1;e&&++c<s;){for(var l=a[c];"\\"===l[l.length-1];)l=l.slice(0,-1)+"."+a[++c];e=e[l]}return e},At=st,Ot=function(e,t,n){return _t(e)?Et(Ct(e,t),n):Et(e,t)},Tt={"config.logger.show.parse":!1,"config.logger.show.render":!1,"config.logger.show.sound":!1,"config.logger.show.state":!1,"config.logger.show.story":!1,"config.logger.show.style":!1};function jt(e){return e+": "}function zt(e,t){un("config.logger.show.".concat(e))&&console.log(jt(e)+t),We.emit("log",{source:e,message:t})}function Lt(e,t){console.warn(jt(e)+t),We.emit("log-warning",{source:e,message:t})}function Nt(e){return{log:function(t){zt(e,t)},warn:function(t){Lt(e,t)}}}function $t(e,t){return e.querySelector(t)}function It(e,t){return Array.from(e.querySelectorAll(t))}window.logger={log:zt,warn:Lt};var Dt=Nt("story"),Pt={customScripts:[],customStyles:[]},qt=[];function Rt(e){["name","creator","ifid","options"].forEach((function(t){return Pt[t]=e.getAttribute(t)})),Pt.startNode=parseInt(e.getAttribute("startnode")),Pt.creatorVersion=e.getAttribute("creator-version");var t=function(e){return e.map((function(e){return e.textContent}))};Pt.customScripts=t(It(e,'[type="text/twine-javascript"]')),Pt.customStyles=t(It(e,'[type="text/twine-css"]')),qt=It(e,"tw-passagedata").map((function(e){var t={id:parseInt(e.getAttribute("pid")),name:e.getAttribute("name"),source:e.textContent},n=e.getAttribute("tags");return t.tags=n?n.split(" "):[],t}))}function Mt(){cn("trail",[Wt().name]),cn("config.testing","string"==typeof Pt.options&&-1!==Pt.options.indexOf("debug")||!1),document.title=Pt.name}function Ft(){Dt.log("Running custom scripts (".concat(Pt.customScripts.length,")")),Pt.customScripts.forEach((function(e){new Function(e).apply(window)}))}function Bt(){Dt.log("Adding custom styles (".concat(Pt.customStyles.length,")")),Pt.customStyles.forEach((function(e){var t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t)}))}function Ut(){return Pt.ifid}function Ht(){return Pt.name}function Zt(){return qt}function Wt(){return qt.find((function(e){return e.id===Pt.startNode}))}function Jt(e){return qt.find((function(t){return t.name===e}))}var Gt,Vt=Object.freeze({__proto__:null,loadFromData:Rt,init:Mt,runCustomScripts:Ft,addCustomStyles:Bt,ifid:Ut,name:Ht,exportedPassages:Zt,passages:Zt,startPassage:Wt,passageNamed:Jt,passageWithId:function(e){return qt.find((function(t){return t.id===e}))}}),Yt=Nt("state").log,Xt={},Kt={},Qt={},en={"config.state.autosave":!0};function tn(e,t){if(!e[t]){Object.defineProperty(e,t,{get:function(){return un(t)},set:function(e){sn(t,e)},configurable:!0});var n=t.split(".");n.length>1&&(n.pop(),tn(e,n.join(".")))}}function nn(e,t){!function(e,t){if(!At(e))throw new TypeError("expected an object.");if(e.hasOwnProperty(t))return delete e[t],!0;if(Ot(e,t)){for(var n=t.split("."),r=n.pop();n.length&&"\\"===n[n.length-1].slice(-1);)r=n.pop().slice(0,-1)+"."+r;for(;n.length;)e=e[t=n.shift()];return delete e[r]}}(e,t)}function rn(){var e=Ut(),t=Ht();if(void 0===t)throw new Error("Cannot set up state: the story has no name");Gt="chapbook-state-".concat(t,"-").concat(e)}function on(){!function e(t,n){Object.keys(t).forEach((function(r){var o=""===n?r:"".concat(n,".").concat(r);if("object"!==Je(t[r])||Array.isArray(t[r])){var i=t[r];delete t[r],nn(window,n),We.emit("state-change",{name:o,value:un(o),previous:i})}else e(t[r],o)}))}(Xt,""),We.emit("state-reset"),un("config.state.autosave")&&hn()}function an(e,t){for(var n=e.split("."),r=t.split("."),o=0;o<n.length&&o<r.length;o++)if(n[o]!==r[o])return!1;return!0}function sn(e,t){var n=un(e);wt(Xt,e,t),tn(window,e),t!==n&&We.emit("state-change",{name:e,previous:n,value:t}),un("config.state.autosave")&&hn()}function cn(e,t){var n=un(e);Yt('Defaulting "'.concat(e,'" to ').concat(JSON.stringify(t))),wt(Kt,e,t),tn(window,e),null==n&&We.emit("state-change",{name:e,value:t,previous:n})}function ln(e,t){var n=un(e);Yt("Adding lookup variable ".concat(e)),wt(Qt,e,t),function(e,t){if(!e[t]){for(var n=t.split("."),r=n[n.length-1],o=0;o<n.length-1;o++)e[n[o]]=e[n[o]]||{},e=e[n[o]];Object.defineProperty(e,r,{get:function(){return un(t)},set:function(){throw new Error("Chapbook lookup variables may only be read.")},configurable:!0})}}(window,e),null==n&&We.emit("state-change",{name:e,value:un(e),previous:n})}function un(e){var t=lt(Qt,e);if("function"==typeof t)return t(un,sn);var n=lt(Xt,e);return null==n?lt(Kt,e):n}function fn(){return Object.assign({},Xt)}function pn(e){on(),Object.keys(e).forEach((function(t){return sn(t,e[t])}))}function dn(){try{return window.localStorage.setItem("chapbook-test","a"),window.localStorage.removeItem("chapbook-test"),!0}catch(e){return!1}}function hn(){Yt("Saving to local storage: "+JSON.stringify(fn())),window.localStorage.setItem(Gt,JSON.stringify(fn())),Yt("Save complete")}function gn(){return dn()&&null!==window.localStorage.getItem(Gt)}function mn(){Yt("Restoring variables from local storage"),pn(JSON.parse(window.localStorage.getItem(Gt))),Yt("Restore complete")}function bn(e){e||Yt("Purging variables from local storage"),pn(JSON.parse(window.localStorage.getItem(Gt))),e||Yt("Purge complete")}function vn(e){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Object.keys(e).reduce((function(r,o){if("object"===Je(e[o])&&e[o]&&!Array.isArray(e[o]))t(e[o],n?n+"."+o:o,r);else{var i=n?n+"."+o:o;-1===r.indexOf(i)&&r.push(i)}return r}),r)}return e?t(Kt,null,t(Xt,null)).sort():t(Xt).sort()}var yn=Object.freeze({__proto__:null,defaults:en,init:rn,reset:on,sameObject:an,set:sn,setDefault:cn,setLookup:ln,get:un,saveToObject:fn,restoreFromObject:pn,canSaveToStorage:dn,saveToStorage:hn,canRestoreFromStorage:gn,restoreFromStorage:mn,purgeFromStorage:bn,varNames:vn});function wn(e){zt("actions",e)}function kn(e){wn('Going to passage "'.concat(e,'"'));var t=Jt(e);if(!t)throw new Error('There is no passage with the name "'.concat(e,'"'));It(document,"[data-cb-set]").forEach((function(e){var t=e.dataset.set;switch(e.nodeName){case"INPUT":sn(t,e.value);break;case"SELECT":sn(t,e.options[e.selectedIndex].value);break;default:sn(t,e.textContent)}})),sn("trail",un("trail").concat(t.name))}function xn(){wn("Restarting"),on(),window.location.reload()}We.on("dom-click",(function(e){var t,n;e.dataset.cbGo&&(t=document.querySelector("form#cb-validation"),n=It(t,"input, select"),new Promise((function(e,r){var o=function e(){t.removeEventListener("submit",i),n.forEach((function(t){return t.removeEventListener("invalid",e)})),r()},i=function r(){t.removeEventListener("submit",r),n.forEach((function(e){return e.removeEventListener("invalid",o)})),e()};n.forEach((function(e){return e.addEventListener("invalid",o)})),t.addEventListener("submit",i),document.querySelector("button#cb-validation-tester").click()}))).then((function(){return kn(e.dataset.cbGo)}))})),We.on("dom-click",(function(e){e.dataset.cbRestart&&xn()}));var Sn=function(){},_n={},En=[],Cn=[];function An(e,t){var n,r,o,i,a=Cn;for(i=arguments.length;i-- >2;)En.push(arguments[i]);for(t&&null!=t.children&&(En.length||En.push(t.children),delete t.children);En.length;)if((r=En.pop())&&void 0!==r.pop)for(i=r.length;i--;)En.push(r[i]);else"boolean"==typeof r&&(r=null),(o="function"!=typeof e)&&(null==r?r="":"number"==typeof r?r=String(r):"string"!=typeof r&&(o=!1)),o&&n?a[a.length-1]+=r:a===Cn?a=[r]:a.push(r),n=o;var s=new Sn;return s.nodeName=e,s.children=a,s.attributes=null==t?void 0:t,s.key=null==t?void 0:t.key,s}function On(e,t){for(var n in t)e[n]=t[n];return e}function Tn(e,t){null!=e&&("function"==typeof e?e(t):e.current=t)}var jn="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,zn=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,Ln=[];function Nn(e){!e._dirty&&(e._dirty=!0)&&1==Ln.push(e)&&jn($n)}function $n(){for(var e;e=Ln.pop();)e._dirty&&er(e)}function In(e,t,n){return"string"==typeof t||"number"==typeof t?void 0!==e.splitText:"string"==typeof t.nodeName?!e._componentConstructor&&Dn(e,t.nodeName):n||e._componentConstructor===t.nodeName}function Dn(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function Pn(e){var t=On({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===t[r]&&(t[r]=n[r]);return t}function qn(e){var t=e.parentNode;t&&t.removeChild(e)}function Rn(e,t,n,r,o){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)Tn(n,null),Tn(r,e);else if("class"!==t||o)if("style"===t){if(r&&"string"!=typeof r&&"string"!=typeof n||(e.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var i in n)i in r||(e.style[i]="");for(var i in r)e.style[i]="number"==typeof r[i]&&!1===zn.test(i)?r[i]+"px":r[i]}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var a=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,Mn,a):e.removeEventListener(t,Mn,a),(e._listeners||(e._listeners={}))[t]=r}else if("list"!==t&&"type"!==t&&!o&&t in e){try{e[t]=null==r?"":r}catch(e){}null!=r&&!1!==r||"spellcheck"==t||e.removeAttribute(t)}else{var s=o&&t!==(t=t.replace(/^xlink:?/,""));null==r||!1===r?s?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof r&&(s?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||""}function Mn(e){return this._listeners[e.type](e)}var Fn=[],Bn=0,Un=!1,Hn=!1;function Zn(){for(var e;e=Fn.shift();)e.componentDidMount&&e.componentDidMount()}function Wn(e,t,n,r,o,i){Bn++||(Un=null!=o&&void 0!==o.ownerSVGElement,Hn=null!=e&&!("__preactattr_"in e));var a=Jn(e,t,n,r,i);return o&&a.parentNode!==o&&o.appendChild(a),--Bn||(Hn=!1,i||Zn()),a}function Jn(e,t,n,r,o){var i=e,a=Un;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||o)?e.nodeValue!=t&&(e.nodeValue=t):(i=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),Gn(e,!0))),i.__preactattr_=!0,i;var s,c,l=t.nodeName;if("function"==typeof l)return function(e,t,n,r){var o=e&&e._component,i=o,a=e,s=o&&e._componentConstructor===t.nodeName,c=s,l=Pn(t);for(;o&&!c&&(o=o._parentComponent);)c=o.constructor===t.nodeName;o&&c&&(!r||o._component)?(Qn(o,l,3,n,r),e=o.base):(i&&!s&&(tr(i),e=a=null),o=Xn(t.nodeName,l,n),e&&!o.nextBase&&(o.nextBase=e,a=null),Qn(o,l,1,n,r),e=o.base,a&&e!==a&&(a._component=null,Gn(a,!1)));return e}(e,t,n,r);if(Un="svg"===l||"foreignObject"!==l&&Un,l=String(l),(!e||!Dn(e,l))&&(s=l,(c=Un?document.createElementNS("http://www.w3.org/2000/svg",s):document.createElement(s)).normalizedNodeName=s,i=c,e)){for(;e.firstChild;)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),Gn(e,!0)}var u=i.firstChild,f=i.__preactattr_,p=t.children;if(null==f){f=i.__preactattr_={};for(var d=i.attributes,h=d.length;h--;)f[d[h].name]=d[h].value}return!Hn&&p&&1===p.length&&"string"==typeof p[0]&&null!=u&&void 0!==u.splitText&&null==u.nextSibling?u.nodeValue!=p[0]&&(u.nodeValue=p[0]):(p&&p.length||null!=u)&&function(e,t,n,r,o){var i,a,s,c,l,u=e.childNodes,f=[],p={},d=0,h=0,g=u.length,m=0,b=t?t.length:0;if(0!==g)for(var v=0;v<g;v++){var y=u[v],w=y.__preactattr_;null!=(k=b&&w?y._component?y._component.__key:w.key:null)?(d++,p[k]=y):(w||(void 0!==y.splitText?!o||y.nodeValue.trim():o))&&(f[m++]=y)}if(0!==b)for(v=0;v<b;v++){var k;if(l=null,null!=(k=(c=t[v]).key))d&&void 0!==p[k]&&(l=p[k],p[k]=void 0,d--);else if(h<m)for(i=h;i<m;i++)if(void 0!==f[i]&&In(a=f[i],c,o)){l=a,f[i]=void 0,i===m-1&&m--,i===h&&h++;break}l=Jn(l,c,n,r),s=u[v],l&&l!==e&&l!==s&&(null==s?e.appendChild(l):l===s.nextSibling?qn(s):e.insertBefore(l,s))}if(d)for(var v in p)void 0!==p[v]&&Gn(p[v],!1);for(;h<=m;)void 0!==(l=f[m--])&&Gn(l,!1)}(i,p,n,r,Hn||null!=f.dangerouslySetInnerHTML),function(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||Rn(e,r,n[r],n[r]=void 0,Un);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||Rn(e,r,n[r],n[r]=t[r],Un)}(i,t.attributes,f),Un=a,i}function Gn(e,t){var n=e._component;n?tr(n):(null!=e.__preactattr_&&Tn(e.__preactattr_.ref,null),!1!==t&&null!=e.__preactattr_||qn(e),Vn(e))}function Vn(e){for(e=e.lastChild;e;){var t=e.previousSibling;Gn(e,!0),e=t}}var Yn=[];function Xn(e,t,n){var r,o=Yn.length;for(e.prototype&&e.prototype.render?(r=new e(t,n),nr.call(r,t,n)):((r=new nr(t,n)).constructor=e,r.render=Kn);o--;)if(Yn[o].constructor===e)return r.nextBase=Yn[o].nextBase,Yn.splice(o,1),r;return r}function Kn(e,t,n){return this.constructor(e,n)}function Qn(e,t,n,r,o){e._disable||(e._disable=!0,e.__ref=t.ref,e.__key=t.key,delete t.ref,delete t.key,void 0===e.constructor.getDerivedStateFromProps&&(!e.base||o?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r)),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===_n.syncComponentUpdates&&e.base?Nn(e):er(e,1,o)),Tn(e.__ref,e))}function er(e,t,n,r){if(!e._disable){var o,i,a,s=e.props,c=e.state,l=e.context,u=e.prevProps||s,f=e.prevState||c,p=e.prevContext||l,d=e.base,h=e.nextBase,g=d||h,m=e._component,b=!1,v=p;if(e.constructor.getDerivedStateFromProps&&(c=On(On({},c),e.constructor.getDerivedStateFromProps(s,c)),e.state=c),d&&(e.props=u,e.state=f,e.context=p,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(s,c,l)?b=!0:e.componentWillUpdate&&e.componentWillUpdate(s,c,l),e.props=s,e.state=c,e.context=l),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!b){o=e.render(s,c,l),e.getChildContext&&(l=On(On({},l),e.getChildContext())),d&&e.getSnapshotBeforeUpdate&&(v=e.getSnapshotBeforeUpdate(u,f));var y,w,k=o&&o.nodeName;if("function"==typeof k){var x=Pn(o);(i=m)&&i.constructor===k&&x.key==i.__key?Qn(i,x,1,l,!1):(y=i,e._component=i=Xn(k,x,l),i.nextBase=i.nextBase||h,i._parentComponent=e,Qn(i,x,0,l,!1),er(i,1,n,!0)),w=i.base}else a=g,(y=m)&&(a=e._component=null),(g||1===t)&&(a&&(a._component=null),w=Wn(a,o,l,n||!d,g&&g.parentNode,!0));if(g&&w!==g&&i!==m){var S=g.parentNode;S&&w!==S&&(S.replaceChild(w,g),y||(g._component=null,Gn(g,!1)))}if(y&&tr(y),e.base=w,w&&!r){for(var _=e,E=e;E=E._parentComponent;)(_=E).base=w;w._component=_,w._componentConstructor=_.constructor}}for(!d||n?Fn.push(e):b||e.componentDidUpdate&&e.componentDidUpdate(u,f,v);e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);Bn||r||Zn()}}function tr(e){var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?tr(n):t&&(null!=t.__preactattr_&&Tn(t.__preactattr_.ref,null),e.nextBase=t,qn(t),Yn.push(e),Vn(t)),Tn(e.__ref,null)}function nr(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{},this._renderCallbacks=[]}On(nr.prototype,{setState:function(e,t){this.prevState||(this.prevState=this.state),this.state=On(On({},this.state),"function"==typeof e?e(this.state,this.props):e),t&&this._renderCallbacks.push(t),Nn(this)},forceUpdate:function(e){e&&this._renderCallbacks.push(e),er(this,2)},render:function(){}});var rr=[],or=!0;function ir(){or&&(rr=[],We.emit("backstage-recorder-update"))}function ar(e){var t=e.name,n=e.value;or&&(rr.length===un("config.backstage.trail.maxLength")&&rr.shift(),rr.push({change:{name:t,value:n},state:fn()}),We.emit("backstage-recorder-update"))}var sr=function(e){Xe(n,e);var t=tt(n);function n(e){var r;return Ge(this,n),(r=t.call(this,e)).state={open:void 0===r.props.initiallyOpen||r.props.initiallyOpen},r}return Ye(n,[{key:"toggle",value:function(){this.setState({open:!this.state.open})}},{key:"render",value:function(){var e=this;return An("div",{class:"panel"+(this.state.open?" open":"")},An("h2",null,An("button",{className:"small-caps",onClick:function(){return e.toggle()}},this.props.title)),this.state.open&&An("div",{class:"content"},this.props.children))}}]),n}(nr);function cr(e){if(0===e.length)return[];var t,n=[],r=[];return e.forEach((function(e,o){var i=e.change;"trail"===i.name?(n.push({historyIndex:o-1,passage:t,varChanges:r}),r=[],t=i.value[i.value.length-1]):r.push({name:i.name,value:i.value})})),n.push({historyIndex:e.length-1,passage:t,varChanges:r}),console.log("Parsed",e,n),n}function lr(e){var t=e.historyIndex,n=e.passage,r=e.varChanges,o=[An("tr",null,An("td",{class:"actions",rowspan:r.length+1},An("button",{onClick:t>=0?function(){return function(e){if(!rr[e])throw new Error("There is no history at index ".concat(e," to rewind to."));or=!1,pn(rr[e].state),rr.length=e+1,or=!0,We.emit("backstage-recorder-update")}(t)}:on},"↪")),An("td",{class:"go",rowspan:r.length+1,colspan:r.length>0?1:2},n?'Go to "'.concat(n,'"'):"Startup"))];return r.forEach((function(e){o.push(An("tr",null,An("td",null,e.name," ← ",JSON.stringify(e.value))))})),o}var ur=function(e){Xe(n,e);var t=tt(n);function n(e){var r;return Ge(this,n),(r=t.call(this,e)).state={history:cr(rr)},r.updateBound=function(){return r.update()},r}return Ye(n,[{key:"update",value:function(){this.setState({history:cr(rr)})}},{key:"render",value:function(){var e;return e=this.state.history.length>0?An("table",{class:"history"},this.state.history.map(lr)):An("table",{class:"history"},An("tr",null,An("td",{class:"actions"},An("button",{onClick:on},"↪")),An("td",{class:"go"},"Startup"))),An(sr,{title:"History"},e)}},{key:"componentDidMount",value:function(){We.on("backstage-recorder-update",this.updateBound)}},{key:"componentDidUnmount",value:function(){We.removeEventListener("backstage-recorder-update",this.updateBound)}}]),n}(nr),fr="[object Symbol]",pr=/[&<>"'`]/g,dr=RegExp(pr.source),hr="object"==typeof e&&e&&e.Object===Object&&e,gr="object"==typeof self&&self&&self.Object===Object&&self,mr=hr||gr||Function("return this")();var br,vr=(br={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},function(e){return null==br?void 0:br[e]}),yr=Object.prototype.toString,wr=mr.Symbol,kr=wr?wr.prototype:void 0,xr=kr?kr.toString:void 0;function Sr(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&yr.call(e)==fr}(e))return xr?xr.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}var _r=function(e){var t;return(e=null==(t=e)?"":Sr(t))&&dr.test(e)?e.replace(pr,vr):e},Er=function(e){Xe(n,e);var t=tt(n);function n(e){var r;Ge(this,n),r=t.call(this,e);var o=un("trail");return r.state={currentPassage:o[o.length-1],notes:{}},r.restore(),r.syncBound=function(e){return r.sync(e)},r}return Ye(n,[{key:"sync",value:function(e){var t=e.name,n=e.value;"trail"===t&&this.setState({currentPassage:n[n.length-1]})}},{key:"restore",value:function(){var e=window.localStorage.getItem("cb-passage-notes-".concat(un("config.state.saveKey")));e&&this.setState({notes:JSON.parse(e)})}},{key:"save",value:function(){window.localStorage.setItem("cb-passage-notes-".concat(un("config.state.saveKey")),JSON.stringify(this.state.notes))}},{key:"saveNote",value:function(e,t){var n=Object.assign({},this.state.notes);n[e]=t,this.setState({notes:n}),this.save()}},{key:"export",value:function(){var e=this,t=Object.keys(this.state.notes).reduce((function(t,n){return t+'<li class="note"><span class="passage">'.concat(_r(n),"</span><pre>").concat(_r(e.state.notes[n]),"</pre></li>")}),""),n=document.createElement("a");n.setAttribute("download","".concat(un("story.name")," Notes - ").concat((new Date).toDateString()," ").concat((new Date).toTimeString(),".html")),n.setAttribute("href","data:text/html;base64,"+window.btoa("<style>body {font-family: sans-serif}</style><h1>Notes for &ldquo;".concat(_r(un("story.name")),'&rdquo;</h1><ul data-cb-backstage-notes data-cb-version="').concat(un("engine.version"),'">').concat(t,"</ul>"))),document.body.appendChild(n),n.click(),document.body.removeChild(n)}},{key:"startImport",value:function(){this.upload.click()}},{key:"import",value:function(e){var t=this,n=this.upload.files[0];if(n){var r=new FileReader(n);r.onload=function(e){var n=document.createElement("div"),r=Object.assign({},t.state.notes),o=0;n.innerHTML=e.target.result;var i=It(n,"ul[data-cb-backstage-notes] li");0!==i.length?(i.forEach((function(e){var t=$t(e,"span.passage"),n=$t(e,"pre");t&&n&&(r[t.textContent]=(r[t.textContent]||"")+"\n\n"+n.textContent,o++)})),t.setState({notes:r}),t.save(),window.alert("".concat(o," note(s) were imported."))):window.alert("No notes were found in this file.")},r.readAsText(n)}}},{key:"deleteAll",value:function(){window.confirm("Are you sure? This will delete all text entered in the Notes panel of Backstage, and cannot be undone.")&&(this.setState({notes:{}}),this.save())}},{key:"render",value:function(){var e=this;return An("div",null,An("p",null,An("label",null,"Notes on “",this.state.currentPassage,"”")),An("p",null,An("textarea",{value:this.state.notes[this.state.currentPassage],onInput:function(t){return e.saveNote(e.state.currentPassage,t.target.value)}})),An("p",null,An("button",{onClick:function(){return e.export()}},"Export All Notes"),An("button",{onClick:function(){return e.startImport()}},"Import Notes From File"),An("button",{onClick:function(){return e.deleteAll()}},"Delete All Notes")),An("input",{type:"file",hidden:!0,ref:function(t){return e.upload=t},onChange:function(){return e.import()}}))}},{key:"componentDidMount",value:function(){We.on("state-change",this.syncBound)}},{key:"componentDidUnmount",value:function(){We.removeListener("state-change",this.syncBound)}}]),n}(nr),Cr=function(e){Xe(n,e);var t=tt(n);function n(e){var r;return Ge(this,n),(r=t.call(this,e)).state={snapshots:[]},r.restore(),r}return Ye(n,[{key:"addSnapshot",value:function(){var e=window.prompt("Enter a name for this snapshot:");e&&this.setState({snapshots:this.state.snapshots.concat({name:e,state:fn()})})}},{key:"loadSnapshot",value:function(e){pn(this.state.snapshots[e].state)}},{key:"deleteSnapshot",value:function(e){window.confirm('Are you sure you want to delete the snapshot "'.concat(this.state.snapshots[e].name,'"? This cannot be undone.'))&&this.setState({snapshots:this.state.snapshots.filter((function(t,n){return n!==e}))})}},{key:"save",value:function(){window.localStorage.setItem("cb-snapshots-".concat(un("config.state.saveKey")),JSON.stringify(this.state.snapshots))}},{key:"restore",value:function(){var e=window.localStorage.getItem("cb-snapshots-".concat(un("config.state.saveKey")));e&&this.setState({snapshots:JSON.parse(e)})}},{key:"render",value:function(){var e=this,t=this.state.snapshots.map((function(t,n){return An("div",{class:"segmented-button block"},An("button",{onClick:function(){return e.loadSnapshot(n)},title:'Load snapshot "{s.name}"'},t.name),An("button",{onClick:function(){return e.deleteSnapshot(n)},class:"fixed",title:'Delete snapshot "{s.name}"'},An("strong",null,"×")))}));return An(sr,{title:"Snapshots"},t,An("button",{class:"block",onClick:function(){return e.addSnapshot()}},"Add Snapshot"))}},{key:"componentDidUpdate",value:function(){this.save()}}]),n}(nr),Ar=function(e){Xe(n,e);var t=tt(n);function n(e){var r;return Ge(this,n),(r=t.call(this,e)).state={varNames:[],showDefaults:!1},r.syncBound=function(){return r.syncWithState()},r}return Ye(n,[{key:"syncWithState",value:function(){this.setState({varNames:vn(this.state.showDefaults)})}},{key:"onChangeDefaults",value:function(e){this.setState({showDefaults:e.target.checked})}},{key:"onChangeVar",value:function(e,t){sn(t,JSON.parse(e.target.value))}},{key:"render",value:function(){var e=this;return An(sr,{title:"Variables"},An("p",null,An("input",{type:"checkbox",id:"cb-backstage-show-defaults",checked:this.state.showDefaults,onChange:function(t){return e.onChangeDefaults(t)}}),An("label",{for:"cb-backstage-show-defaults"},"Show Defaults")),An("table",null,this.state.varNames.map((function(t){return An("tr",null,An("td",null,t),An("td",null,An("input",{type:"text",value:JSON.stringify(un(t)),onChange:function(n){return e.onChangeVar(n,t)}})))}))))}},{key:"componentWillMount",value:function(){this.syncWithState(),We.on("state-change",this.syncBound)}},{key:"componentDidUpdate",value:function(e,t){t.showDefaults!==this.state.showDefaults&&this.syncWithState()}},{key:"componentWillUnmount",value:function(){We.removeListener("state-change",this.syncBound)}}]),n}(nr);function Or(){return An("div",null,An(Ar,null),An(Cr,null))}var Tr=["page","page.header","page.footer"].reduce((function(e,t){return e.concat(["config.style.".concat(t,".font"),"config.style.".concat(t,".color"),"config.style.".concat(t,".link.font"),"config.style.".concat(t,".link.color"),"config.style.".concat(t,".link.lineColor"),"config.style.".concat(t,".link.active.font"),"config.style.".concat(t,".link.active.color"),"config.style.".concat(t,".link.active.lineColor")])}),[]),jr=function(e){Xe(n,e);var t=tt(n);function n(e){var r;return Ge(this,n),(r=t.call(this,e)).state=Tr.reduce((function(e,t){return e[t]=un(t),e}),{}),r.onStateChangeBound=function(e){var t=e.name,n=e.value;return r.onStateChange(t,n)},r}return Ye(n,[{key:"onStateChange",value:function(e,t){this.state[e]&&this.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,t))}},{key:"render",value:function(){var e=Object.keys(this.state).reduce((function(e,t){var n=un(t);return n?e+"".concat(t,": ").concat(JSON.stringify(n),"\n"):e}),"").trim();return An(sr,{title:"Config"},An("p",null,An("label",{for:"cb-backstage-style-config"},"Enter this code into your first passage’s vars section to permanently use this style:")),An("p",null,An("textarea",{readonly:!0,id:"cb-backstage-style-config",onClick:function(e){return e.target.select()}},e)))}},{key:"componentWillMount",value:function(){We.on("state-change",this.onStateChangeBound)}},{key:"componentWillUnmount",value:function(){We.removeListener("state-change",this.onStateChangeBound)}}]),n}(nr);function zr(e){var t=e.label,n=e.binding;return An("p",{class:"input-group"},An("label",{for:"cb-backstage-".concat(n)},t),An("input",{type:"text",id:"cb-backstage-".concat(n),value:un(n),onChange:function(e){return sn(n,e.target.value)}}))}function Lr(e){var t=e.title,n=e.prefix;return An(sr,{title:t,initiallyOpen:!1},An(zr,{label:"Font",binding:"config.style.".concat(n,".font")}),An(zr,{label:"Color",binding:"config.style.".concat(n,".color")}),An(zr,{label:"Link Font",binding:"config.style.".concat(n,".link.font")}),An(zr,{label:"Link Color",binding:"config.style.".concat(n,".link.color")}),An(zr,{label:"Link Line Color",binding:"config.style.".concat(n,".link.lineColor")}),An(zr,{label:"Active Link Font",binding:"config.style.".concat(n,".link.active.font")}),An(zr,{label:"Active Link Color",binding:"config.style.".concat(n,".link.active.color")}),An(zr,{label:"Active Link Line Color",binding:"config.style.".concat(n,".link.active.lineColor")}))}function Nr(){return An("div",null,An(jr,null),An(Lr,{title:"Page",prefix:"page"}),An(Lr,{title:"Header",prefix:"page.header"}),An(Lr,{title:"Footer",prefix:"page.footer"}))}var $r=function(e){Xe(n,e);var t=tt(n);function n(e){var r;return Ge(this,n),(r=t.call(this,e)).state={selected:0},r}return Ye(n,[{key:"select",value:function(e){this.setState({selected:e})}},{key:"render",value:function(){var e=this,t=this.props.children.map((function(t,n){return An("li",null,An("button",{onClick:function(){return e.select(n)},class:n===e.state.selected&&"active"},t.attributes.label))}));return An("div",null,An("ul",{class:"tabs"},t),An("div",{class:"tab-content"},this.props.children[this.state.selected]))}}]),n}(nr),Ir=function(e){Xe(n,e);var t=tt(n);function n(e){var r;return Ge(this,n),(r=t.call(this,e)).state={open:!0},r}return Ye(n,[{key:"setBodyClass",value:function(){this.state.open?document.body.classList.add("backstage-visible"):document.body.classList.remove("backstage-visible")}},{key:"toggle",value:function(){this.setState({open:!this.state.open})}},{key:"render",value:function(){var e=this,t=this.state.open?{icon:"→",text:"Close"}:{icon:"←",text:"Open"};return An("div",{id:"backstage",class:this.state.open&&"open"},An("button",{onClick:function(t){return e.toggle()},title:t.text+" backstage panel",class:"toggle-visibility"},t.icon),An($r,null,An(Or,{label:"State"}),An(ur,{label:"History"}),An(Nr,{label:"Style"}),An(Er,{label:"Notes"})))}},{key:"componentDidMount",value:function(){this.setBodyClass()}},{key:"componentDidUpdate",value:function(){this.setBodyClass()}}]),n}(nr);function Dr(){We.on("state-change",ar),We.on("state-reset",ir),function(e,t,n){Wn(n,e,{},!1,t,!1)}(An(Ir,null),document.body)}var Pr=Object.freeze({__proto__:null,Backstage:Ir,init:Dr}),qr={match:/^(no )?ambient\s+sound/i,render:function(e,t){var n=un("sound.ambient");if(n&&Object.keys(n).forEach((function(t){t!==e&&n[t].playing&&sn("sound.ambient.".concat(t,".playing"),!1)})),e){var r=un("sound.ambient.".concat(e,".description"))||"";return t.volume&&sn("sound.ambient.".concat(e,".volume"),t.volume),sn("sound.ambient.".concat(e,".playing"),!0),"<audio>".concat(r,"</audio>")}}};function Rr(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=document.createElement(e),o=0,i=Object.keys(t);o<i.length;o++){var a=i[o];void 0!==t[a]&&r.setAttribute(a,t[a])}var s,c=at(n);try{for(c.s();!(s=c.n()).done;){var l=s.value;"string"==typeof l||"number"==typeof l?r.appendChild(document.createTextNode(l.toString())):r.appendChild(l)}}catch(e){c.e(e)}finally{c.f()}return r}function Mr(){return Rr.apply(void 0,arguments).outerHTML}function Fr(e,t){return/^\w+:\/\/\/?\w/i.test(e)?Mr("a",{href:e},[t||e]):Mr("a",{href:"javascript:void(0)","data-cb-go":e},[t||e])}function Br(e){return e.replace(/\[\[(.*?)\]\]/g,(function(e,t){var n=t,r=t.indexOf("|");if(-1!==r)n=t.substr(0,r),t=t.substr(r+1);else{var o=t.indexOf("->");if(-1!==o)n=t.substr(0,o),t=t.substr(o+2);else{var i=t.indexOf("<-");-1!==i&&(n=t.substr(i+2),t=t.substr(0,i))}}return Fr(t,n||t)}))}var Ur={match:/^back\s+link/i,render:function(e,t){var n=un("trail");return Fr(n.length>1?n[n.length-2]:n[0],t.label||"Back")}};var Hr=function(e,t,n){n=Object.assign({},Zr,n||{});let r=0,o=function(e){let t={ms:.001,s:1,m:60,h:3600};return t.d=e.hoursPerDay*t.h,t.w=e.daysPerWeek*t.d,t.mth=e.daysPerYear/e.monthsPerYear*t.d,t.y=e.daysPerYear*t.d,t}(n),i=e.toLowerCase().replace(/[^.\w+-]+/g,"").match(/[-+]?[0-9.]+[a-z]+/g);null!==i&&i.forEach((e=>{let t=e.match(/[0-9.]+/g)[0],n=e.match(/[a-z]+/g)[0];r+=function(e,t,n){return e*n[Jr(t)]}(t,n,o)}));if(t)return function(e,t,n){return e/n[Jr(t)]}(r,t,o);return r};const Zr={hoursPerDay:24,daysPerWeek:7,weeksPerMonth:4,monthsPerYear:12,daysPerYear:365.25},Wr={ms:["ms","milli","millisecond","milliseconds"],s:["s","sec","secs","second","seconds"],m:["m","min","mins","minute","minutes"],h:["h","hr","hrs","hour","hours"],d:["d","day","days"],w:["w","week","weeks"],mth:["mon","mth","mths","month","months"],y:["y","yr","yrs","year","years"]};function Jr(e){for(let t of Object.keys(Wr))if(Wr[t].indexOf(e)>-1)return t;throw new Error(`The unit [${e}] is not supported by timestring`)}function Gr(e){"static"===window.getComputedStyle(e).position&&(e.style.position="relative")}function Vr(e){var t=document.createElement(e.nodeName.toLowerCase());return t.innerHTML=e.innerHTML,t.style.width=e.clientWidth+"px",t.style.height=e.clientHeight+"px",t.setAttribute("aria-hidden",!0),t.style.pointerEvents="none",It(t,"audio").forEach((function(e){return e.parentNode.removeChild(e)})),t}function Yr(e){try{var t="";t=(t=e.error&&e.error.stack?e.message+"\n\nStack trace:\n"+e.error.stack:e.message+"\n\n[No stack trace available]").replace("\nPlease report this to https://github.com/chjj/marked.","");var n=document.createElement("div"),r=document.querySelector("#page article"),o=un("trail");n.className="error",n.innerHTML="\n\t\t\t<p>\n\t\t\tAn unexpected error has occurred.\n\t\t\t</p>\n\t\t\t<pre>".concat(un("config.testing")?t:"",'</pre>\n\t\t\t<ul>\n\t\t\t\t<li>\n\t\t\t\t\t<a href="javascript:void(0)" ').concat(o.length>1?"data-cb-back":"data-cb-refresh",'>Go back</a> to the previous passage.\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<a href="javascript:void(0)" data-cb-hard-restart>Hard restart</a>, clearing all progress and beginning from the start.\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t'),n.addEventListener("click",(function(e){if(e.target.closest("[data-cb-back]")){var t=un("trail");Array.isArray(t)?sn("trail",t.slice(0,t.length-1)):window.alert("Sorry, going back was not successful. Please try hard restarting.")}else{if(e.target.closest("[data-cb-refresh]"))sn("trail",rt(un("trail")));else e.target.closest("[data-cb-hard-restart]")&&(bn(!0),window.location.reload())}})),r.innerHTML="",r.appendChild(n)}catch(e){console.error(e)}}var Xr,Kr,Qr,eo={crossfade:function(e,t,n){return new Promise((function(r){var o=e.style.pointerEvents,i=Hr(n,"s");Gr(e),e.style.pointerEvents="none";var a=document.createElement("div");if(a.innerHTML=t,a.className="fade-in",a.style.animationDuration=i+"s",a.addEventListener("animationend",(function t(){a.removeEventListener("animationend",t),a.style.animationDuration=null,a.className="",e.style.pointerEvents=o,r()})),""!==e.innerHTML.trim()){var s=Vr(e);s.style.position="absolute",s.style.top="0",s.style.left="0",s.className="fade-out",s.style.animationDuration=i+"s",s.addEventListener("animationend",(function e(){s.removeEventListener("animationend",e),s.style.opacity=.5,s.parentNode.removeChild(s)})),e.innerHTML="",e.appendChild(a),e.appendChild(s)}else e.innerHTML="",e.appendChild(a)}))},fadeInOut:function(e,t,n){return new Promise((function(r){var o=e.style.pointerEvents,i=Hr(n,"s")/2;Gr(e),e.style.pointerEvents="none";var a=document.createElement("div");if(a.innerHTML=t,a.style.visibility="hidden",a.style.animationDuration=i+"s",a.addEventListener("animationend",(function t(){a.removeEventListener("animationend",t),a.className="",a.style.animationDuration=i+"s",e.style.pointerEvents=o,r()})),""!==e.innerHTML.trim()){var s=Vr(e);s.style.position="absolute",s.style.top="0",s.style.left="0",s.className="fade-out",s.style.animationDuration=i+"s",s.addEventListener("animationend",(function e(){s.removeEventListener("animationend",e),s.parentNode.removeChild(s),a.style.visibility="visible",a.className="fade-in"})),e.innerHTML="",e.appendChild(a),e.appendChild(s)}else a.className="fade-in",a.animationDuration=2*i,a.style.visibility="visible",a.className="fade-in",e.appendChild(a)}))},none:function(e,t){return new Promise((function(n){e.innerHTML="<div>".concat(t,"</div>"),n()}))}},to={"config.body.transition.name":"crossfade","config.body.transition.duration":"500ms","config.header.left":"","config.header.center":"","config.header.right":"","config.header.transition.name":"none","config.header.transition.duration":"500ms","config.footer.left":"_{story.name}_","config.footer.center":"","config.footer.right":"{restart link}","config.footer.transition.name":"none","config.footer.transition.duration":"500ms"};function no(e,t,n,r){eo[n]?eo[n](e,t,r):eo.none(e,t)}var ro,oo,io,ao=(ro=function(e){if(e.some((function(e){return e[0]}))){var t=un("trail"),n=Jt(t[t.length-1]);if(!n)throw new Error('There is no passage named "'.concat(t[t.length-1],'".'));window.scrollTo(0,0),no(Xr,fa(n.source),un("config.body.transition.name"),un("config.body.transition.duration")),function(e,t){var n,r=Date.now(),o=It(e,"[data-cb-skippable]").map((function(e){return{el:e,delay:1e3*Hr(window.getComputedStyle(e).animationDelay)}})).sort((function(e,t){return e.delay-t.delay}));function i(){var e=Date.now()-r,t=Object.assign({},o.find((function(t){return t.delay>e})));t?(o.forEach((function(e){e.delay<=t.delay?(e.delay=0,e.el.classList.add("skip-animation")):(e.delay-=t.delay,e.el.style.animationDelay="".concat(e.delay,"ms"))})),r=Date.now(),window.clearTimeout(n),a()):s()}function a(){n&&window.clearTimeout(n),n=window.setTimeout(s,o[o.length-1].delay)}function s(){t.classList.remove("visible"),document.body.removeEventListener("click",i),document.body.removeEventListener("keyup",i)}0!==o.length&&(t.classList.add("visible"),a(),window.setTimeout((function(){document.body.addEventListener("click",i),document.body.addEventListener("keyup",i)}),50))}(Xr,Qr)}["header","footer"].forEach((function(e){Kr[e].container.classList.remove("has-content"),["left","center","right"].forEach((function(t){var n=fa(un("config.".concat(e,".").concat(t)));""!==n&&Kr[e].container.classList.add("has-content"),no(Kr[e][t],n,un("config.".concat(e,".transition.name")),un("config.".concat(e,".transition.duration")))}))}))},oo=[],io=!1,function(){io||(io=!0,Promise.resolve().then((function(){try{ro(oo)}catch(e){window.setTimeout((function(){throw e}),0)}oo=[],io=!1})));for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];oo.push(t)});function so(e){It(Xr,"input").forEach((function(e){e.setAttribute("value",e.value)})),It(Xr,"select").forEach((function(e){for(var t=0;t<e.options.length;t++)t===e.options.selectedIndex?e.options[t].setAttribute("selected",""):e.options[t].removeAttribute("selected")}));for(var t={x:window.scrollX,y:window.scrollY},n=Xr.innerHTML,r=document.createElement("div");Xr.firstChild;)r.insertBefore(Xr.firstChild,r.firstChild);Xr.innerHTML=n,e(r),window.scrollX=t.x,window.scrollY=t.y,no(Xr,r.innerHTML,un("config.body.transition.name"),un("config.body.transition.duration"))}var co={match:/^cycling\s+link(\s+for)?/i,render:function(e,t){var n;return e?void 0===(n=un(e))&&(sn(e,t.choices[0]),n=t.choices[0]):n=t.choices[0],Mr("a",{href:"javascript:void(0)","data-cb-cycle-set":null!=e?e:void 0,"data-cb-cycle-choices":JSON.stringify(t.choices)},[n])}};We.on("dom-click",(function(e){if(e.dataset.cbCycleChoices){var t=JSON.parse(e.dataset.cbCycleChoices),n=t.map((function(e){return"string"==typeof e?e:e.toString()})).indexOf(e.textContent)+1;n===t.length&&(n=0),so((function(){return e.textContent=t[n]})),e.dataset.cbCycleSet&&sn(e.dataset.cbCycleSet,t[n])}}));var lo={match:/^embed\s+flickr(\s+image)?/i,render:function(e,t){return Mr("img",Object.assign({},t,{src:/img src="(.+?)"/.exec(e)[1]}))}},uo={match:/^embed\s+image?/i,render:function(e,t){return Mr("img",Object.assign({},t,{src:e}))}},fo={match:/^embed\s+passage(\s+named)?/i,render:function(e){return fa(Jt(e).source)}},po={match:/^embed\s+unsplash(\s+image)?/i,render:function(e,t){return Mr("img",Object.assign({},t,{src:"https://source.unsplash.com/".concat(e.replace(/.*\//,""),"/").concat(t.width,"x").concat(t.height)}))}},ho={match:/^embed\s+youtube(\s+video)?/i,render:function(e,t){var n="https://www.youtube-nocookie.com/embed/".concat(e.replace(/.*\?v=/,""),"?modestbranding=1&rel=0&controls=").concat(t.controls?1:0,"&");return t.autoplay&&(n+="autoplay=1&"),t.loop&&(n+="loop=1&"),Mr("div",{style:"position: relative; height: 0; padding-bottom: 56.25%; margin-bottom: 1em"},[Rr("iframe",{src:n,frameBorder:0,style:"position: absolute; top: 0; left: 0; width: 100%; height: 100%"})])}},go={match:/^link\s+to/i,render:function(e,t){return Fr(e,t.label)}},mo={match:/^dropdown menu(\s+for)?/i,render:function(e,t){var n;return e&&void 0===(n=un(e))&&(sn(e,t.choices[0]),n=t.choices[0]),Mr("select",{"data-cb-menu-choices":JSON.stringify(t.choices),"data-cb-menu-set":null!=e?e:void 0},t.choices.map((function(t){var r={value:t};return e&&n===t&&(r.selected=""),Rr("option",r,[t])})))}};We.on("dom-change",(function(e){if(e.dataset.cbMenuSet){var t=JSON.parse(e.dataset.cbMenuChoices),n=e.querySelectorAll("option")[e.selectedIndex].value,r=t.map((function(e){return"string"==typeof e?e:e.toString()})).findIndex((function(e){return e===n}));-1!==r&&sn(e.dataset.cbMenuSet,t[r])}}));var bo={match:/^restart\s+link/i,render:function(e,t){return Mr("a",{href:"javascript:void(0)","data-cb-restart":!0},[t.label||"Restart"])}},vo={match:/^reveal\s+link/i,render:function(e,t){return t.text?Mr("a",{href:"javascript:void(0)","data-cb-reveal-text":t.text},[e]):t.passage?Mr("a",{href:"javascript:void(0)","data-cb-reveal-passage":t.passage},[e]):void 0}};We.on("dom-click",(function(e){var t=e.dataset.cbRevealText;if(e.dataset.cbRevealPassage&&(t=Jt(e.dataset.cbRevealPassage).source),t){var n=document.createElement("div");n.innerHTML=fa(t).trim(),so((function(){var t=n.children.length;if(t>0){var r=document.createElement("span");if(r.innerHTML=n.firstChild.innerHTML,e.parentNode.insertBefore(r,e),n.removeChild(n.firstChild),t>1){for(var o=n.lastChild;n.lastChild;)e.parentNode.parentNode.insertBefore(n.lastChild,e.parentNode.nextSibling);for(;e.nextSibling;)o.insertBefore(e.nextSibling,null)}}e.parentNode.removeChild(e)}))}}));var yo={match:/^sound\s+effect/i,render:function(e,t){var n=un("sound.effect.".concat(e,".description"))||"";return t.volume&&sn("sound.effect.".concat(e,".volume"),t.volume),sn("sound.effect.".concat(e,".playing"),!0),"<audio>".concat(n,"</audio>")}},wo={match:/^text\s+input(\s+for)?/i,render:function(e,t){return Mr("input",{type:"text",value:e?un(e):"","data-cb-text-field-set":e||void 0,required:!1!==t.required?"":void 0})}};We.on("dom-change",(function(e){e.dataset.cbTextFieldSet&&sn(e.dataset.cbTextFieldSet,e.value)}));var ko=[qr,Ur,co,lo,uo,fo,po,ho,go,mo,bo,vo,yo,wo],xo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="<span"+Object.keys(t).reduce((function(e,n){return e+" ".concat(n,'="').concat(t[n],'"')}),"")+">",r=n+e.replace(/[\r\n]{2,}/g,"</span>$&".concat(n))+"</span>";return r=r.replace(/(<span.*?>)\s*(#+)/gi,"$2 $1")},So={match:/^after\s/i,process:function(e,t){var n=t.invocation,r=Hr(n.replace(/^after\s/i,""),"ms");e.text=xo(e.text,{"data-cb-skippable":"",class:"fade-in",style:"animation-delay: ".concat(r,"ms")})}},_o={match:/^align\s+(left|right|center)/i,process:function(e,t){var n=t.invocation.replace(/^align\s+/i,"");e.text=xo(e.text,{style:"display: block; text-align: ".concat(n)})}},Eo={match:/^if(always|never)?\s|else$|unless\s/i,processRaw:function(e,t){var n,r=t.invocation,o=t.state,i=r.replace(/\s.*/,"").toLowerCase();switch("else"!==i&&(n=new Function("return "+r.replace(/.*?\s/,""))),i){case"if":o.conditionEval=n.apply(window);break;case"ifalways":o.conditionEval=!0;break;case"ifnever":o.conditionEval=!1;break;case"unless":o.conditionEval=!n.apply(window);break;case"else":if(void 0===o.conditionEval)throw new Error("There was no matching if modifier for an else modifier.");o.conditionEval=!o.conditionEval}o.conditionEval||(e.text="")}},Co="[object Symbol]",Ao=/&(?:amp|lt|gt|quot|#39|#96);/g,Oo=RegExp(Ao.source),To="object"==typeof e&&e&&e.Object===Object&&e,jo="object"==typeof self&&self&&self.Object===Object&&self,zo=To||jo||Function("return this")();var Lo=function(e){return function(t){return null==e?void 0:e[t]}}({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"}),No=Object.prototype.toString,$o=zo.Symbol,Io=$o?$o.prototype:void 0,Do=Io?Io.toString:void 0;function Po(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&No.call(e)==Co}(e))return Do?Do.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}var qo=function(e){var t;return(e=null==(t=e)?"":Po(t))&&Oo.test(e)?e.replace(Ao,Lo):e},Ro={match:/^javascript$/i,process:function(e){try{var t=new Function("\n\t\t\t\t\t\tfunction write() { write.__out += write.__join.call(arguments, ''); }\n\t\t\t\t\t\twrite.__out = '';\n\t\t\t\t\t\twrite.__join = Array.prototype.join;\n\t\t\t\t\t\t".concat(qo(e.text),";\n\t\t\t\t\t\treturn write.__out;\n\t\t\t\t\t"));e.text=t.apply(window)}catch(t){if(!un("config.testing"))throw t;var n="unknown error";n=t.error&&t.error.stack?t.error.stack:t.message+"\n[No stack trace available]",e.text='<div class="error">An error occured evaluating:<pre>'.concat(e.text,"</pre><p><pre>").concat(n,"</pre></p></div>")}}},Mo=[So,_o,{match:/^append$/i,process:function(e){e.startsNewParagraph=!1}},Eo,{match:/^continued?|cont('d)?$/i,process:function(){}},{match:/^css$/i,process:function(e){e.text="<style>".concat(e.text,"</style>")}},Ro,{match:/^(note(\s+to\s+self)?|n?b?|todo|fixme)$/i,process:function(e){e.text=""}}],Fo=function(e,t){if("string"!=typeof e)throw new TypeError("Expected a string in the first argument, got "+typeof e);if(!(t&&t.preserveNewlines))return e.split(/\r?\n/);for(var n=e.split(/(\r?\n)/),r=[],o=0;o<n.length;o+=2)r.push(n[o]+(n[o+1]||""));return r},Bo=Nt("parse"),Uo=Bo.log,Ho=Bo.warn,Zo={varsSep:/^--$/m,modifierPattern:/^\[([^[].+[^\]])\]$/gm};function Wo(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zo,o={vars:[],blocks:[]},i=e.split(r.varsSep,2);if(2===i.length){Uo("Detected vars section");var a=nt(i,2);t=a[0],n=a[1],Fo(t).forEach((function(e){if(""!==e.trim()){var t=e.indexOf(":");if(-1!==t){var n=e.substr(0,t).trim(),r=e.substr(t+1).trim(),i={name:n,value:new Function("return (".concat(r,")"))},a=n.match(/\(.+\)/);a?(i.condition=new Function("return (".concat(a[0],")")),i.name=(i.name.substr(0,a.index)+i.name.substr(a.index+a[0].length)).trim(),Uo('Setting variable "'.concat(i.name,'" to "').concat(r,'" with condition (').concat(a[0],")"))):Uo('Setting variable "'.concat(n,'" to "').concat(r,'" without condition')),o.vars.push(i)}else Ho('The line "'.concat(e,'" in the vars section is missing a colon. It was ignored.'))}}))}else Uo("No vars section detected"),n=i[0];for(var s=function(e,t){var n=t.trim();""!==n&&(Uo("Creating '".concat(e,"' block with content: \"").concat(n,'"')),o.blocks.push({type:e,content:n}))},c=new RegExp(r.modifierPattern),l=0,u=c.exec(n);u;){s("text",n.substring(l,u.index));for(var f=u[1],p="",d=0;d<f.length;d++)switch(f[d]){case'"':for(p+='"',d+=1;d<f.length&&(p+=f[d],'"'!==f[d]||"\\"===f[d-1]);d++);break;case";":s("modifier",p),p="";break;default:p+=f[d]}s("modifier",p),l=c.lastIndex,u=c.exec(n)}return s("text",n.substring(l)),o}var Jo={exports:{}};function Go(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}Jo.exports={defaults:{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1},getDefaults:Go,changeDefaults:function(e){Jo.exports.defaults=e}};const Vo=/[&<>"']/,Yo=/[&<>"']/g,Xo=/[<>"']|&(?!#?\w+;)/,Ko=/[<>"']|&(?!#?\w+;)/g,Qo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ei=e=>Qo[e];const ti=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function ni(e){return e.replace(ti,((e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const ri=/(^|[^\[])\^/g;const oi=/[^\w:]/g,ii=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;const ai={},si=/^[^:]+:\/*[^/]*$/,ci=/^([^:]+:)[\s\S]*$/,li=/^([^:]+:\/*[^/]*)[\s\S]*$/;function ui(e,t){ai[" "+e]||(si.test(e)?ai[" "+e]=e+"/":ai[" "+e]=fi(e,"/",!0));const n=-1===(e=ai[" "+e]).indexOf(":");return"//"===t.substring(0,2)?n?t:e.replace(ci,"$1")+t:"/"===t.charAt(0)?n?t:e.replace(li,"$1")+t:e+t}function fi(e,t,n){const r=e.length;if(0===r)return"";let o=0;for(;o<r;){const i=e.charAt(r-o-1);if(i!==t||n){if(i===t||!n)break;o++}else o++}return e.substr(0,r-o)}var pi={escape:function(e,t){if(t){if(Vo.test(e))return e.replace(Yo,ei)}else if(Xo.test(e))return e.replace(Ko,ei);return e},unescape:ni,edit:function(e,t){e=e.source||e,t=t||"";const n={replace:(t,r)=>(r=(r=r.source||r).replace(ri,"$1"),e=e.replace(t,r),n),getRegex:()=>new RegExp(e,t)};return n},cleanUrl:function(e,t,n){if(e){let e;try{e=decodeURIComponent(ni(n)).replace(oi,"").toLowerCase()}catch(e){return null}if(0===e.indexOf("javascript:")||0===e.indexOf("vbscript:")||0===e.indexOf("data:"))return null}t&&!ii.test(n)&&(n=ui(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n},resolveUrl:ui,noopTest:{exec:function(){}},merge:function(e){let t,n,r=1;for(;r<arguments.length;r++)for(n in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},splitCells:function(e,t){const n=e.replace(/\|/g,((e,t,n)=>{let r=!1,o=t;for(;--o>=0&&"\\"===n[o];)r=!r;return r?"|":" |"})).split(/ \|/);let r=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n},rtrim:fi,findClosingBracket:function(e,t){if(-1===e.indexOf(t[1]))return-1;const n=e.length;let r=0,o=0;for(;o<n;o++)if("\\"===e[o])o++;else if(e[o]===t[0])r++;else if(e[o]===t[1]&&(r--,r<0))return o;return-1},checkSanitizeDeprecation:function(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")},repeatString:function(e,t){if(t<1)return"";let n="";for(;t>1;)1&t&&(n+=e),t>>=1,e+=e;return n+e}};const{defaults:di}=Jo.exports,{rtrim:hi,splitCells:gi,escape:mi,findClosingBracket:bi}=pi;function vi(e,t,n){const r=t.href,o=t.title?mi(t.title):null,i=e[1].replace(/\\([\[\]])/g,"$1");return"!"!==e[0].charAt(0)?{type:"link",raw:n,href:r,title:o,text:i}:{type:"image",raw:n,href:r,title:o,text:mi(i)}}var yi=class{constructor(e){this.options=e||di}space(e){const t=this.rules.block.newline.exec(e);if(t)return t[0].length>1?{type:"space",raw:t[0]}:{raw:"\n"}}code(e,t){const n=this.rules.block.code.exec(e);if(n){const e=t[t.length-1];if(e&&"paragraph"===e.type)return{raw:n[0],text:n[0].trimRight()};const r=n[0].replace(/^ {4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:hi(r,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],n=function(e,t){const n=e.match(/^(\s+)(?:```)/);if(null===n)return t;const r=n[1];return t.split("\n").map((e=>{const t=e.match(/^\s+/);if(null===t)return e;const[n]=t;return n.length>=r.length?e.slice(r.length):e})).join("\n")}(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim():t[2],text:n}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){const t=hi(e,"#");this.options.pedantic?e=t.trim():t&&!/ $/.test(t)||(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e}}}nptable(e){const t=this.rules.block.nptable.exec(e);if(t){const e={type:"table",header:gi(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[],raw:t[0]};if(e.header.length===e.align.length){let t,n=e.align.length;for(t=0;t<n;t++)/^ *-+: *$/.test(e.align[t])?e.align[t]="right":/^ *:-+: *$/.test(e.align[t])?e.align[t]="center":/^ *:-+ *$/.test(e.align[t])?e.align[t]="left":e.align[t]=null;for(n=e.cells.length,t=0;t<n;t++)e.cells[t]=gi(e.cells[t],e.header.length);return e}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const e=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],text:e}}}list(e){const t=this.rules.block.list.exec(e);if(t){let e=t[0];const n=t[2],r=n.length>1,o={type:"list",raw:e,ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]},i=t[0].match(this.rules.block.item);let a,s,c,l,u,f,p,d,h=!1,g=i.length;c=this.rules.block.listItemStart.exec(i[0]);for(let t=0;t<g;t++){if(a=i[t],e=a,t!==g-1){if(l=this.rules.block.listItemStart.exec(i[t+1]),l[1].length>c[0].length||l[1].length>3){i.splice(t,2,i[t]+"\n"+i[t+1]),t--,g--;continue}(!this.options.pedantic||this.options.smartLists?l[2][l[2].length-1]!==n[n.length-1]:r===(1===l[2].length))&&(u=i.slice(t+1).join("\n"),o.raw=o.raw.substring(0,o.raw.length-u.length),t=g-1),c=l}s=a.length,a=a.replace(/^ *([*+-]|\d+[.)]) ?/,""),~a.indexOf("\n ")&&(s-=a.length,a=this.options.pedantic?a.replace(/^ {1,4}/gm,""):a.replace(new RegExp("^ {1,"+s+"}","gm"),"")),f=h||/\n\n(?!\s*$)/.test(a),t!==g-1&&(h="\n"===a.charAt(a.length-1),f||(f=h)),f&&(o.loose=!0),this.options.gfm&&(p=/^\[[ xX]\] /.test(a),d=void 0,p&&(d=" "!==a[1],a=a.replace(/^\[[ xX]\] +/,""))),o.items.push({type:"list_item",raw:e,task:p,checked:d,loose:f,text:a})}return o}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:this.options.sanitize?"paragraph":"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):mi(t[0]):t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){t[3]&&(t[3]=t[3].substring(1,t[3].length-1));return{tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}}}table(e){const t=this.rules.block.table.exec(e);if(t){const e={type:"table",header:gi(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[]};if(e.header.length===e.align.length){e.raw=t[0];let n,r=e.align.length;for(n=0;n<r;n++)/^ *-+: *$/.test(e.align[n])?e.align[n]="right":/^ *:-+: *$/.test(e.align[n])?e.align[n]="center":/^ *:-+ *$/.test(e.align[n])?e.align[n]="left":e.align[n]=null;for(r=e.cells.length,n=0;n<r;n++)e.cells[n]=gi(e.cells[n].replace(/^ *\| *| *\| *$/g,""),e.header.length);return e}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1]}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t)return{type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1]}}text(e,t){const n=this.rules.block.text.exec(e);if(n){const e=t[t.length-1];return e&&"text"===e.type?{raw:n[0],text:n[0]}:{type:"text",raw:n[0],text:n[0]}}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:mi(t[1])}}tag(e,t,n){const r=this.rules.inline.tag.exec(e);if(r)return!t&&/^<a /i.test(r[0])?t=!0:t&&/^<\/a>/i.test(r[0])&&(t=!1),!n&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?n=!0:n&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(n=!1),{type:this.options.sanitize?"text":"html",raw:r[0],inLink:t,inRawBlock:n,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):mi(r[0]):r[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;const t=hi(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{const e=bi(t[2],"()");if(e>-1){const n=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,n).trim(),t[3]=""}}let n=t[2],r="";if(this.options.pedantic){const e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);e&&(n=e[1],r=e[3])}else r=t[3]?t[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(n=this.options.pedantic&&!/>$/.test(e)?n.slice(1):n.slice(1,-1)),vi(t,{href:n?n.replace(this.rules.inline._escapes,"$1"):n,title:r?r.replace(this.rules.inline._escapes,"$1"):r},t[0])}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let e=(n[2]||n[1]).replace(/\s+/g," ");if(e=t[e.toLowerCase()],!e||!e.href){const e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return vi(n,e,n[0])}}strong(e,t,n=""){let r=this.rules.inline.strong.start.exec(e);if(r&&(!r[1]||r[1]&&(""===n||this.rules.inline.punctuation.exec(n)))){t=t.slice(-1*e.length);const n="**"===r[0]?this.rules.inline.strong.endAst:this.rules.inline.strong.endUnd;let o;for(n.lastIndex=0;null!=(r=n.exec(t));)if(o=this.rules.inline.strong.middle.exec(t.slice(0,r.index+3)),o)return{type:"strong",raw:e.slice(0,o[0].length),text:e.slice(2,o[0].length-2)}}}em(e,t,n=""){let r=this.rules.inline.em.start.exec(e);if(r&&(!r[1]||r[1]&&(""===n||this.rules.inline.punctuation.exec(n)))){t=t.slice(-1*e.length);const n="*"===r[0]?this.rules.inline.em.endAst:this.rules.inline.em.endUnd;let o;for(n.lastIndex=0;null!=(r=n.exec(t));)if(o=this.rules.inline.em.middle.exec(t.slice(0,r.index+2)),o)return{type:"em",raw:e.slice(0,o[0].length),text:e.slice(1,o[0].length-1)}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," ");const n=/[^ ]/.test(e),r=/^ /.test(e)&&/ $/.test(e);return n&&r&&(e=e.substring(1,e.length-1)),e=mi(e,!0),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2]}}autolink(e,t){const n=this.rules.inline.autolink.exec(e);if(n){let e,r;return"@"===n[2]?(e=mi(this.options.mangle?t(n[1]):n[1]),r="mailto:"+e):(e=mi(n[1]),r=e),{type:"link",raw:n[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}url(e,t){let n;if(n=this.rules.inline.url.exec(e)){let e,r;if("@"===n[2])e=mi(this.options.mangle?t(n[0]):n[0]),r="mailto:"+e;else{let t;do{t=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(t!==n[0]);e=mi(n[0]),r="www."===n[1]?"http://"+e:e}return{type:"link",raw:n[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e,t,n){const r=this.rules.inline.text.exec(e);if(r){let e;return e=t?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):mi(r[0]):r[0]:mi(this.options.smartypants?n(r[0]):r[0]),{type:"text",raw:r[0],text:e}}}};const{noopTest:wi,edit:ki,merge:xi}=pi,Si={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?! {0,3}bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:wi,table:wi,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};Si.def=ki(Si.def).replace("label",Si._label).replace("title",Si._title).getRegex(),Si.bullet=/(?:[*+-]|\d{1,9}[.)])/,Si.item=/^( *)(bull) ?[^\n]*(?:\n(?! *bull ?)[^\n]*)*/,Si.item=ki(Si.item,"gm").replace(/bull/g,Si.bullet).getRegex(),Si.listItemStart=ki(/^( *)(bull)/).replace("bull",Si.bullet).getRegex(),Si.list=ki(Si.list).replace(/bull/g,Si.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Si.def.source+")").getRegex(),Si._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Si._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Si.html=ki(Si.html,"i").replace("comment",Si._comment).replace("tag",Si._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Si.paragraph=ki(Si._paragraph).replace("hr",Si.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",Si._tag).getRegex(),Si.blockquote=ki(Si.blockquote).replace("paragraph",Si.paragraph).getRegex(),Si.normal=xi({},Si),Si.gfm=xi({},Si.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n {0,3}([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n {0,3}\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),Si.gfm.nptable=ki(Si.gfm.nptable).replace("hr",Si.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",Si._tag).getRegex(),Si.gfm.table=ki(Si.gfm.table).replace("hr",Si.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",Si._tag).getRegex(),Si.pedantic=xi({},Si.normal,{html:ki("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Si._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:wi,paragraph:ki(Si.normal._paragraph).replace("hr",Si.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Si.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const _i={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:wi,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",strong:{start:/^(?:(\*\*(?=[*punctuation]))|\*\*)(?![\s])|__/,middle:/^\*\*(?:(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)|\*(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)*?\*)+?\*\*$|^__(?![\s])((?:(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)|_(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)*?_)+?)__$/,endAst:/[^punctuation\s]\*\*(?!\*)|[punctuation]\*\*(?!\*)(?:(?=[punctuation_\s]|$))/,endUnd:/[^\s]__(?!_)(?:(?=[punctuation*\s])|$)/},em:{start:/^(?:(\*(?=[punctuation]))|\*)(?![*\s])|_/,middle:/^\*(?:(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)|\*(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)*?\*)+?\*$|^_(?![_\s])(?:(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)|_(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)*?_)+?_$/,endAst:/[^punctuation\s]\*(?!\*)|[punctuation]\*(?!\*)(?:(?=[punctuation_\s]|$))/,endUnd:/[^\s]_(?!_)(?:(?=[punctuation*\s])|$)/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:wi,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\s*punctuation])/,_punctuation:"!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"};_i.punctuation=ki(_i.punctuation).replace(/punctuation/g,_i._punctuation).getRegex(),_i._blockSkip="\\[[^\\]]*?\\]\\([^\\)]*?\\)|`[^`]*?`|<[^>]*?>",_i._overlapSkip="__[^_]*?__|\\*\\*\\[^\\*\\]*?\\*\\*",_i._comment=ki(Si._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),_i.em.start=ki(_i.em.start).replace(/punctuation/g,_i._punctuation).getRegex(),_i.em.middle=ki(_i.em.middle).replace(/punctuation/g,_i._punctuation).replace(/overlapSkip/g,_i._overlapSkip).getRegex(),_i.em.endAst=ki(_i.em.endAst,"g").replace(/punctuation/g,_i._punctuation).getRegex(),_i.em.endUnd=ki(_i.em.endUnd,"g").replace(/punctuation/g,_i._punctuation).getRegex(),_i.strong.start=ki(_i.strong.start).replace(/punctuation/g,_i._punctuation).getRegex(),_i.strong.middle=ki(_i.strong.middle).replace(/punctuation/g,_i._punctuation).replace(/overlapSkip/g,_i._overlapSkip).getRegex(),_i.strong.endAst=ki(_i.strong.endAst,"g").replace(/punctuation/g,_i._punctuation).getRegex(),_i.strong.endUnd=ki(_i.strong.endUnd,"g").replace(/punctuation/g,_i._punctuation).getRegex(),_i.blockSkip=ki(_i._blockSkip,"g").getRegex(),_i.overlapSkip=ki(_i._overlapSkip,"g").getRegex(),_i._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,_i._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,_i._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,_i.autolink=ki(_i.autolink).replace("scheme",_i._scheme).replace("email",_i._email).getRegex(),_i._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,_i.tag=ki(_i.tag).replace("comment",_i._comment).replace("attribute",_i._attribute).getRegex(),_i._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,_i._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,_i._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,_i.link=ki(_i.link).replace("label",_i._label).replace("href",_i._href).replace("title",_i._title).getRegex(),_i.reflink=ki(_i.reflink).replace("label",_i._label).getRegex(),_i.reflinkSearch=ki(_i.reflinkSearch,"g").replace("reflink",_i.reflink).replace("nolink",_i.nolink).getRegex(),_i.normal=xi({},_i),_i.pedantic=xi({},_i.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:ki(/^!?\[(label)\]\((.*?)\)/).replace("label",_i._label).getRegex(),reflink:ki(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",_i._label).getRegex()}),_i.gfm=xi({},_i.normal,{escape:ki(_i.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),_i.gfm.url=ki(_i.gfm.url,"i").replace("email",_i.gfm._extended_email).getRegex(),_i.breaks=xi({},_i.gfm,{br:ki(_i.br).replace("{2,}","*").getRegex(),text:ki(_i.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var Ei={block:Si,inline:_i};const Ci=yi,{defaults:Ai}=Jo.exports,{block:Oi,inline:Ti}=Ei,{repeatString:ji}=pi;function zi(e){return e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function Li(e){let t,n,r="";const o=e.length;for(t=0;t<o;t++)n=e.charCodeAt(t),Math.random()>.5&&(n="x"+n.toString(16)),r+="&#"+n+";";return r}const{defaults:Ni}=Jo.exports,{cleanUrl:$i,escape:Ii}=pi;var Di=class{constructor(e){this.options=e||Ni}code(e,t,n){const r=(t||"").match(/\S*/)[0];if(this.options.highlight){const t=this.options.highlight(e,r);null!=t&&t!==e&&(n=!0,e=t)}return r?'<pre><code class="'+this.options.langPrefix+Ii(r,!0)+'">'+(n?e:Ii(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:Ii(e,!0))+"</code></pre>\n"}blockquote(e){return"<blockquote>\n"+e+"</blockquote>\n"}html(e){return e}heading(e,t,n,r){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+r.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t,n){const r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e){return"<li>"+e+"</li>\n"}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>"+e+"</p>\n"}table(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return"<tr>\n"+e+"</tr>\n"}tablecell(e,t){const n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,t,n){if(null===(e=$i(this.options.sanitize,this.options.baseUrl,e)))return n;let r='<a href="'+Ii(e)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>",r}image(e,t,n){if(null===(e=$i(this.options.sanitize,this.options.baseUrl,e)))return n;let r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">",r}text(e){return e}},Pi=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}},qi=class{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let n=e,r=0;if(this.seen.hasOwnProperty(n)){r=this.seen[e];do{r++,n=e+"-"+r}while(this.seen.hasOwnProperty(n))}return t||(this.seen[e]=r,this.seen[n]=0),n}slug(e,t={}){const n=this.serialize(e);return this.getNextSafeSlug(n,t.dryrun)}};const Ri=Di,Mi=Pi,Fi=qi,{defaults:Bi}=Jo.exports,{unescape:Ui}=pi;const Hi=class e{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Ai,this.options.tokenizer=this.options.tokenizer||new Ci,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;const t={block:Oi.normal,inline:Ti.normal};this.options.pedantic?(t.block=Oi.pedantic,t.inline=Ti.pedantic):this.options.gfm&&(t.block=Oi.gfm,this.options.breaks?t.inline=Ti.breaks:t.inline=Ti.gfm),this.tokenizer.rules=t}static get rules(){return{block:Oi,inline:Ti}}static lex(t,n){return new e(n).lex(t)}static lexInline(t,n){return new e(n).inlineTokens(t)}lex(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(e,this.tokens,!0),this.inline(this.tokens),this.tokens}blockTokens(e,t=[],n=!0){let r,o,i,a;for(e=e.replace(/^ +$/gm,"");e;)if(r=this.tokenizer.space(e))e=e.substring(r.raw.length),r.type&&t.push(r);else if(r=this.tokenizer.code(e,t))e=e.substring(r.raw.length),r.type?t.push(r):(a=t[t.length-1],a.raw+="\n"+r.raw,a.text+="\n"+r.text);else if(r=this.tokenizer.fences(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.heading(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.nptable(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.hr(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.blockquote(e))e=e.substring(r.raw.length),r.tokens=this.blockTokens(r.text,[],n),t.push(r);else if(r=this.tokenizer.list(e)){for(e=e.substring(r.raw.length),i=r.items.length,o=0;o<i;o++)r.items[o].tokens=this.blockTokens(r.items[o].text,[],!1);t.push(r)}else if(r=this.tokenizer.html(e))e=e.substring(r.raw.length),t.push(r);else if(n&&(r=this.tokenizer.def(e)))e=e.substring(r.raw.length),this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});else if(r=this.tokenizer.table(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.lheading(e))e=e.substring(r.raw.length),t.push(r);else if(n&&(r=this.tokenizer.paragraph(e)))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.text(e,t))e=e.substring(r.raw.length),r.type?t.push(r):(a=t[t.length-1],a.raw+="\n"+r.raw,a.text+="\n"+r.text);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}return t}inline(e){let t,n,r,o,i,a;const s=e.length;for(t=0;t<s;t++)switch(a=e[t],a.type){case"paragraph":case"text":case"heading":a.tokens=[],this.inlineTokens(a.text,a.tokens);break;case"table":for(a.tokens={header:[],cells:[]},o=a.header.length,n=0;n<o;n++)a.tokens.header[n]=[],this.inlineTokens(a.header[n],a.tokens.header[n]);for(o=a.cells.length,n=0;n<o;n++)for(i=a.cells[n],a.tokens.cells[n]=[],r=0;r<i.length;r++)a.tokens.cells[n][r]=[],this.inlineTokens(i[r],a.tokens.cells[n][r]);break;case"blockquote":this.inline(a.tokens);break;case"list":for(o=a.items.length,n=0;n<o;n++)this.inline(a.items[n].tokens)}return e}inlineTokens(e,t=[],n=!1,r=!1){let o,i,a,s,c=e;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(i=this.tokenizer.rules.inline.reflinkSearch.exec(c));)e.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(c=c.slice(0,i.index)+"["+ji("a",i[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(i=this.tokenizer.rules.inline.blockSkip.exec(c));)c=c.slice(0,i.index)+"["+ji("a",i[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;e;)if(a||(s=""),a=!1,o=this.tokenizer.escape(e))e=e.substring(o.raw.length),t.push(o);else if(o=this.tokenizer.tag(e,n,r))e=e.substring(o.raw.length),n=o.inLink,r=o.inRawBlock,t.push(o);else if(o=this.tokenizer.link(e))e=e.substring(o.raw.length),"link"===o.type&&(o.tokens=this.inlineTokens(o.text,[],!0,r)),t.push(o);else if(o=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(o.raw.length),"link"===o.type&&(o.tokens=this.inlineTokens(o.text,[],!0,r)),t.push(o);else if(o=this.tokenizer.strong(e,c,s))e=e.substring(o.raw.length),o.tokens=this.inlineTokens(o.text,[],n,r),t.push(o);else if(o=this.tokenizer.em(e,c,s))e=e.substring(o.raw.length),o.tokens=this.inlineTokens(o.text,[],n,r),t.push(o);else if(o=this.tokenizer.codespan(e))e=e.substring(o.raw.length),t.push(o);else if(o=this.tokenizer.br(e))e=e.substring(o.raw.length),t.push(o);else if(o=this.tokenizer.del(e))e=e.substring(o.raw.length),o.tokens=this.inlineTokens(o.text,[],n,r),t.push(o);else if(o=this.tokenizer.autolink(e,Li))e=e.substring(o.raw.length),t.push(o);else if(n||!(o=this.tokenizer.url(e,Li))){if(o=this.tokenizer.inlineText(e,r,zi))e=e.substring(o.raw.length),s=o.raw.slice(-1),a=!0,t.push(o);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}else e=e.substring(o.raw.length),t.push(o);return t}},Zi=class e{constructor(e){this.options=e||Bi,this.options.renderer=this.options.renderer||new Ri,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Mi,this.slugger=new Fi}static parse(t,n){return new e(n).parse(t)}static parseInline(t,n){return new e(n).parseInline(t)}parse(e,t=!0){let n,r,o,i,a,s,c,l,u,f,p,d,h,g,m,b,v,y,w="";const k=e.length;for(n=0;n<k;n++)switch(f=e[n],f.type){case"space":continue;case"hr":w+=this.renderer.hr();continue;case"heading":w+=this.renderer.heading(this.parseInline(f.tokens),f.depth,Ui(this.parseInline(f.tokens,this.textRenderer)),this.slugger);continue;case"code":w+=this.renderer.code(f.text,f.lang,f.escaped);continue;case"table":for(l="",c="",i=f.header.length,r=0;r<i;r++)c+=this.renderer.tablecell(this.parseInline(f.tokens.header[r]),{header:!0,align:f.align[r]});for(l+=this.renderer.tablerow(c),u="",i=f.cells.length,r=0;r<i;r++){for(s=f.tokens.cells[r],c="",a=s.length,o=0;o<a;o++)c+=this.renderer.tablecell(this.parseInline(s[o]),{header:!1,align:f.align[o]});u+=this.renderer.tablerow(c)}w+=this.renderer.table(l,u);continue;case"blockquote":u=this.parse(f.tokens),w+=this.renderer.blockquote(u);continue;case"list":for(p=f.ordered,d=f.start,h=f.loose,i=f.items.length,u="",r=0;r<i;r++)m=f.items[r],b=m.checked,v=m.task,g="",m.task&&(y=this.renderer.checkbox(b),h?m.tokens.length>0&&"text"===m.tokens[0].type?(m.tokens[0].text=y+" "+m.tokens[0].text,m.tokens[0].tokens&&m.tokens[0].tokens.length>0&&"text"===m.tokens[0].tokens[0].type&&(m.tokens[0].tokens[0].text=y+" "+m.tokens[0].tokens[0].text)):m.tokens.unshift({type:"text",text:y}):g+=y),g+=this.parse(m.tokens,h),u+=this.renderer.listitem(g,v,b);w+=this.renderer.list(u,p,d);continue;case"html":w+=this.renderer.html(f.text);continue;case"paragraph":w+=this.renderer.paragraph(this.parseInline(f.tokens));continue;case"text":for(u=f.tokens?this.parseInline(f.tokens):f.text;n+1<k&&"text"===e[n+1].type;)f=e[++n],u+="\n"+(f.tokens?this.parseInline(f.tokens):f.text);w+=t?this.renderer.paragraph(u):u;continue;default:{const e='Token with "'+f.type+'" type was not found.';if(this.options.silent)return void console.error(e);throw new Error(e)}}return w}parseInline(e,t){t=t||this.renderer;let n,r,o="";const i=e.length;for(n=0;n<i;n++)switch(r=e[n],r.type){case"escape":case"text":o+=t.text(r.text);break;case"html":o+=t.html(r.text);break;case"link":o+=t.link(r.href,r.title,this.parseInline(r.tokens,t));break;case"image":o+=t.image(r.href,r.title,r.text);break;case"strong":o+=t.strong(this.parseInline(r.tokens,t));break;case"em":o+=t.em(this.parseInline(r.tokens,t));break;case"codespan":o+=t.codespan(r.text);break;case"br":o+=t.br();break;case"del":o+=t.del(this.parseInline(r.tokens,t));break;default:{const e='Token with "'+r.type+'" type was not found.';if(this.options.silent)return void console.error(e);throw new Error(e)}}return o}},Wi=yi,Ji=Di,Gi=Pi,Vi=qi,{merge:Yi,checkSanitizeDeprecation:Xi,escape:Ki}=pi,{getDefaults:Qi,changeDefaults:ea,defaults:ta}=Jo.exports;function na(e,t,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"==typeof t&&(n=t,t=null),t=Yi({},na.defaults,t||{}),Xi(t),n){const r=t.highlight;let o;try{o=Hi.lex(e,t)}catch(e){return n(e)}const i=function(e){let i;if(!e)try{i=Zi.parse(o,t)}catch(t){e=t}return t.highlight=r,e?n(e):n(null,i)};if(!r||r.length<3)return i();if(delete t.highlight,!o.length)return i();let a=0;return na.walkTokens(o,(function(e){"code"===e.type&&(a++,setTimeout((()=>{r(e.text,e.lang,(function(t,n){if(t)return i(t);null!=n&&n!==e.text&&(e.text=n,e.escaped=!0),a--,0===a&&i()}))}),0))})),void(0===a&&i())}try{const n=Hi.lex(e,t);return t.walkTokens&&na.walkTokens(n,t.walkTokens),Zi.parse(n,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+Ki(e.message+"",!0)+"</pre>";throw e}}na.options=na.setOptions=function(e){return Yi(na.defaults,e),ea(na.defaults),na},na.getDefaults=Qi,na.defaults=ta,na.use=function(e){const t=Yi({},e);if(e.renderer){const n=na.defaults.renderer||new Ji;for(const t in e.renderer){const r=n[t];n[t]=(...o)=>{let i=e.renderer[t].apply(n,o);return!1===i&&(i=r.apply(n,o)),i}}t.renderer=n}if(e.tokenizer){const n=na.defaults.tokenizer||new Wi;for(const t in e.tokenizer){const r=n[t];n[t]=(...o)=>{let i=e.tokenizer[t].apply(n,o);return!1===i&&(i=r.apply(n,o)),i}}t.tokenizer=n}if(e.walkTokens){const n=na.defaults.walkTokens;t.walkTokens=t=>{e.walkTokens(t),n&&n(t)}}na.setOptions(t)},na.walkTokens=function(e,t){for(const n of e)switch(t(n),n.type){case"table":for(const e of n.tokens.header)na.walkTokens(e,t);for(const e of n.tokens.cells)for(const n of e)na.walkTokens(n,t);break;case"list":na.walkTokens(n.items,t);break;default:n.tokens&&na.walkTokens(n.tokens,t)}},na.parseInline=function(e,t){if(null==e)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");t=Yi({},na.defaults,t||{}),Xi(t);try{const n=Hi.lexInline(e,t);return t.walkTokens&&na.walkTokens(n,t.walkTokens),Zi.parseInline(n,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+Ki(e.message+"",!0)+"</pre>";throw e}},na.Parser=Zi,na.parser=Zi.parse,na.Renderer=Ji,na.TextRenderer=Gi,na.Lexer=Hi,na.lexer=Hi.lex,na.Tokenizer=Wi,na.Slugger=Vi,na.parse=na;var ra=na,oa=new ra.Renderer;function ia(e,t){var n=e.substr(1,e.length-2).trim();if(/\s/.test(n)){var r=n.match(/^[^:,]+/)[0],o=t.find((function(e){return e.match.test(r)}));if(o){var i=n.replace(r,"");if(":"===i[0]){var a=new Function('return {"'.concat(r,'" ').concat(i,"}"))(),s=a[r];return delete a[r],o.render(s,a,n)}if(","===i[0]){var c=new Function("return {".concat(i.substr(1),"}"))();return o.render(null,c,n)}if(""===i)return o.render(null,{},n)}}else{var l,u=/(.+)\[(.+)\]$/.exec(n);if(void 0!==(l=u?un(u[1])[u[2]]:un(n)))return l}return e}function aa(e,t){var n="",r=0,o=e.indexOf("{");if(-1===o)return e;for(var i,a=!1,s=o+1;s<e.length;s++)switch(e[s]){case"{":o=s,a=!1;break;case'"':case"'":s>0&&"\\"!==e[s-1]&&(a?a&&i===e[s]&&(a=!1):(a=!0,i=e[s]));break;case"}":if(!a){var c=e.substring(o,s+1),l="";try{l=ia(c,t)}catch(e){console.warn('An error occurred while rendering "'.concat(c,'": ').concat(e.message)),l=c}void 0===l&&(l=""),n+=e.substring(r,o)+l,r=s+1,-1===(o=e.indexOf("{",r))&&(s=e.index)}}return n+e.substring(r)}Object.assign(oa,{blockquote:function(e){return'<div class="fork">'.concat(e,"</div>")},del:function(e){return'<span class="small-caps">'.concat(e,"</span>")}});var sa=Nt("render").log,ca={renderer:oa,smartypants:!0};function la(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e.vars)throw new Error("The renderer was given an object with no vars property.");if(!e.blocks)throw new Error("The renderer was given an object with no blocks property.");var o="";if(!r){sa("Setting vars (".concat(e.vars.length,")"));var i,a=at(e.vars);try{for(a.s();!(i=a.n()).done;){var s=i.value;if(s.condition){var c=s.condition();c?(sa('Setting var "'.concat(s.name,'" (condition is currently true)')),sn(s.name,s.value())):sa('Not setting var "'.concat(s.name,'" (condition is currently false)'))}else sa('Setting var "'.concat(s.name,'"')),sn(s.name,s.value())}}catch(e){a.e(e)}finally{a.f()}}var l=[],u={};return e.blocks.forEach((function(e){switch(e.type){case"text":var r={text:e.content,startsNewParagraph:!0},i=l.filter((function(e){return!!e.mod.processRaw}));sa("Running ".concat(i.length," modifiers on raw source block")),i.forEach((function(e){e.mod.processRaw(r,{state:u[e.mod],invocation:e.invocation})})),r.text=aa(Br(r.text),t);var a=l.filter((function(e){return!!e.mod.process}));sa("Running ".concat(a.length," modifiers on source block")),a.forEach((function(e){return e.mod.process(r,{state:u[e.mod],invocation:e.invocation})})),sa("Output after modifiers: ".concat(JSON.stringify(r))),""!==r.text.trim()&&(""!==o&&(o+=r.startsNewParagraph?"\n\n":" "),o+=r.text),l=[];break;case"modifier":var s=n.filter((function(t){return t.match.test(e.content)}));if(1===s.length){var c=s[0];sa('Activated "'.concat(c.name,'" modifier matching [').concat(e.content,"]")),u[c]=u[c]||{},l.push({mod:c,invocation:e.content})}else 0===s.length||console.warn('More than one modifier matched "['.concat(e.content,']".')),o+="\n\n[".concat(e.content,"]\n\n");break;default:throw new Error("Don't know how to render a block with type \"".concat(e.type,'".'))}})),o=o.replace(/^((>|-|\*).*$)\n+\2/gm,"$1\n$2"),ra.setOptions(ca),sa("Final Markdown:\n".concat(o)),ra(o)}var ua={"config.template.inserts":ko,"config.template.modifiers":Mo};function fa(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return la(Wo(e),un("config.template.inserts")||[],un("config.template.modifiers")||[],t)}var pa=Nt("extensibility").warn;function da(e){return e.split(".").map(window.parseInt)}function ha(e,t,n){var r,o=e.volume,i=t-o,a=0;return new Promise((function(t){return window.requestAnimationFrame((function(s){r=s,window.requestAnimationFrame((function s(c){a+=c-r,e.volume=function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t}(a,o,i,n),a<n?(r=c,window.requestAnimationFrame(s)):t()}))}))}))}var ga,ma=Nt("sound"),ba=ma.log,va=ma.warn,ya={},wa={"sound.mute":!1,"sound.volume":1,"sound.transitionDuration":"1s"};function ka(e,t,n){ya[e]?(ya[e].setAttribute("src",t),n?ya[e].setAttribute("preload","auto"):ya[e].removeAttribute("preload"),ba('Updated <audio> element in sound bank for "'.concat(e,'" to use ').concat(t))):(ya[e]=document.createElement("audio"),ya[e].setAttribute("src",t),n&&ya[e].setAttribute("preload","auto"),ga.appendChild(ya[e]),ba('Added new <audio> element to sound bank for "'.concat(e,'" for ').concat(t)))}function xa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!ya[e])throw new Error("There is no sound loaded named ".concat(e,"."));return ba('Playing sound "'.concat(e,'" (looping: ').concat(t,")")),n>0&&(ya[e].volume=0,ha(ya[e],1,n)),t?(ya[e].loop=!0,ya[e].play()):(ya[e].loop=!1,new Promise((function(t,n){try{ya[e].addEventListener("ended",(function n(){ya[e].removeEventListener("ended",n),t()})),ya[e].play().catch((function(e){return n(e)}))}catch(e){n(e)}})))}function Sa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!ya[e])throw new Error("There is no sound loaded named ".concat(e,"."));if(t<=0)ya[e].pause(),ya[e].currentTime=0;else{var n=ya[e].volume;ha(ya[e],0,t).then((function(){ya[e].pause(),ya[e].volume=n,ya[e].currentTime=0}))}}function _a(e,t){if(!ya[e])throw new Error("There is no sound loaded named ".concat(e,"."));if(t<0||t>1)throw new Error("A sound volume must be between 0 and 1.");ya[e].volume=t}function Ea(e,t){if(!ya[e])throw new Error("There is no sound loaded named ".concat(e,"."));ya[e].muted=t}var Ca="1.2.3";var Aa={exports:{}};(function(e,t,n){function r(e){var t=this,n=function(){var e=4022871197,t=function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function o(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function i(e,t){var n=new r(e),i=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,i&&("object"==typeof i&&o(i,n),a.state=function(){return o(n,{})}),a}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.alea=i})(0,Aa,!1);var Oa={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function i(e,t){var n=new r(e),i=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,i&&("object"==typeof i&&o(i,n),a.state=function(){return o(n,{})}),a}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.xor128=i}(0,e,!1)}(Oa);var Ta={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function i(e,t){var n=new r(e),i=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,i&&("object"==typeof i&&o(i,n),a.state=function(){return o(n,{})}),a}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.xorwow=i}(0,e,!1)}(Ta);var ja={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,o=t.i;return e=r[o],n=(e^=e>>>7)^e<<24,n^=(e=r[o+1&7])^e>>>10,n^=(e=r[o+3&7])^e>>>3,n^=(e=r[o+4&7])^e<<7,e=r[o+7&7],n^=(e^=e<<13)^e<<9,r[o]=n,t.i=o+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n&&(r[7]=-1),e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function o(e,t){return t.x=e.x.slice(),t.i=e.i,t}function i(e,t){null==e&&(e=+new Date);var n=new r(e),i=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,i&&(i.x&&o(i,n),a.state=function(){return o(n,{})}),a}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.xorshift7=i}(0,e,!1)}(ja);var za={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,o=t.X,i=t.i;return t.w=r=r+1640531527|0,n=o[i+34&127],e=o[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=o[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,o,i,a,s=[],c=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,c=Math.max(c,t.length)),o=0,i=-32;i<c;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(a=a+1640531527|0,o=0==(n=s[127&i]^=r+a)?o+1:0);for(o>=128&&(s[127&(t&&t.length||0)]=-1),o=127,i=512;i>0;--i)r=s[o+34&127],n=s[o=o+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[o]=r^n;e.w=a,e.X=s,e.i=o}(t,e)}function o(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function i(e,t){null==e&&(e=+new Date);var n=new r(e),i=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,i&&(i.X&&o(i,n),a.state=function(){return o(n,{})}),a}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.xor4096=i}(0,e,!1)}(za);var La={exports:{}};!function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,o=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^o,t.a=o-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function o(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function i(e,t){var n=new r(e),i=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,i&&("object"==typeof i&&o(i,n),a.state=function(){return o(n,{})}),a}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.tychei=i}(0,e,!1)}(La);var Na={exports:{}};!function(e){!function(t,n){var r,o=(0,eval)("this"),i=256,a=n.pow(i,6),s=n.pow(2,52),c=2*s,l=255;function u(e,l,u){var m=[],b=h(d((l=1==l?{entropy:!0}:l||{}).entropy?[e,g(t)]:null==e?function(){try{var e;return r&&(e=r.randomBytes)?e=e(i):(e=new Uint8Array(i),(o.crypto||o.msCrypto).getRandomValues(e)),g(e)}catch(e){var n=o.navigator,a=n&&n.plugins;return[+new Date,o,a,o.screen,g(t)]}}():e,3),m),v=new f(m),y=function(){for(var e=v.g(6),t=a,n=0;e<s;)e=(e+n)*i,t*=i,n=v.g(1);for(;e>=c;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|v.g(4)},y.quick=function(){return v.g(4)/4294967296},y.double=y,h(g(v.S),t),(l.pass||u||function(e,t,r,o){return o&&(o.S&&p(o,v),e.state=function(){return p(v,{})}),r?(n.random=e,t):e})(y,b,"global"in l?l.global:this==n,l.state)}function f(e){var t,n=e.length,r=this,o=0,a=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);o<i;)s[o]=o++;for(o=0;o<i;o++)s[o]=s[a=l&a+e[o%n]+(t=s[o])],s[a]=t;(r.g=function(e){for(var t,n=0,o=r.i,a=r.j,s=r.S;e--;)t=s[o=l&o+1],n=n*i+s[l&(s[o]=s[a=l&a+t])+(s[a]=t)];return r.i=o,r.j=a,n})(i)}function p(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function d(e,t){var n,r=[],o=typeof e;if(t&&"object"==o)for(n in e)try{r.push(d(e[n],t-1))}catch(e){}return r.length?r:"string"==o?e:e+"\0"}function h(e,t){for(var n,r=e+"",o=0;o<r.length;)t[l&o]=l&(n^=19*t[l&o])+r.charCodeAt(o++);return g(t)}function g(e){return String.fromCharCode.apply(0,e)}if(n.seedrandom=u,h(n.random(),t),e.exports){e.exports=u;try{r=require("crypto")}catch(e){}}}([],Math)}(Na);var $a=Aa.exports,Ia=Oa.exports,Da=Ta.exports,Pa=ja.exports,qa=za.exports,Ra=La.exports,Ma=Na.exports;Ma.alea=$a,Ma.xor128=Ia,Ma.xorwow=Da,Ma.xorshift7=Pa,Ma.xor4096=qa,Ma.tychei=Ra;var Fa=Ma,Ba={"config.random.seed":function(){return new Date},"config.random.privateState":null},Ua=Fa(new Date,{state:!0});We.on("state-change",(function(e){var t=e.name,n=e.value;"config.random.seed"===t&&(Ua=Fa(n,{state:!0}))}));var Ha=Nt("style").log,Za=document.createElement("div"),Wa=document.createElement("div"),Ja=document.createElement("div"),Ga={};function Va(e,t,n){var r=t.match(/\.(.+)$/);if(r&&r[1]){var o=r[1],i=Ga[e]||document.createElement("style");i.dataset.cbFontLoader=e,i.innerHTML='@font-face { font-family: "'.concat(n,'"; src: url("').concat(t,'") format("').concat(o,'"); }'),i.parentNode||Ja.appendChild(i)}}var Ya={white:"#ffffff",black:"#000000",gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},Xa=/-?\d+(\.\d+)?%?/g;var Ka=function(e){return e.match(Xa)};var Qa=function(e,t,n){return Math.min(Math.max(e,t),n)},es=Ka,ts=Qa;function ns(e,t){switch(e=parseFloat(e),t){case 0:return ts(e,0,360);case 1:case 2:return ts(e,0,100);case 3:return ts(e,0,1)}}var rs=function(e){4!==e.length&&5!==e.length||(e=function(e){for(var t="#",n=1;n<e.length;n++){var r=e.charAt(n);t+=r+r}return t}(e));var t=[parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5,7),16)];if(9===e.length){var n=parseFloat((parseInt(e.substring(7,9),16)/255).toFixed(2));t.push(n)}return t},os=Ka,is=Qa;function as(e,t){return t<3?-1!=e.indexOf("%")?Math.round(255*is(parseInt(e,10),0,100)/100):is(parseInt(e,10),0,255):is(parseFloat(e),0,1)}var ss=function(e){var t,n,r,o,i,a=e[0]/360,s=e[1]/100,c=e[2]/100;if(0==s)return[i=255*c,i,i];t=2*c-(n=c<.5?c*(1+s):c+s-c*s),o=[0,0,0];for(var l=0;l<3;l++)(r=a+1/3*-(l-1))<0&&r++,r>1&&r--,i=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t,o[l]=255*i;return o},cs=function(e){return es(e).map(ns)},ls=rs,us=function(e){return os(e).map(as)},fs=ss;var ps={"#":ls,hsl:function(e){var t=cs(e),n=fs(t);return 4===t.length&&n.push(t[3]),n},rgb:us};function ds(e){for(var t in ps)if(0===e.indexOf(t))return ps[t](e)}ds.rgb=us,ds.hsl=cs,ds.hex=ls;var hs=ds;var gs=function(e){var t,n,r=e[0]/255,o=e[1]/255,i=e[2]/255,a=Math.min(r,o,i),s=Math.max(r,o,i),c=s-a;return s==a?t=0:r==s?t=(o-i)/c:o==s?t=2+(i-r)/c:i==s&&(t=4+(r-o)/c),(t=Math.min(60*t,360))<0&&(t+=360),n=(a+s)/2,[t,100*(s==a?0:n<=.5?c/(s+a):c/(2-s-a)),100*n]};function ms(e){if("string"!=typeof e)throw new Error("Only strings can be parsed as color values.");Ya[e]&&(e=Array.isArray(Ya[e])?Ya[e][Ya[e].length-1]:Ya[e]);var t=/^(\w+)-(\d)$/.exec(e);t&&Ya[t[1]]&&(e=Ya[t[1]][t[2]]);var n=hs(e),r=gs(n);return r[3]=void 0!==n[3]?n[3]:1,"hsla(".concat(r[0],", ").concat(r[1],"%, ").concat(r[2],"%, ").concat(r[3],")")}function bs(e){if(void 0===e)return{"background-color":"inherit",color:"inherit"};if("string"!=typeof e)throw new Error("Only strings can be parsed as colors.");var t={color:"inherit","background-color":"inherit"},n=e.split(/ on /i);return t.color=ms(n[0].trim().toLowerCase()),2===n.length&&(t["background-color"]=ms(n[1].trim().toLowerCase())),t}var vs,ys,ws=Nt("style").log,ks={"config.style.backdrop":"gray-0","config.style.page.style":"shadow","config.style.page.style.borderColor":"gray-2","config.style.page.font":"Iowan Old Style/Constantia/Georgia/serif 18","config.style.page.color":"gray-9 on white","config.style.page.fork.divider.color":"gray-3","config.style.page.fork.divider.style":"dashed","config.style.page.fork.divider.size":1,"config.style.page.link.color":"gray-9","config.style.page.link.lineColor":"red-8","config.style.page.link.font":"underline","config.style.page.link.active.color":"red-8 on red-0","config.style.page.verticalAlign":"center","config.style.page.header.font":"16","config.style.page.header.link.font":"small caps","config.style.page.footer.font":"16","config.style.page.footer.link.font":"small caps"},xs={},Ss=document.createElement("style");function _s(e,t){xs[e]=xs[e]||{},Object.assign(xs[e],t),function(){function e(e,t){return e+"{"+Object.keys(t).sort().reduce((function(e,n){return t[n]?e+n+":"+t[n].toString()+";":e}),"")+"}"}Ss.innerHTML=Object.keys(xs).reduce((function(t,n){return t+e(n,xs[n])}),"")}()}function Es(e,t){var n="#page",r=e.replace(/^config\.style\.page\./i,"").split(".");switch("header"===r[0].toLowerCase()?(n+=" header",r.shift()):"footer"===r[0].toLowerCase()&&(n+=" footer",r.shift()),"link"===r[0].toLowerCase()&&(n+=" a",r.shift()),"active"===r[0].toLowerCase()&&(n="".concat(n,":hover, ").concat(n,":active"),r.shift()),r[0].toLowerCase()){case"color":ws("Setting color for ".concat(n)),_s(n,bs(t));break;case"linecolor":ws("Setting line color for ".concat(n));var o=bs(t).color;_s(n,{"text-decoration-color":o,"-webkit-text-decoration-color":o});break;case"font":ws("Setting font for ".concat(n)),_s(n,function(e){var t={"font-family":"inherit","font-size":"inherit","font-style":"inherit","font-weight":"inherit","letter-spacing":"inherit","text-decoration":"inherit","text-transform":"inherit"};if(void 0===e)return t;if("string"!=typeof e)throw new Error("Only strings can be parsed as fonts.");function n(e,t){e["font-family"]=t.split("/").map((function(e){var t=e;return'"'!==t[0]&&(t='"'+t),'"'!==t[t.length-1]&&(t+='"'),t})).join(",")}function r(e){e["font-weight"]="bold"}function o(e){e["font-style"]="italic"}function i(e){e["font-style"]="none",e["font-weight"]="normal",e["letter-spacing"]="normal",e["text-decoration"]="none",e["text-transform"]="none"}function a(e){e["letter-spacing"]="0.075em",e["text-transform"]="uppercase",e["font-size"]&&"inherit"!==e["font-size"]?e["font-size"]="calc(0.7 * ".concat(e["font-size"],")"):e["font-size"]="70%"}function s(e){e["text-decoration"]="underline"}var c=/\b\d+(?:\.\d+)?(ch|cm|ex|in|mm|pc|pt|px|r?em|vh|vmax|vmin|vw|%)?/i.exec(e);if(c){/^\d+$/.test(c[0])?t["font-size"]=c[0]+"px":t["font-size"]=c[0],0!==c.index&&n(t,e.substr(0,c.index).trim());var l=e.substr(c.index);/\bregular\b/i.test(l)?(t["font-style"]="none",t["font-weight"]="normal",t["letter-spacing"]="normal",t["text-decoration"]="none",t["text-transform"]="none"):(/\bbold\b/.test(l)&&r(t),/\bitalics?\b/.test(l)&&o(t),/\bunderlined?/.test(l)&&s(t),/\bsmall caps?\b/.test(l)&&a(t))}else{for(var u,f=e;u=/(bold|italics?|regular|small caps|underlined?)$/.exec(f);){switch(u[0]){case"bold":r(t);break;case"italic":case"italics":o(t);break;case"regular":i(t);break;case"small caps":a(t);break;case"underline":case"underlined":s(t)}f=f.substr(0,u.index).trim()}""!==f.trim()&&n(t,f)}return t}(t))}}Rt(document.querySelector("tw-storydata")),window.engine={extend:function(e,t){var n=un("engine.version"),r=da(e),o=da(n);o[0]<r[0]?pa("The current engine version (".concat(n,") has a lower major version than requested (").concat(e,"); skipping")):(o[0]>r[0]?pa("The current engine version (".concat(n,") has a higher major version than requested (").concat(e,"); running code but you may encounter problems")):(o[1]<r[1]&&pa("The current engine version (".concat(n,") has a lower minor version than requested (").concat(e,"); running code but you may encounter problems")),o[1]===r[1]&&o[2]<r[2]&&pa("The current engine version (".concat(n,") has a lower patch version than requested (").concat(e,"); running code but you may encounter problems"))),t())},event:We,log:zt,render:fa,state:yn,story:Vt,warn:Lt},rn(),Object.assign(window,{go:kn,restart:xn}),Za.dataset.cbGoogleFontLoader="",Za.setAttribute("hidden",!0),Wa.dataset.cbTypekitFontLoader="",Wa.setAttribute("hidden",!0),Ja.dataset.cbUrlFontLoader="",Ja.setAttribute("hidden",!0),document.body.appendChild(Za),document.body.appendChild(Wa),document.body.appendChild(Ja),We.on("state-change",(function(e){var t=e.name;if("config"===t||"config.style"===t||"config.style.fonts"===t){var n=un("config.style.fonts");if(!n)return;Object.keys(n).forEach((function(e){var t=n[e].name,r=n[e].url;t&&r&&Va(e,r,t)}))}else{var r=t.match(/^config\.style\.fonts\.([^.]+)/i);if(r){var o=r[1],i=un("config.style.fonts.".concat(o,".name")),a=un("config.style.fonts.".concat(o,".url"));return void(a&&i&&(Ha("Adding font from URL (".concat(i,")")),Va(o,a,i)))}}an(t,"config.style.googleFont")&&(Ha("Adding Google font"),Za.innerHTML=un("config.style.googleFont")),an(t,"config.style.typekitFont")&&(Ha("Adding Typekit font"),Wa.innerHTML=un("config.style.typekitFont"))})),Ss.dataset.cbAuthorStyles="",document.head.appendChild(Ss),We.on("state-change",(function(e){var t=e.name,n=e.value;if(an(t,"config.style.backdrop")&&(ws("Setting backdrop color"),_s("#backdrop",{"background-color":bs(un("config.style.backdrop")).color})),an(t,"config.style.page.fork.divider.color")&&(ws("Setting fork divider color"),_s("#page .fork p a + a",{"border-top-color":bs(un("config.style.page.fork.divider.color")).color})),an(t,"config.style.page.fork.divider.size")&&(ws("Setting fork divider size"),_s("#page .fork p a + a",{"border-top-width":"".concat(un("config.style.page.fork.divider.size"),"px")})),an(t,"config.style.page.fork.divider.style")&&(ws("Setting fork divider style"),_s("#page .fork p a + a",{"border-top-style":un("config.style.page.fork.divider.style")})),an(t,"config.style.page.style")||an(t,"config.style.page.style.borderColor"))switch(ws("Setting page style"),un("config.style.page.style")){case"none":_s("#page",{border:"none","box-shadow":"none"});break;case"shadow":_s("#page",{border:"none","box-shadow":"0 4px 8px hsla(0, 0%, 0%, 0.25)"});break;case"thick-line":_s("#page",{border:"4px solid ".concat(bs(un("config.style.page.style.borderColor")).color),"box-shadow":"none"});break;case"thin-line":_s("#page",{border:"1px solid ".concat(bs(un("config.style.page.style.borderColor")).color),"box-shadow":"none"})}if(an(t,"config.style.page.verticalAlign"))switch(ws("Setting page vertical alignment"),un("config.style.page.verticalAlign")){case"top":_s("#page article",{"align-items":"flex-start"});break;case"center":_s("#page article",{"align-items":"center"});break;case"bottom":_s("#page article",{"align-items":"flex-end"})}/^config\.style\.page\..*\.((line)?color|font)$/i.test(t)&&Es(t,n),an(t,"config.style.page")&&["config.style.page","config.style.page.header","config.style.page.footer"].forEach((function(e){var t=un(e);t&&function(e,t){["color","font","lineColor"].forEach((function(n){t[n]&&Es("".concat(e,".").concat(n),t[n]),t.link&&(t.link[n]&&Es("".concat(e,".link.").concat(n),t.link[n]),t.link.active&&t.link.active[n]&&Es("".concat(e,".link.active.").concat(n),t.link.active[n]))}))}(e,t)}))})),[to,Tt,Ba,wa,en,ks,ua].forEach((function(e){return Object.keys(e).forEach((function(t){"function"==typeof e[t]?cn(t,e[t]()):cn(t,e[t])}))})),function(e){e("browser.height",(function(){return window.innerHeight})),e("browser.online",(function(){return window.navigator.onLine})),e("browser.width",(function(){return window.innerWidth}))}(ln),function(e){e("engine.version",(function(){return Ca}))}(ln),function(e){e("now.second",(function(){return(new Date).getSeconds()})),e("now.minute",(function(){return(new Date).getMinutes()})),e("now.hour",(function(){return(new Date).getHours()})),e("now.day",(function(){return(new Date).getDate()})),e("now.weekday",(function(){return(new Date).getDay()+1})),e("now.weekdayName",(function(){return(new Date).toLocaleString(navigator.language,{weekday:"long"})})),e("now.month",(function(){return(new Date).getMonth()+1})),e("now.monthName",(function(){return(new Date).toLocaleString(navigator.language,{month:"long"})})),e("now.year",(function(){return(new Date).getFullYear()})),e("now.timestamp",(function(){return(new Date).toLocaleString(navigator.language,{hour:"numeric",minute:"numeric",second:"numeric"})}))}(ln),function(e){e("passage.name",(function(){var e=un("trail");if(e)return e[e.length-1]})),e("passage.visits",(function(){var e=un("trail"),t=un("passage.name");if(e)return e.reduce((function(e,n){return n===t?e+1:e}),0)}))}(ln),function(e){e("random.coinFlip",(function(){return Ua()>.5})),e("random.fraction",(function(){return Ua()})),[3,4,5,6,8,10,12,20,25,50,100,1e3].forEach((function(t){e("random.d".concat(t),(function(){return 1+Math.round(Ua()*(t-1))}))}))}(ln),function(e){e("story.name",Ht)}(ln),window.addEventListener("error",Yr),window.addEventListener("unhandledrejection",(function(e){return Yr(e.reason)})),vs=window.console.warn,ys=document.querySelector("#page .warnings"),console.warn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(un("config.testing"))try{ys.removeAttribute("hidden"),t.forEach((function(e){var t=document.createElement("li");t.className="warning",t.innerHTML="Warning: ".concat(_r(e)),ys.appendChild(t)}))}catch(e){}vs.apply(window.console,t)},We.on("state-change",(function(e){"trail"===e.name&&(ys.setAttribute("hidden",""),ys.innerHTML="")})),Xr=document.querySelector("#page article"),Qr=document.querySelector("#page #spinner"),Kr={},["header","footer"].forEach((function(e){Kr[e]={container:document.querySelector("#page ".concat(e))},["left","center","right"].forEach((function(t){Kr[e][t]=document.querySelector("#page ".concat(e," .").concat(t))}))})),We.on("state-change",(function(e){var t=e.name;return ao("trail"===t)})),["change","click"].forEach((function(e){document.body.addEventListener(e,(function(e){for(var t=e.target;t;)t.dataset&&Object.keys(t.dataset).some((function(e){return/^cb[A-Z]/.test(e)}))&&We.emit("dom-".concat(e.type),t),t=t.parentNode}))})),(ga=document.createElement("div")).setAttribute("hidden",!0),ga.dataset.cbSounds="",document.body.appendChild(ga),We.on("state-change",(function(e){var t=e.name,n=e.value,r=an(t,"sound.ambient"),o=an(t,"sound.effect");if(r){var i=un("sound.ambient");i&&Object.keys(i).forEach((function(e){i[e].url&&ka(e,i[e].url,!1),i[e].volume&&_a(e,i[e].volume),void 0!==i[e].muted&&Ea(e,i[e].muted),i[e].playing&&xa(e,!0).catch((function(t){return va('Could not resume playing ambient sound "'.concat(e,'" (').concat(t.message,")"))}))}))}if(o){var a=un("sound.effect");a&&Object.keys(a).forEach((function(e){a[e].url&&ka(e,a[e].url,!0),a[e].volume&&_a(e,a[e].volume),void 0!==a[e].muted&&Ea(e,a[e].muted),a[e].playing&&xa(e,!1).then((function(){return sn("sound.effect.".concat(e,".playing"),!1)})).catch((function(t){return va('Could not resume playing sound effect "'.concat(e,'" (').concat(t.message))}))}))}if(!r&&!o){var s=/^sound\.(ambient|effect)\.(.+?)\.(.+)$/i.exec(t);if(s)switch(s[3].toLowerCase()){case"playing":n?"ambient"===s[1]?xa(s[2],!0,Hr(un("".concat(s[2],".transitionDuration"))||un("sound.transitionDuration")||"0s","ms")):xa(s[2],!1).then((function(){return sn(t,!1)})):"ambient"===s[1]?Sa(s[2],Hr(un("".concat(s[2],".transitionDuration"))||un("sound.transitionDuration")||"0s","ms")):Sa(s[2]);break;case"url":ka(s[2],n,"effect"===s[1]);break;case"volume":_a(s[2],n)}}})),Mt(),Pr&&un("config.testing")&&Dr(),Bt(),Ft(),!un("config.testing")&&gn()&&mn()}();
</script></body></html>